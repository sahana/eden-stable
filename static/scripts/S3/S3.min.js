/*
 2013-2020 (c) Sahana Software Foundation
 @license MIT

 requires jQuery 1.9.1+
 requires jQuery UI 1.10 widget factory

 2015-2020 (c) Sahana Software Foundation
 @license MIT

 requires jQuery 1.9.1+
 requires jQuery UI 1.10 widget factory
 requires jQuery jstree 3.0.3
 jQuery UI :data 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Disable Selection 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Focusable 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Keycode 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Labels 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Scroll Parent 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Tabbable 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Unique ID 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Widget 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Position 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license

 http://api.jqueryui.com/position/
 jQuery UI Mouse 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Tabs 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Datepicker 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Menu 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Draggable 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Droppable 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Resizable 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Button 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Dialog 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Autocomplete 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Selectmenu 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Slider 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery Timepicker Addon - v1.5.0 - 2014-09-01
 http://trentrichardson.com/examples/timepicker
 Copyright (c) 2014 Trent Richardson; Licensed MIT  jQuery clueTip plugin v1.2.5

 Date: Sun Jun 10 17:51:13 2012 EDT
 Requires: jQuery v1.3+

 Copyright 2012, Karl Swedberg
 Dual licensed under the MIT and GPL licenses:
 http://www.opensource.org/licenses/mit-license.php
 http://www.gnu.org/licenses/gpl.html


 Examples can be found at http://plugins.learningjquery.com/cluetip/demo/

 jQuery UI Accordion 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
 jQuery UI Sortable 1.12.1
 http://jqueryui.com

 Copyright jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(b,a,c){b instanceof String&&(b=String(b));for(var d=b.length,e=0;e<d;e++){var f=b[e];if(a.call(c,f,e,b))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,c){if(b==Array.prototype||b==Object.prototype)return b;b[a]=c.value;return b};$jscomp.getGlobal=function(b){b=["object"==typeof globalThis&&globalThis,b,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var a=0;a<b.length;++a){var c=b[a];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(b,a){var c=$jscomp.propertyToPolyfillSymbol[a];if(null==c)return b[a];c=b[c];return void 0!==c?c:b[a]};
$jscomp.polyfill=function(b,a,c,d){a&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(b,a,c,d):$jscomp.polyfillUnisolated(b,a,c,d))};$jscomp.polyfillUnisolated=function(b,a,c,d){c=$jscomp.global;b=b.split(".");for(d=0;d<b.length-1;d++){var e=b[d];e in c||(c[e]={});c=c[e]}b=b[b.length-1];d=c[b];a=a(d);a!=d&&null!=a&&$jscomp.defineProperty(c,b,{configurable:!0,writable:!0,value:a})};
$jscomp.polyfillIsolated=function(b,a,c,d){var e=b.split(".");b=1===e.length;d=e[0];d=!b&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var f=0;f<e.length-1;f++){var h=e[f];h in d||(d[h]={});d=d[h]}e=e[e.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?d[e]:null;a=a(c);null!=a&&(b?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:a}):a!==c&&($jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(e):$jscomp.POLYFILL_PREFIX+e,e=$jscomp.propertyToPolyfillSymbol[e],
$jscomp.defineProperty(d,e,{configurable:!0,writable:!0,value:a})))};$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,c){return $jscomp.findInternal(this,b,c).v}},"es6","es3");$jscomp.arrayIteratorImpl=function(b){var a=0;return function(){return a<b.length?{done:!1,value:b[a++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(b){if(b)return b;var a=function(b,a){this.$jscomp$symbol$id_=b;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:a})};a.prototype.toString=function(){return this.$jscomp$symbol$id_};var c=0,d=function(b){if(this instanceof d)throw new TypeError("Symbol is not a constructor");return new a("jscomp_symbol_"+(b||"")+"_"+c++,b)};return d},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(b){if(b)return b;b=Symbol("Symbol.iterator");for(var a="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<a.length;c++){var d=$jscomp.global[a[c]];"function"===typeof d&&"function"!=typeof d.prototype[b]&&$jscomp.defineProperty(d.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return b},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(b){b={next:b};b[Symbol.iterator]=function(){return this};return b};$jscomp.iteratorFromArray=function(b,a){b instanceof String&&(b+="");var c=0,d={next:function(){if(c<b.length){var e=c++;return{value:a(e,b[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill("Array.prototype.values",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b,c){return c})}},"es8","es3");$jscomp.polyfill("Array.prototype.keys",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):b(jQuery)})(function(b){b.ui=b.ui||{};return b.ui.version="1.12.1"});
(function(b){"function"===typeof define&&define.amd?define(["jquery","./version"],b):b(jQuery)})(function(b){return b.extend(b.expr[":"],{data:b.expr.createPseudo?b.expr.createPseudo(function(a){return function(c){return!!b.data(c,a)}}):function(a,c,d){return!!b.data(a,d[3])}})});
(function(b){"function"===typeof define&&define.amd?define(["jquery","./version"],b):b(jQuery)})(function(b){return b.fn.extend({disableSelection:function(){var b="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(b+".ui-disableSelection",function(b){b.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}})});
(function(b){"function"===typeof define&&define.amd?define(["jquery","./version"],b):b(jQuery)})(function(b){b.ui.focusable=function(a,c){var d=a.nodeName.toLowerCase();if("area"===d){c=a.parentNode;d=c.name;if(!a.href||!d||"map"!==c.nodeName.toLowerCase())return!1;a=b("img[usemap='#"+d+"']");return 0<a.length&&a.is(":visible")}/^(input|select|textarea|button|object)$/.test(d)?(c=!a.disabled)&&(d=b(a).closest("fieldset")[0])&&(c=!d.disabled):c="a"===d?a.href||c:c;if(c=c&&b(a).is(":visible")){a=b(a);
for(c=a.css("visibility");"inherit"===c;)a=a.parent(),c=a.css("visibility");c="hidden"!==c}return c};b.extend(b.expr[":"],{focusable:function(a){return b.ui.focusable(a,null!=b.attr(a,"tabindex"))}});return b.ui.focusable});(function(b){"function"===typeof define&&define.amd?define(["jquery","./version"],b):b(jQuery)})(function(b){return b.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});
(function(b){"function"===typeof define&&define.amd?define(["jquery","./version","./escape-selector"],b):b(jQuery)})(function(b){return b.fn.labels=function(){var a;if(this[0].labels&&this[0].labels.length)return this.pushStack(this[0].labels);var c=this.eq(0).parents("label");if(a=this.attr("id")){var d=this.eq(0).parents().last();d=d.add(d.length?d.siblings():this.siblings());a="label[for='"+b.ui.escapeSelector(a)+"']";c=c.add(d.find(a).addBack(a))}return this.pushStack(c)}});
(function(b){"function"===typeof define&&define.amd?define(["jquery","./version"],b):b(jQuery)})(function(b){return b.ui.plugin={add:function(a,c,d){var e;a=b.ui[a].prototype;for(e in d)a.plugins[e]=a.plugins[e]||[],a.plugins[e].push([c,d[e]])},call:function(b,c,d,e){if((c=b.plugins[c])&&(e||b.element[0].parentNode&&11!==b.element[0].parentNode.nodeType))for(e=0;e<c.length;e++)b.options[c[e][0]]&&c[e][1].apply(b.element,d)}}});
(function(b){"function"===typeof define&&define.amd?define(["jquery","./version"],b):b(jQuery)})(function(b){return b.ui.safeActiveElement=function(b){try{var a=b.activeElement}catch(d){a=b.body}a||(a=b.body);a.nodeName||(a=b.body);return a}});(function(b){"function"===typeof define&&define.amd?define(["jquery","./version"],b):b(jQuery)})(function(b){return b.ui.safeBlur=function(a){a&&"body"!==a.nodeName.toLowerCase()&&b(a).trigger("blur")}});
(function(b){"function"===typeof define&&define.amd?define(["jquery","./version"],b):b(jQuery)})(function(b){return b.fn.scrollParent=function(a){var c=this.css("position"),d="absolute"===c,e=a?/(auto|scroll|hidden)/:/(auto|scroll)/;a=this.parents().filter(function(){var a=b(this);return d&&"static"===a.css("position")?!1:e.test(a.css("overflow")+a.css("overflow-y")+a.css("overflow-x"))}).eq(0);return"fixed"!==c&&a.length?a:b(this[0].ownerDocument||document)}});
(function(b){"function"===typeof define&&define.amd?define(["jquery","./version","./focusable"],b):b(jQuery)})(function(b){return b.extend(b.expr[":"],{tabbable:function(a){var c=b.attr(a,"tabindex"),d=null!=c;return(!d||0<=c)&&b.ui.focusable(a,d)}})});
(function(b){"function"===typeof define&&define.amd?define(["jquery","./version"],b):b(jQuery)})(function(b){return b.fn.extend({uniqueId:function(){var b=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++b)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&b(this).removeAttr("id")})}})});
(function(b){"function"===typeof define&&define.amd?define(["jquery","./version"],b):b(jQuery)})(function(b){var a=0,c=Array.prototype.slice;b.cleanData=function(a){return function(e){var d,c,g;for(g=0;null!=(c=e[g]);g++)try{(d=b._data(c,"events"))&&d.remove&&b(c).triggerHandler("remove")}catch(k){}a(e)}}(b.cleanData);b.widget=function(a,e,c){var d={},g=a.split(".")[0];a=a.split(".")[1];var f=g+"-"+a;c||(c=e,e=b.Widget);b.isArray(c)&&(c=b.extend.apply(null,[{}].concat(c)));b.expr[":"][f.toLowerCase()]=
function(a){return!!b.data(a,f)};b[g]=b[g]||{};var m=b[g][a];var l=b[g][a]=function(b,a){if(!this._createWidget)return new l(b,a);arguments.length&&this._createWidget(b,a)};b.extend(l,m,{version:c.version,_proto:b.extend({},c),_childConstructors:[]});var n=new e;n.options=b.widget.extend({},n.options);b.each(c,function(a,c){b.isFunction(c)?d[a]=function(){function b(){return e.prototype[a].apply(this,arguments)}function d(b){return e.prototype[a].apply(this,b)}return function(){var a=this._super,
e=this._superApply;this._super=b;this._superApply=d;var g=c.apply(this,arguments);this._super=a;this._superApply=e;return g}}():d[a]=c});l.prototype=b.widget.extend(n,{widgetEventPrefix:m?n.widgetEventPrefix||a:a},d,{constructor:l,namespace:g,widgetName:a,widgetFullName:f});m?(b.each(m._childConstructors,function(a,e){a=e.prototype;b.widget(a.namespace+"."+a.widgetName,l,e._proto)}),delete m._childConstructors):e._childConstructors.push(l);b.widget.bridge(a,l);return l};b.widget.extend=function(a){for(var e=
c.call(arguments,1),d=0,h=e.length,g,k;d<h;d++)for(g in e[d])k=e[d][g],e[d].hasOwnProperty(g)&&void 0!==k&&(b.isPlainObject(k)?a[g]=b.isPlainObject(a[g])?b.widget.extend({},a[g],k):b.widget.extend({},k):a[g]=k);return a};b.widget.bridge=function(a,e){var d=e.prototype.widgetFullName||a;b.fn[a]=function(f){var g="string"===typeof f,k=c.call(arguments,1),h=this;g?this.length||"instance"!==f?this.each(function(){var e=b.data(this,d);if("instance"===f)return h=e,!1;if(!e)return b.error("cannot call methods on "+
a+" prior to initialization; attempted to call method '"+f+"'");if(!b.isFunction(e[f])||"_"===f.charAt(0))return b.error("no such method '"+f+"' for "+a+" widget instance");var c=e[f].apply(e,k);if(c!==e&&void 0!==c)return h=c&&c.jquery?h.pushStack(c.get()):c,!1}):h=void 0:(k.length&&(f=b.widget.extend.apply(null,[f].concat(k))),this.each(function(){var a=b.data(this,d);a?(a.option(f||{}),a._init&&a._init()):b.data(this,d,new e(f,this))}));return h}};b.Widget=function(){};b.Widget._childConstructors=
[];b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(c,e){e=b(e||this.defaultElement||this)[0];this.element=b(e);this.uuid=a++;this.eventNamespace="."+this.widgetName+this.uuid;this.bindings=b();this.hoverable=b();this.focusable=b();this.classesElementLookup={};e!==this&&(b.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(b){b.target===e&&this.destroy()}}),this.document=
b(e.style?e.ownerDocument:e.document||e),this.window=b(this.document[0].defaultView||this.document[0].parentWindow));this.options=b.widget.extend({},this.options,this._getCreateOptions(),c);this._create();this.options.disabled&&this._setOptionDisabled(this.options.disabled);this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:b.noop,_create:b.noop,_init:b.noop,destroy:function(){var a=this;this._destroy();b.each(this.classesElementLookup,
function(b,c){a._removeClass(c,b)});this.element.off(this.eventNamespace).removeData(this.widgetFullName);this.widget().off(this.eventNamespace).removeAttr("aria-disabled");this.bindings.off(this.eventNamespace)},_destroy:b.noop,widget:function(){return this.element},option:function(a,e){var c=a,d;if(0===arguments.length)return b.widget.extend({},this.options);if("string"===typeof a){c={};var g=a.split(".");a=g.shift();if(g.length){var k=c[a]=b.widget.extend({},this.options[a]);for(d=0;d<g.length-
1;d++)k[g[d]]=k[g[d]]||{},k=k[g[d]];a=g.pop();if(1===arguments.length)return void 0===k[a]?null:k[a];k[a]=e}else{if(1===arguments.length)return void 0===this.options[a]?null:this.options[a];c[a]=e}}this._setOptions(c);return this},_setOptions:function(b){for(var a in b)this._setOption(a,b[a]);return this},_setOption:function(b,a){"classes"===b&&this._setOptionClasses(a);this.options[b]=a;"disabled"===b&&this._setOptionDisabled(a);return this},_setOptionClasses:function(a){var e;for(e in a){var c=
this.classesElementLookup[e];if(a[e]!==this.options.classes[e]&&c&&c.length){var d=b(c.get());this._removeClass(c,e);d.addClass(this._classes({element:d,keys:e,classes:a,add:!0}))}}},_setOptionDisabled:function(b){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!b);b&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},
_classes:function(a){function e(e,f){var g;for(g=0;g<e.length;g++){var k=d.classesElementLookup[e[g]]||b();k=a.add?b(b.unique(k.get().concat(a.element.get()))):b(k.not(a.element).get());d.classesElementLookup[e[g]]=k;c.push(e[g]);f&&a.classes[e[g]]&&c.push(a.classes[e[g]])}}var c=[],d=this;a=b.extend({element:this.element,classes:this.options.classes||{}},a);this._on(a.element,{remove:"_untrackClassesElement"});a.keys&&e(a.keys.match(/\S+/g)||[],!0);a.extra&&e(a.extra.match(/\S+/g)||[]);return c.join(" ")},
_untrackClassesElement:function(a){var e=this;b.each(e.classesElementLookup,function(c,d){-1!==b.inArray(a.target,d)&&(e.classesElementLookup[c]=b(d.not(a.target).get()))})},_removeClass:function(b,a,c){return this._toggleClass(b,a,c,!1)},_addClass:function(b,a,c){return this._toggleClass(b,a,c,!0)},_toggleClass:function(b,a,c,h){h="boolean"===typeof h?h:c;var e="string"===typeof b||null===b;b={extra:e?a:c,keys:e?b:a,element:e?this.element:b,add:h};b.element.toggleClass(this._classes(b),h);return this},
_on:function(a,e,c){var d,g=this;"boolean"!==typeof a&&(c=e,e=a,a=!1);c?(e=d=b(e),this.bindings=this.bindings.add(e)):(c=e,e=this.element,d=this.widget());b.each(c,function(c,f){function k(){if(a||!0!==g.options.disabled&&!b(this).hasClass("ui-state-disabled"))return("string"===typeof f?g[f]:f).apply(g,arguments)}"string"!==typeof f&&(k.guid=f.guid=f.guid||k.guid||b.guid++);var h=c.match(/^([\w:-]*)\s*(.*)$/);c=h[1]+g.eventNamespace;if(h=h[2])d.on(c,h,k);else e.on(c,k)})},_off:function(a,e){e=(e||
"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.off(e).off(e);this.bindings=b(this.bindings.not(a).get());this.focusable=b(this.focusable.not(a).get());this.hoverable=b(this.hoverable.not(a).get())},_delay:function(b,a){var e=this;return setTimeout(function(){return("string"===typeof b?e[b]:b).apply(e,arguments)},a||0)},_hoverable:function(a){this.hoverable=this.hoverable.add(a);this._on(a,{mouseenter:function(a){this._addClass(b(a.currentTarget),null,"ui-state-hover")},mouseleave:function(a){this._removeClass(b(a.currentTarget),
null,"ui-state-hover")}})},_focusable:function(a){this.focusable=this.focusable.add(a);this._on(a,{focusin:function(a){this._addClass(b(a.currentTarget),null,"ui-state-focus")},focusout:function(a){this._removeClass(b(a.currentTarget),null,"ui-state-focus")}})},_trigger:function(a,e,c){var d,g=this.options[a];c=c||{};e=b.Event(e);e.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();e.target=this.element[0];if(a=e.originalEvent)for(d in a)d in e||(e[d]=a[d]);this.element.trigger(e,
c);return!(b.isFunction(g)&&!1===g.apply(this.element[0],[e].concat(c))||e.isDefaultPrevented())}};b.each({show:"fadeIn",hide:"fadeOut"},function(a,e){b.Widget.prototype["_"+a]=function(c,d,g){"string"===typeof d&&(d={effect:d});var f=d?!0===d||"number"===typeof d?e:d.effect||e:a;d=d||{};"number"===typeof d&&(d={duration:d});var h=!b.isEmptyObject(d);d.complete=g;d.delay&&c.delay(d.delay);if(h&&b.effects&&b.effects.effect[f])c[a](d);else if(f!==a&&c[f])c[f](d.duration,d.easing,g);else c.queue(function(e){b(this)[a]();
g&&g.call(c[0]);e()})}});return b.widget});
(function(b){"function"===typeof define&&define.amd?define(["jquery","./version"],b):b(jQuery)})(function(b){(function(){function a(b,a,e){return[parseFloat(b[0])*(l.test(b[0])?a/100:1),parseFloat(b[1])*(l.test(b[1])?e/100:1)]}function c(a){var e=a[0];return 9===e.nodeType?{width:a.width(),height:a.height(),offset:{top:0,left:0}}:b.isWindow(e)?{width:a.width(),height:a.height(),offset:{top:a.scrollTop(),left:a.scrollLeft()}}:e.preventDefault?{width:0,height:0,offset:{top:e.pageY,left:e.pageX}}:{width:a.outerWidth(),
height:a.outerHeight(),offset:a.offset()}}var d,e=Math.max,f=Math.abs,h=/left|center|right/,g=/top|center|bottom/,k=/[\+\-]\d+(\.[\d]+)?%?/,m=/^\w+/,l=/%$/,n=b.fn.position;b.position={scrollbarWidth:function(){if(void 0!==d)return d;var a=b("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");var e=a.children()[0];b("body").append(a);var c=e.offsetWidth;a.css("overflow","scroll");e=e.offsetWidth;c===e&&(e=a[0].clientWidth);
a.remove();return d=c-e},getScrollInfo:function(a){var e=a.isWindow||a.isDocument?"":a.element.css("overflow-x"),c=a.isWindow||a.isDocument?"":a.element.css("overflow-y");e="scroll"===e||"auto"===e&&a.width<a.element[0].scrollWidth;return{width:"scroll"===c||"auto"===c&&a.height<a.element[0].scrollHeight?b.position.scrollbarWidth():0,height:e?b.position.scrollbarWidth():0}},getWithinInfo:function(a){var e=b(a||window),c=b.isWindow(e[0]),d=!!e[0]&&9===e[0].nodeType;return{element:e,isWindow:c,isDocument:d,
offset:c||d?{left:0,top:0}:b(a).offset(),scrollLeft:e.scrollLeft(),scrollTop:e.scrollTop(),width:e.outerWidth(),height:e.outerHeight()}}};b.fn.position=function(d){if(!d||!d.of)return n.apply(this,arguments);d=b.extend({},d);var l=b(d.of),q=b.position.getWithinInfo(d.within),z=b.position.getScrollInfo(q),t=(d.collision||"flip").split(" "),v={};var r=c(l);l[0].preventDefault&&(d.at="left top");var w=r.width;var B=r.height;var A=r.offset;var y=b.extend({},A);b.each(["my","at"],function(){var b=(d[this]||
"").split(" ");1===b.length&&(b=h.test(b[0])?b.concat(["center"]):g.test(b[0])?["center"].concat(b):["center","center"]);b[0]=h.test(b[0])?b[0]:"center";b[1]=g.test(b[1])?b[1]:"center";var a=k.exec(b[0]);var e=k.exec(b[1]);v[this]=[a?a[0]:0,e?e[0]:0];d[this]=[m.exec(b[0])[0],m.exec(b[1])[0]]});1===t.length&&(t[1]=t[0]);"right"===d.at[0]?y.left+=w:"center"===d.at[0]&&(y.left+=w/2);"bottom"===d.at[1]?y.top+=B:"center"===d.at[1]&&(y.top+=B/2);var G=a(v.at,w,B);y.left+=G[0];y.top+=G[1];return this.each(function(){var c,
g=b(this),k=g.outerWidth(),h=g.outerHeight(),n=parseInt(b.css(this,"marginLeft"),10)||0,p=parseInt(b.css(this,"marginTop"),10)||0,m=k+n+(parseInt(b.css(this,"marginRight"),10)||0)+z.width,u=h+p+(parseInt(b.css(this,"marginBottom"),10)||0)+z.height,r=b.extend({},y),L=a(v.my,g.outerWidth(),g.outerHeight());"right"===d.my[0]?r.left-=k:"center"===d.my[0]&&(r.left-=k/2);"bottom"===d.my[1]?r.top-=h:"center"===d.my[1]&&(r.top-=h/2);r.left+=L[0];r.top+=L[1];var V={marginLeft:n,marginTop:p};b.each(["left",
"top"],function(a,e){if(b.ui.position[t[a]])b.ui.position[t[a]][e](r,{targetWidth:w,targetHeight:B,elemWidth:k,elemHeight:h,collisionPosition:V,collisionWidth:m,collisionHeight:u,offset:[G[0]+L[0],G[1]+L[1]],my:d.my,at:d.at,within:q,elem:g})});d.using&&(c=function(b){var a=A.left-r.left,c=a+w-k,q=A.top-r.top,n=q+B-h,p={target:{element:l,left:A.left,top:A.top,width:w,height:B},element:{element:g,left:r.left,top:r.top,width:k,height:h},horizontal:0>c?"left":0<a?"right":"center",vertical:0>n?"top":0<
q?"bottom":"middle"};w<k&&f(a+c)<w&&(p.horizontal="center");B<h&&f(q+n)<B&&(p.vertical="middle");e(f(a),f(c))>e(f(q),f(n))?p.important="horizontal":p.important="vertical";d.using.call(this,b,p)});g.offset(b.extend(r,{using:c}))})};b.ui.position={fit:{left:function(b,a){var c=a.within,d=c.isWindow?c.scrollLeft:c.offset.left,g=c.width,f=b.left-a.collisionPosition.marginLeft;c=d-f;var k=f+a.collisionWidth-g-d;a.collisionWidth>g?0<c&&0>=k?(a=b.left+c+a.collisionWidth-g-d,b.left+=c-a):b.left=0<k&&0>=c?
d:c>k?d+g-a.collisionWidth:d:b.left=0<c?b.left+c:0<k?b.left-k:e(b.left-f,b.left)},top:function(b,a){var c=a.within,d=c.isWindow?c.scrollTop:c.offset.top,g=a.within.height,f=b.top-a.collisionPosition.marginTop;c=d-f;var k=f+a.collisionHeight-g-d;a.collisionHeight>g?0<c&&0>=k?(a=b.top+c+a.collisionHeight-g-d,b.top+=c-a):b.top=0<k&&0>=c?d:c>k?d+g-a.collisionHeight:d:b.top=0<c?b.top+c:0<k?b.top-k:e(b.top-f,b.top)}},flip:{left:function(b,a){var c=a.within,e=c.offset.left+c.scrollLeft,d=c.width,g=c.isWindow?
c.scrollLeft:c.offset.left,k=b.left-a.collisionPosition.marginLeft;c=k-g;var h=k+a.collisionWidth-d-g;k="left"===a.my[0]?-a.elemWidth:"right"===a.my[0]?a.elemWidth:0;var l="left"===a.at[0]?a.targetWidth:"right"===a.at[0]?-a.targetWidth:0,n=-2*a.offset[0];if(0>c){if(a=b.left+k+l+n+a.collisionWidth-d-e,0>a||a<f(c))b.left+=k+l+n}else 0<h&&(a=b.left-a.collisionPosition.marginLeft+k+l+n-g,0<a||f(a)<h)&&(b.left+=k+l+n)},top:function(b,a){var c=a.within,e=c.offset.top+c.scrollTop,d=c.height,g=c.isWindow?
c.scrollTop:c.offset.top,k=b.top-a.collisionPosition.marginTop;c=k-g;var h=k+a.collisionHeight-d-g;k="top"===a.my[1]?-a.elemHeight:"bottom"===a.my[1]?a.elemHeight:0;var l="top"===a.at[1]?a.targetHeight:"bottom"===a.at[1]?-a.targetHeight:0,n=-2*a.offset[1];if(0>c){if(a=b.top+k+l+n+a.collisionHeight-d-e,0>a||a<f(c))b.top+=k+l+n}else 0<h&&(a=b.top-a.collisionPosition.marginTop+k+l+n-g,0<a||f(a)<h)&&(b.top+=k+l+n)}},flipfit:{left:function(){b.ui.position.flip.left.apply(this,arguments);b.ui.position.fit.left.apply(this,
arguments)},top:function(){b.ui.position.flip.top.apply(this,arguments);b.ui.position.fit.top.apply(this,arguments)}}}})();return b.ui.position});
(function(b){"function"===typeof define&&define.amd?define(["jquery","../ie","../version","../widget"],b):b(jQuery)})(function(b){var a=!1;b(document).on("mouseup",function(){a=!1});return b.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.on("mousedown."+this.widgetName,function(b){return a._mouseDown(b)}).on("click."+this.widgetName,function(c){if(!0===b.data(c.target,a.widgetName+".preventClickEvent"))return b.removeData(c.target,
a.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName);this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!a){this._mouseMoved=!1;this._mouseStarted&&this._mouseUp(c);this._mouseDownEvent=c;var d=this,e=1===c.which,f="string"===typeof this.options.cancel&&c.target.nodeName?b(c.target).closest(this.options.cancel).length:
!1;if(!e||f||!this._mouseCapture(c))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=!1!==this._mouseStart(c),!this._mouseStarted))return c.preventDefault(),!0;!0===b.data(c.target,this.widgetName+".preventClickEvent")&&b.removeData(c.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(b){return d._mouseMove(b)};
this._mouseUpDelegate=function(b){return d._mouseUp(b)};this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate);c.preventDefault();return a=!0}},_mouseMove:function(a){if(this._mouseMoved){if(b.ui.ie&&(!document.documentMode||9>document.documentMode)&&!a.button)return this._mouseUp(a);if(!a.which)if(a.originalEvent.altKey||a.originalEvent.ctrlKey||a.originalEvent.metaKey||a.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(a)}if(a.which||
a.button)this._mouseMoved=!0;if(this._mouseStarted)return this._mouseDrag(a),a.preventDefault();this._mouseDistanceMet(a)&&this._mouseDelayMet(a)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,a))?this._mouseDrag(a):this._mouseUp(a));return!this._mouseStarted},_mouseUp:function(c){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,c.target===this._mouseDownEvent.target&&
b.data(c.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(c));this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer);a=this.ignoreMissingWhich=!1;c.preventDefault()},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},
_mouseCapture:function(){return!0}})});
(function(b){"function"===typeof define&&define.amd?define("jquery ../escape-selector ../keycode ../safe-active-element ../unique-id ../version ../widget".split(" "),b):b(jQuery)})(function(b){b.widget("ui.tabs",{version:"1.12.1",delay:300,options:{active:null,classes:{"ui-tabs":"ui-corner-all","ui-tabs-nav":"ui-corner-all","ui-tabs-panel":"ui-corner-bottom","ui-tabs-tab":"ui-corner-top"},collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,
load:null},_isLocal:function(){var b=/#.*$/;return function(a){var c=a.href.replace(b,"");var e=location.href.replace(b,"");try{c=decodeURIComponent(c)}catch(f){}try{e=decodeURIComponent(e)}catch(f){}return 1<a.hash.length&&c===e}}(),_create:function(){var a=this,c=this.options;this.running=!1;this._addClass("ui-tabs","ui-widget ui-widget-content");this._toggleClass("ui-tabs-collapsible",null,c.collapsible);this._processTabs();c.active=this._initialActive();b.isArray(c.disabled)&&(c.disabled=b.unique(c.disabled.concat(b.map(this.tabs.filter(".ui-state-disabled"),
function(b){return a.tabs.index(b)}))).sort());this.active=!1!==this.options.active&&this.anchors.length?this._findActive(c.active):b();this._refresh();this.active.length&&this.load(c.active)},_initialActive:function(){var a=this.options.active,c=this.options.collapsible,d=location.hash.substring(1);null===a&&(d&&this.tabs.each(function(c,f){if(b(f).attr("aria-controls")===d)return a=c,!1}),null===a&&(a=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null===a||-1===a)&&(a=this.tabs.length?0:
!1);!1!==a&&(a=this.tabs.index(this.tabs.eq(a)),-1===a&&(a=c?!1:0));!c&&!1===a&&this.anchors.length&&(a=0);return a},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):b()}},_tabKeydown:function(a){var c=b(b.ui.safeActiveElement(this.document[0])).closest("li"),d=this.tabs.index(c),e=!0;if(!this._handlePageNav(a)){switch(a.keyCode){case b.ui.keyCode.RIGHT:case b.ui.keyCode.DOWN:d++;break;case b.ui.keyCode.UP:case b.ui.keyCode.LEFT:e=!1;
d--;break;case b.ui.keyCode.END:d=this.anchors.length-1;break;case b.ui.keyCode.HOME:d=0;break;case b.ui.keyCode.SPACE:a.preventDefault();clearTimeout(this.activating);this._activate(d);return;case b.ui.keyCode.ENTER:a.preventDefault();clearTimeout(this.activating);this._activate(d===this.options.active?!1:d);return;default:return}a.preventDefault();clearTimeout(this.activating);d=this._focusNextTab(d,e);a.ctrlKey||a.metaKey||(c.attr("aria-selected","false"),this.tabs.eq(d).attr("aria-selected","true"),
this.activating=this._delay(function(){this.option("active",d)},this.delay))}},_panelKeydown:function(a){!this._handlePageNav(a)&&a.ctrlKey&&a.keyCode===b.ui.keyCode.UP&&(a.preventDefault(),this.active.trigger("focus"))},_handlePageNav:function(a){if(a.altKey&&a.keyCode===b.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(a.altKey&&a.keyCode===b.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(a,
c){function d(){a>e&&(a=0);0>a&&(a=e);return a}for(var e=this.tabs.length-1;-1!==b.inArray(d(),this.options.disabled);)a=c?a+1:a-1;return a},_focusNextTab:function(b,c){b=this._findNextTab(b,c);this.tabs.eq(b).trigger("focus");return b},_setOption:function(b,c){"active"===b?this._activate(c):(this._super(b,c),"collapsible"===b&&(this._toggleClass("ui-tabs-collapsible",null,c),c||!1!==this.options.active||this._activate(0)),"event"===b&&this._setupEvents(c),"heightStyle"===b&&this._setupHeightStyle(c))},
_sanitizeSelector:function(b){return b?b.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var a=this.options,c=this.tablist.children(":has(a[href])");a.disabled=b.map(c.filter(".ui-state-disabled"),function(b){return c.index(b)});this._processTabs();!1!==a.active&&this.anchors.length?this.active.length&&!b.contains(this.tablist[0],this.active[0])?this.tabs.length===a.disabled.length?(a.active=!1,this.active=b()):this._activate(this._findNextTab(Math.max(0,a.active-1),!1)):
a.active=this.tabs.index(this.active):(a.active=!1,this.active=b());this._refresh()},_refresh:function(){this._setOptionDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-hidden":"true"});this.active.length?(this.active.attr({"aria-selected":"true","aria-expanded":"true",
tabIndex:0}),this._addClass(this.active,"ui-tabs-active","ui-state-active"),this._getPanelForTab(this.active).show().attr({"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var a=this,c=this.tabs,d=this.anchors,e=this.panels;this.tablist=this._getList().attr("role","tablist");this._addClass(this.tablist,"ui-tabs-nav","ui-helper-reset ui-helper-clearfix ui-widget-header");this.tablist.on("mousedown"+this.eventNamespace,"> li",function(a){b(this).is(".ui-state-disabled")&&
a.preventDefault()}).on("focus"+this.eventNamespace,".ui-tabs-anchor",function(){b(this).closest("li").is(".ui-state-disabled")&&this.blur()});this.tabs=this.tablist.find("> li:has(a[href])").attr({role:"tab",tabIndex:-1});this._addClass(this.tabs,"ui-tabs-tab","ui-state-default");this.anchors=this.tabs.map(function(){return b("a",this)[0]}).attr({role:"presentation",tabIndex:-1});this._addClass(this.anchors,"ui-tabs-anchor");this.panels=b();this.anchors.each(function(c,e){var d=b(e).uniqueId().attr("id"),
f=b(e).closest("li"),h=f.attr("aria-controls");if(a._isLocal(e)){c=e.hash;e=c.substring(1);var l=a.element.find(a._sanitizeSelector(c))}else e=f.attr("aria-controls")||b({}).uniqueId()[0].id,l=a.element.find("#"+e),l.length||(l=a._createPanel(e),l.insertAfter(a.panels[c-1]||a.tablist)),l.attr("aria-live","polite");l.length&&(a.panels=a.panels.add(l));h&&f.data("ui-tabs-aria-controls",h);f.attr({"aria-controls":e,"aria-labelledby":d});l.attr("aria-labelledby",d)});this.panels.attr("role","tabpanel");
this._addClass(this.panels,"ui-tabs-panel","ui-widget-content");c&&(this._off(c.not(this.tabs)),this._off(d.not(this.anchors)),this._off(e.not(this.panels)))},_getList:function(){return this.tablist||this.element.find("ol, ul").eq(0)},_createPanel:function(a){return b("<div>").attr("id",a).data("ui-tabs-destroy",!0)},_setOptionDisabled:function(a){var c,d;b.isArray(a)&&(a.length?a.length===this.anchors.length&&(a=!0):a=!1);for(d=0;c=this.tabs[d];d++)c=b(c),!0===a||-1!==b.inArray(d,a)?(c.attr("aria-disabled",
"true"),this._addClass(c,null,"ui-state-disabled")):(c.removeAttr("aria-disabled"),this._removeClass(c,null,"ui-state-disabled"));this.options.disabled=a;this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!0===a)},_setupEvents:function(a){var c={};a&&b.each(a.split(" "),function(b,a){c[a]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(!0,this.anchors,{click:function(b){b.preventDefault()}});this._on(this.anchors,c);this._on(this.tabs,{keydown:"_tabKeydown"});
this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(a){var c=this.element.parent();if("fill"===a){var d=c.height();d-=this.element.outerHeight()-this.element.height();this.element.siblings(":visible").each(function(){var a=b(this),c=a.css("position");"absolute"!==c&&"fixed"!==c&&(d-=a.outerHeight(!0))});this.element.children().not(this.panels).each(function(){d-=b(this).outerHeight(!0)});this.panels.each(function(){b(this).height(Math.max(0,
d-b(this).innerHeight()+b(this).height()))}).css("overflow","auto")}else"auto"===a&&(d=0,this.panels.each(function(){d=Math.max(d,b(this).height("").height())}).height(d))},_eventHandler:function(a){var c=this.options,d=this.active,e=b(a.currentTarget).closest("li"),f=e[0]===d[0],h=f&&c.collapsible,g=h?b():this._getPanelForTab(e),k=d.length?this._getPanelForTab(d):b();d={oldTab:d,oldPanel:k,newTab:h?b():e,newPanel:g};a.preventDefault();e.hasClass("ui-state-disabled")||e.hasClass("ui-tabs-loading")||
this.running||f&&!c.collapsible||!1===this._trigger("beforeActivate",a,d)||(c.active=h?!1:this.tabs.index(e),this.active=f?b():e,this.xhr&&this.xhr.abort(),k.length||g.length||b.error("jQuery UI Tabs: Mismatching fragment identifier."),g.length&&this.load(this.tabs.index(e),a),this._toggle(a,d))},_toggle:function(a,c){function d(){f.running=!1;f._trigger("activate",a,c)}function e(){f._addClass(c.newTab.closest("li"),"ui-tabs-active","ui-state-active");h.length&&f.options.show?f._show(h,f.options.show,
d):(h.show(),d())}var f=this,h=c.newPanel,g=c.oldPanel;this.running=!0;g.length&&this.options.hide?this._hide(g,this.options.hide,function(){f._removeClass(c.oldTab.closest("li"),"ui-tabs-active","ui-state-active");e()}):(this._removeClass(c.oldTab.closest("li"),"ui-tabs-active","ui-state-active"),g.hide(),e());g.attr("aria-hidden","true");c.oldTab.attr({"aria-selected":"false","aria-expanded":"false"});h.length&&g.length?c.oldTab.attr("tabIndex",-1):h.length&&this.tabs.filter(function(){return 0===
b(this).attr("tabIndex")}).attr("tabIndex",-1);h.attr("aria-hidden","false");c.newTab.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_activate:function(a){a=this._findActive(a);a[0]!==this.active[0]&&(a.length||(a=this.active),a=a.find(".ui-tabs-anchor")[0],this._eventHandler({target:a,currentTarget:a,preventDefault:b.noop}))},_findActive:function(a){return!1===a?b():this.tabs.eq(a)},_getIndex:function(a){"string"===typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+
b.ui.escapeSelector(a)+"']")));return a},_destroy:function(){this.xhr&&this.xhr.abort();this.tablist.removeAttr("role").off(this.eventNamespace);this.anchors.removeAttr("role tabIndex").removeUniqueId();this.tabs.add(this.panels).each(function(){b.data(this,"ui-tabs-destroy")?b(this).remove():b(this).removeAttr("role tabIndex aria-live aria-busy aria-selected aria-labelledby aria-hidden aria-expanded")});this.tabs.each(function(){var a=b(this),c=a.data("ui-tabs-aria-controls");c?a.attr("aria-controls",
c).removeData("ui-tabs-aria-controls"):a.removeAttr("aria-controls")});this.panels.show();"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(a){var c=this.options.disabled;!1!==c&&(void 0===a?c=!1:(a=this._getIndex(a),c=b.isArray(c)?b.map(c,function(b){return b!==a?b:null}):b.map(this.tabs,function(b,c){return c!==a?c:null})),this._setOptionDisabled(c))},disable:function(a){var c=this.options.disabled;if(!0!==c){if(void 0===a)c=!0;else{a=this._getIndex(a);if(-1!==
b.inArray(a,c))return;c=b.isArray(c)?b.merge([a],c).sort():[a]}this._setOptionDisabled(c)}},load:function(a,c){a=this._getIndex(a);var d=this,e=this.tabs.eq(a);a=e.find(".ui-tabs-anchor");var f=this._getPanelForTab(e),h={tab:e,panel:f},g=function(b,a){"abort"===a&&d.panels.stop(!1,!0);d._removeClass(e,"ui-tabs-loading");f.removeAttr("aria-busy");b===d.xhr&&delete d.xhr};this._isLocal(a[0])||(this.xhr=b.ajax(this._ajaxSettings(a,c,h)))&&"canceled"!==this.xhr.statusText&&(this._addClass(e,"ui-tabs-loading"),
f.attr("aria-busy","true"),this.xhr.done(function(b,a,e){setTimeout(function(){f.html(b);d._trigger("load",c,h);g(e,a)},1)}).fail(function(b,a){setTimeout(function(){g(b,a)},1)}))},_ajaxSettings:function(a,c,d){var e=this;return{url:a.attr("href").replace(/#.*$/,""),beforeSend:function(a,h){return e._trigger("beforeLoad",c,b.extend({jqXHR:a,ajaxSettings:h},d))}}},_getPanelForTab:function(a){a=b(a).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+a))}});!1!==b.uiBackCompat&&
b.widget("ui.tabs",b.ui.tabs,{_processTabs:function(){this._superApply(arguments);this._addClass(this.tabs,"ui-tab")}});return b.ui.tabs});
(function(b){"function"===typeof define&&define.amd?define(["jquery","../version","../keycode"],b):b(jQuery)})(function(b){function a(b){for(var a;b.length&&b[0]!==document;){a=b.css("position");if("absolute"===a||"relative"===a||"fixed"===a)if(a=parseInt(b.css("zIndex"),10),!isNaN(a)&&0!==a)return a;b=b.parent()}return 0}function c(){this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";
this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January February March April May June July August September October November December".split(" "),
monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,
navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};b.extend(this._defaults,
this.regional[""]);this.regional.en=b.extend(!0,{},this.regional[""]);this.regional["en-US"]=b.extend(!0,{},this.regional.en);this.dpDiv=d(b("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function d(a){return a.on("mouseout","button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a",function(){b(this).removeClass("ui-state-hover");-1!==this.className.indexOf("ui-datepicker-prev")&&b(this).removeClass("ui-datepicker-prev-hover");
-1!==this.className.indexOf("ui-datepicker-next")&&b(this).removeClass("ui-datepicker-next-hover")}).on("mouseover","button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a",e)}function e(){b.datepicker._isDisabledDatepicker(h.inline?h.dpDiv.parent()[0]:h.input[0])||(b(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),b(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&b(this).addClass("ui-datepicker-prev-hover"),
-1!==this.className.indexOf("ui-datepicker-next")&&b(this).addClass("ui-datepicker-next-hover"))}function f(a,c){b.extend(a,c);for(var e in c)null==c[e]&&(a[e]=c[e]);return a}b.extend(b.ui,{datepicker:{version:"1.12.1"}});var h;b.extend(c.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(b){f(this._defaults,b||{});return this},_attachDatepicker:function(a,c){var e=a.nodeName.toLowerCase();var d="div"===e||"span"===e;a.id||(this.uuid+=
1,a.id="dp"+this.uuid);var g=this._newInst(b(a),d);g.settings=b.extend({},c||{});"input"===e?this._connectDatepicker(a,g):d&&this._inlineDatepicker(a,g)},_newInst:function(a,c){return{id:a[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:c?d(b("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(a,c){var e=
b(a);c.append=b([]);c.trigger=b([]);e.hasClass(this.markerClassName)||(this._attachments(e,c),e.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(c),b.data(a,"datepicker",c),c.settings.disabled&&this._disableDatepicker(a))},_attachments:function(a,c){var e=this._get(c,"appendText");var d=this._get(c,"isRTL");c.append&&c.append.remove();e&&(c.append=b("<span class='"+this._appendClass+"'>"+e+"</span>"),a[d?"before":
"after"](c.append));a.off("focus",this._showDatepicker);c.trigger&&c.trigger.remove();e=this._get(c,"showOn");if("focus"===e||"both"===e)a.on("focus",this._showDatepicker);if("button"===e||"both"===e){e=this._get(c,"buttonText");var g=this._get(c,"buttonImage");c.trigger=b(this._get(c,"buttonImageOnly")?b("<img/>").addClass(this._triggerClass).attr({src:g,alt:e,title:e}):b("<button type='button'></button>").addClass(this._triggerClass).html(g?b("<img/>").attr({src:g,alt:e,title:e}):e));a[d?"before":
"after"](c.trigger);c.trigger.on("click",function(){b.datepicker._datepickerShowing&&b.datepicker._lastInput===a[0]?b.datepicker._hideDatepicker():(b.datepicker._datepickerShowing&&b.datepicker._lastInput!==a[0]&&b.datepicker._hideDatepicker(),b.datepicker._showDatepicker(a[0]));return!1})}},_autoSize:function(b){if(this._get(b,"autoSize")&&!b.inline){var a,c,e,d=new Date(2009,11,20),g=this._get(b,"dateFormat");if(g.match(/[DM]/)){var f=function(b){for(e=c=a=0;e<b.length;e++)b[e].length>a&&(a=b[e].length,
c=e);return c};d.setMonth(f(this._get(b,g.match(/MM/)?"monthNames":"monthNamesShort")));d.setDate(f(this._get(b,g.match(/DD/)?"dayNames":"dayNamesShort"))+20-d.getDay())}b.input.attr("size",this._formatDate(b,d).length)}},_inlineDatepicker:function(a,c){var e=b(a);e.hasClass(this.markerClassName)||(e.addClass(this.markerClassName).append(c.dpDiv),b.data(a,"datepicker",c),this._setDate(c,this._getDefaultDate(c),!0),this._updateDatepicker(c),this._updateAlternate(c),c.settings.disabled&&this._disableDatepicker(a),
c.dpDiv.css("display","block"))},_dialogDatepicker:function(a,c,e,d,h){a=this._dialogInst;a||(this.uuid+=1,a="dp"+this.uuid,this._dialogInput=b("<input type='text' id='"+a+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),b("body").append(this._dialogInput),a=this._dialogInst=this._newInst(this._dialogInput,!1),a.settings={},b.data(this._dialogInput[0],"datepicker",a));f(a.settings,d||{});c=c&&c.constructor===Date?this._formatDate(a,c):c;this._dialogInput.val(c);
this._pos=h?h.length?h:[h.pageX,h.pageY]:null;if(!this._pos){c=document.documentElement.clientWidth;d=document.documentElement.clientHeight;h=document.documentElement.scrollLeft||document.body.scrollLeft;var g=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[c/2-100+h,d/2-150+g]}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");a.settings.onSelect=e;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);
b.blockUI&&b.blockUI(this.dpDiv);b.data(this._dialogInput[0],"datepicker",a);return this},_destroyDatepicker:function(a){var c=b(a),e=b.data(a,"datepicker");if(c.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();b.removeData(a,"datepicker");"input"===d?(e.append.remove(),e.trigger.remove(),c.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==d&&"span"!==d||c.removeClass(this.markerClassName).empty();
h===e&&(h=null)}},_enableDatepicker:function(a){var c=b(a),e=b.data(a,"datepicker");if(c.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();if("input"===d)a.disabled=!1,e.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"===d||"span"===d)d=c.children("."+this._inlineClass),d.children().removeClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1);this._disabledInputs=
b.map(this._disabledInputs,function(b){return b===a?null:b})}},_disableDatepicker:function(a){var c=b(a),e=b.data(a,"datepicker");if(c.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();if("input"===d)a.disabled=!0,e.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"===d||"span"===d)d=c.children("."+this._inlineClass),d.children().addClass("ui-state-disabled"),d.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
!0);this._disabledInputs=b.map(this._disabledInputs,function(b){return b===a?null:b});this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(b){if(!b)return!1;for(var a=0;a<this._disabledInputs.length;a++)if(this._disabledInputs[a]===b)return!0;return!1},_getInst:function(a){try{return b.data(a,"datepicker")}catch(k){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(a,c,e){var d=this._getInst(a);if(2===arguments.length&&"string"===typeof c)return"defaults"===
c?b.extend({},b.datepicker._defaults):d?"all"===c?b.extend({},d.settings):this._get(d,c):null;var g=c||{};"string"===typeof c&&(g={},g[c]=e);if(d){this._curInst===d&&this._hideDatepicker();var k=this._getDateDatepicker(a,!0);var h=this._getMinMaxDate(d,"min");var m=this._getMinMaxDate(d,"max");f(d.settings,g);null!==h&&void 0!==g.dateFormat&&void 0===g.minDate&&(d.settings.minDate=this._formatDate(d,h));null!==m&&void 0!==g.dateFormat&&void 0===g.maxDate&&(d.settings.maxDate=this._formatDate(d,m));
"disabled"in g&&(g.disabled?this._disableDatepicker(a):this._enableDatepicker(a));this._attachments(b(a),d);this._autoSize(d);this._setDate(d,k);this._updateAlternate(d);this._updateDatepicker(d)}},_changeDatepicker:function(b,a,c){this._optionDatepicker(b,a,c)},_refreshDatepicker:function(b){(b=this._getInst(b))&&this._updateDatepicker(b)},_setDateDatepicker:function(b,a){if(b=this._getInst(b))this._setDate(b,a),this._updateDatepicker(b),this._updateAlternate(b)},_getDateDatepicker:function(b,a){(b=
this._getInst(b))&&!b.inline&&this._setDateFromField(b,a);return b?this._getDate(b):null},_doKeyDown:function(a){var c=b.datepicker._getInst(a.target);var e=!0;var d=c.dpDiv.is(".ui-datepicker-rtl");c._keyEvent=!0;if(b.datepicker._datepickerShowing)switch(a.keyCode){case 9:b.datepicker._hideDatepicker();e=!1;break;case 13:return e=b("td."+b.datepicker._dayOverClass+":not(."+b.datepicker._currentClass+")",c.dpDiv),e[0]&&b.datepicker._selectDay(a.target,c.selectedMonth,c.selectedYear,e[0]),(a=b.datepicker._get(c,
"onSelect"))?(e=b.datepicker._formatDate(c),a.apply(c.input?c.input[0]:null,[e,c])):b.datepicker._hideDatepicker(),!1;case 27:b.datepicker._hideDatepicker();break;case 33:b.datepicker._adjustDate(a.target,a.ctrlKey?-b.datepicker._get(c,"stepBigMonths"):-b.datepicker._get(c,"stepMonths"),"M");break;case 34:b.datepicker._adjustDate(a.target,a.ctrlKey?+b.datepicker._get(c,"stepBigMonths"):+b.datepicker._get(c,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&b.datepicker._clearDate(a.target);
e=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&b.datepicker._gotoToday(a.target);e=a.ctrlKey||a.metaKey;break;case 37:(a.ctrlKey||a.metaKey)&&b.datepicker._adjustDate(a.target,d?1:-1,"D");e=a.ctrlKey||a.metaKey;a.originalEvent.altKey&&b.datepicker._adjustDate(a.target,a.ctrlKey?-b.datepicker._get(c,"stepBigMonths"):-b.datepicker._get(c,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&b.datepicker._adjustDate(a.target,-7,"D");e=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&
b.datepicker._adjustDate(a.target,d?-1:1,"D");e=a.ctrlKey||a.metaKey;a.originalEvent.altKey&&b.datepicker._adjustDate(a.target,a.ctrlKey?+b.datepicker._get(c,"stepBigMonths"):+b.datepicker._get(c,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&b.datepicker._adjustDate(a.target,7,"D");e=a.ctrlKey||a.metaKey;break;default:e=!1}else 36===a.keyCode&&a.ctrlKey?b.datepicker._showDatepicker(this):e=!1;e&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var c=b.datepicker._getInst(a.target);
if(b.datepicker._get(c,"constrainInput")){c=b.datepicker._possibleChars(b.datepicker._get(c,"dateFormat"));var e=String.fromCharCode(null==a.charCode?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||" ">e||!c||-1<c.indexOf(e)}},_doKeyUp:function(a){var c;a=b.datepicker._getInst(a.target);if(a.input.val()!==a.lastVal)try{if(c=b.datepicker.parseDate(b.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,b.datepicker._getFormatConfig(a)))b.datepicker._setDateFromField(a),b.datepicker._updateAlternate(a),
b.datepicker._updateDatepicker(a)}catch(m){}return!0},_showDatepicker:function(c){c=c.target||c;"input"!==c.nodeName.toLowerCase()&&(c=b("input",c.parentNode)[0]);if(!b.datepicker._isDisabledDatepicker(c)&&b.datepicker._lastInput!==c){var e=b.datepicker._getInst(c);b.datepicker._curInst&&b.datepicker._curInst!==e&&(b.datepicker._curInst.dpDiv.stop(!0,!0),e&&b.datepicker._datepickerShowing&&b.datepicker._hideDatepicker(b.datepicker._curInst.input[0]));var d=(d=b.datepicker._get(e,"beforeShow"))?d.apply(c,
[c,e]):{};if(!1!==d){f(e.settings,d);e.lastVal=null;b.datepicker._lastInput=c;b.datepicker._setDateFromField(e);b.datepicker._inDialog&&(c.value="");b.datepicker._pos||(b.datepicker._pos=b.datepicker._findPos(c),b.datepicker._pos[1]+=c.offsetHeight);var g=!1;b(c).parents().each(function(){g|="fixed"===b(this).css("position");return!g});d={left:b.datepicker._pos[0],top:b.datepicker._pos[1]};b.datepicker._pos=null;e.dpDiv.empty();e.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});b.datepicker._updateDatepicker(e);
d=b.datepicker._checkOffset(e,d,g);e.dpDiv.css({position:b.datepicker._inDialog&&b.blockUI?"static":g?"fixed":"absolute",display:"none",left:d.left+"px",top:d.top+"px"});if(!e.inline){d=b.datepicker._get(e,"showAnim");var h=b.datepicker._get(e,"duration");e.dpDiv.css("z-index",a(b(c))+1);b.datepicker._datepickerShowing=!0;if(b.effects&&b.effects.effect[d])e.dpDiv.show(d,b.datepicker._get(e,"showOptions"),h);else e.dpDiv[d||"show"](d?h:null);b.datepicker._shouldFocusInput(e)&&e.input.trigger("focus");
b.datepicker._curInst=e}}}},_updateDatepicker:function(a){this.maxRows=4;h=a;a.dpDiv.empty().append(this._generateHTML(a));this._attachHandlers(a);var c=this._getNumberOfMonths(a),d=c[1],f=a.dpDiv.find("."+this._dayOverClass+" a");0<f.length&&e.apply(f.get(0));a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");1<d&&a.dpDiv.addClass("ui-datepicker-multi-"+d).css("width",17*d+"em");a.dpDiv[(1!==c[0]||1!==c[1]?"add":"remove")+"Class"]("ui-datepicker-multi");
a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");a===b.datepicker._curInst&&b.datepicker._datepickerShowing&&b.datepicker._shouldFocusInput(a)&&a.input.trigger("focus");if(a.yearshtml){var g=a.yearshtml;setTimeout(function(){g===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml);g=a.yearshtml=null},0)}},_shouldFocusInput:function(a){return a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&!a.input.is(":focus")},_checkOffset:function(a,
c,e){var d=a.dpDiv.outerWidth(),f=a.dpDiv.outerHeight(),g=a.input?a.input.outerWidth():0,h=a.input?a.input.outerHeight():0,k=document.documentElement.clientWidth+(e?0:b(document).scrollLeft()),m=document.documentElement.clientHeight+(e?0:b(document).scrollTop());c.left-=this._get(a,"isRTL")?d-g:0;c.left-=e&&c.left===a.input.offset().left?b(document).scrollLeft():0;c.top-=e&&c.top===a.input.offset().top+h?b(document).scrollTop():0;c.left-=Math.min(c.left,c.left+d>k&&k>d?Math.abs(c.left+d-k):0);c.top-=
Math.min(c.top,c.top+f>m&&m>f?Math.abs(f+h):0);return c},_findPos:function(a){var c=this._getInst(a);for(c=this._get(c,"isRTL");a&&("hidden"===a.type||1!==a.nodeType||b.expr.filters.hidden(a));)a=a[c?"previousSibling":"nextSibling"];a=b(a).offset();return[a.left,a.top]},_hideDatepicker:function(a){var c=this._curInst;if(c&&(!a||c===b.data(a,"datepicker"))&&this._datepickerShowing){a=this._get(c,"showAnim");var e=this._get(c,"duration");var d=function(){b.datepicker._tidyDialog(c)};if(b.effects&&(b.effects.effect[a]||
b.effects[a]))c.dpDiv.hide(a,b.datepicker._get(c,"showOptions"),e,d);else c.dpDiv["slideDown"===a?"slideUp":"fadeIn"===a?"fadeOut":"hide"](a?e:null,d);a||d();this._datepickerShowing=!1;(a=this._get(c,"onClose"))&&a.apply(c.input?c.input[0]:null,[c.input?c.input.val():"",c]);this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),b.blockUI&&(b.unblockUI(),b("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},
_checkExternalClick:function(a){if(b.datepicker._curInst){a=b(a.target);var c=b.datepicker._getInst(a[0]);(!(a[0].id===b.datepicker._mainDivId||0!==a.parents("#"+b.datepicker._mainDivId).length||a.hasClass(b.datepicker.markerClassName)||a.closest("."+b.datepicker._triggerClass).length||!b.datepicker._datepickerShowing||b.datepicker._inDialog&&b.blockUI)||a.hasClass(b.datepicker.markerClassName)&&b.datepicker._curInst!==c)&&b.datepicker._hideDatepicker()}},_adjustDate:function(a,c,e){a=b(a);var d=
this._getInst(a[0]);this._isDisabledDatepicker(a[0])||(this._adjustInstDate(d,c+("M"===e?this._get(d,"showCurrentAtPos"):0),e),this._updateDatepicker(d))},_gotoToday:function(a){var c=b(a),e=this._getInst(c[0]);this._get(e,"gotoCurrent")&&e.currentDay?(e.selectedDay=e.currentDay,e.drawMonth=e.selectedMonth=e.currentMonth,e.drawYear=e.selectedYear=e.currentYear):(a=new Date,e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear());this._notifyChange(e);
this._adjustDate(c)},_selectMonthYear:function(a,c,e){a=b(a);var d=this._getInst(a[0]);d["selected"+("M"===e?"Month":"Year")]=d["draw"+("M"===e?"Month":"Year")]=parseInt(c.options[c.selectedIndex].value,10);this._notifyChange(d);this._adjustDate(a)},_selectDay:function(a,c,e,d){var f=b(a);b(d).hasClass(this._unselectableClass)||this._isDisabledDatepicker(f[0])||(f=this._getInst(f[0]),f.selectedDay=f.currentDay=b("a",d).html(),f.selectedMonth=f.currentMonth=c,f.selectedYear=f.currentYear=e,this._selectDate(a,
this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},_clearDate:function(a){a=b(a);this._selectDate(a,"")},_selectDate:function(a,c){a=b(a);var e=this._getInst(a[0]);c=null!=c?c:this._formatDate(e);e.input&&e.input.val(c);this._updateAlternate(e);(a=this._get(e,"onSelect"))?a.apply(e.input?e.input[0]:null,[c,e]):e.input&&e.input.trigger("change");e.inline?this._updateDatepicker(e):(this._hideDatepicker(),this._lastInput=e.input[0],"object"!==typeof e.input[0]&&e.input.trigger("focus"),
this._lastInput=null)},_updateAlternate:function(a){var c=this._get(a,"altField");if(c){var e=this._get(a,"altFormat")||this._get(a,"dateFormat");var d=this._getDate(a);a=this.formatDate(e,d,this._getFormatConfig(a));b(c).val(a)}},noWeekends:function(a){a=a.getDay();return[0<a&&6>a,""]},iso8601Week:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));a=b.getTime();b.setMonth(0);b.setDate(1);return Math.floor(Math.round((a-b)/864E5)/7)+1},parseDate:function(a,c,e){if(null==
a||null==c)throw"Invalid arguments";c="object"===typeof c?c.toString():c+"";if(""===c)return null;var d,f=0;var g=(e?e.shortYearCutoff:null)||this._defaults.shortYearCutoff;g="string"!==typeof g?g:(new Date).getFullYear()%100+parseInt(g,10);var h=(e?e.dayNamesShort:null)||this._defaults.dayNamesShort;var k=(e?e.dayNames:null)||this._defaults.dayNames,m=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,t=(e?e.monthNames:null)||this._defaults.monthNames,v=e=-1,r=-1,w=-1,B=!1,A=function(b){(b=
d+1<a.length&&a.charAt(d+1)===b)&&d++;return b},y=function(a){var b=A(a);b="@"===a?14:"!"===a?20:"y"===a&&b?4:"o"===a?3:2;a=new RegExp("^\\d{"+("y"===a?b:1)+","+b+"}");a=c.substring(f).match(a);if(!a)throw"Missing number at position "+f;f+=a[0].length;return parseInt(a[0],10)},G=function(a,e,d){var g=-1;a=b.map(A(a)?d:e,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});b.each(a,function(a,b){a=b[1];if(c.substr(f,a.length).toLowerCase()===a.toLowerCase())return g=
b[0],f+=a.length,!1});if(-1!==g)return g+1;throw"Unknown name at position "+f;},H=function(){if(c.charAt(f)!==a.charAt(d))throw"Unexpected literal at position "+f;f++};for(d=0;d<a.length;d++)if(B)"'"!==a.charAt(d)||A("'")?H():B=!1;else switch(a.charAt(d)){case "d":r=y("d");break;case "D":G("D",h,k);break;case "o":w=y("o");break;case "m":v=y("m");break;case "M":v=G("M",m,t);break;case "y":e=y("y");break;case "@":var C=new Date(y("@"));e=C.getFullYear();v=C.getMonth()+1;r=C.getDate();break;case "!":C=
new Date((y("!")-this._ticksTo1970)/1E4);e=C.getFullYear();v=C.getMonth()+1;r=C.getDate();break;case "'":A("'")?H():B=!0;break;default:H()}if(f<c.length&&(h=c.substr(f),!/^\s+/.test(h)))throw"Extra/unparsed characters found in date: "+h;-1===e?e=(new Date).getFullYear():100>e&&(e+=(new Date).getFullYear()-(new Date).getFullYear()%100+(e<=g?0:-100));if(-1<w){v=1;r=w;do{g=this._getDaysInMonth(e,v-1);if(r<=g)break;v++;r-=g}while(1)}C=this._daylightSavingAdjust(new Date(e,v-1,r));if(C.getFullYear()!==
e||C.getMonth()+1!==v||C.getDate()!==r)throw"Invalid date";return C},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:62135596800*1E7,formatDate:function(a,b,c){if(!b)return"";var e,d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort;
c=(c?c.monthNames:null)||this._defaults.monthNames;var h=function(b){(b=e+1<a.length&&a.charAt(e+1)===b)&&e++;return b},k=function(a,b,c){b=""+b;if(h(a))for(;b.length<c;)b="0"+b;return b},m=function(a,b,c,e){return h(a)?e[b]:c[b]},v="",r=!1;if(b)for(e=0;e<a.length;e++)if(r)"'"!==a.charAt(e)||h("'")?v+=a.charAt(e):r=!1;else switch(a.charAt(e)){case "d":v+=k("d",b.getDate(),2);break;case "D":v+=m("D",b.getDay(),d,f);break;case "o":v+=k("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-
(new Date(b.getFullYear(),0,0)).getTime())/864E5),3);break;case "m":v+=k("m",b.getMonth()+1,2);break;case "M":v+=m("M",b.getMonth(),g,c);break;case "y":v+=h("y")?b.getFullYear():(10>b.getFullYear()%100?"0":"")+b.getFullYear()%100;break;case "@":v+=b.getTime();break;case "!":v+=1E4*b.getTime()+this._ticksTo1970;break;case "'":h("'")?v+="'":r=!0;break;default:v+=a.charAt(e)}return v},_possibleChars:function(a){var b,c="",e=!1,d=function(c){(c=b+1<a.length&&a.charAt(b+1)===c)&&b++;return c};for(b=0;b<
a.length;b++)if(e)"'"!==a.charAt(b)||d("'")?c+=a.charAt(b):e=!1;else switch(a.charAt(b)){case "d":case "m":case "y":case "@":c+="0123456789";break;case "D":case "M":return null;case "'":d("'")?c+="'":e=!0;break;default:c+=a.charAt(b)}return c},_get:function(a,b){return void 0!==a.settings[b]?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!==a.lastVal){var c=this._get(a,"dateFormat"),e=a.lastVal=a.input?a.input.val():null,d=this._getDefaultDate(a),f=d,g=this._getFormatConfig(a);
try{f=this.parseDate(c,e,g)||d}catch(u){e=b?"":e}a.selectedDay=f.getDate();a.drawMonth=a.selectedMonth=f.getMonth();a.drawYear=a.selectedYear=f.getFullYear();a.currentDay=e?f.getDate():0;a.currentMonth=e?f.getMonth():0;a.currentYear=e?f.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,c,e){var d=function(a){var b=new Date;b.setDate(b.getDate()+a);return b},f=function(c){try{return b.datepicker.parseDate(b.datepicker._get(a,
"dateFormat"),c,b.datepicker._getFormatConfig(a))}catch(r){}var e=(c.toLowerCase().match(/^c/)?b.datepicker._getDate(a):null)||new Date,d=e.getFullYear(),f=e.getMonth();e=e.getDate();for(var g=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,h=g.exec(c);h;){switch(h[2]||"d"){case "d":case "D":e+=parseInt(h[1],10);break;case "w":case "W":e+=7*parseInt(h[1],10);break;case "m":case "M":f+=parseInt(h[1],10);e=Math.min(e,b.datepicker._getDaysInMonth(d,f));break;case "y":case "Y":d+=parseInt(h[1],10),e=Math.min(e,
b.datepicker._getDaysInMonth(d,f))}h=g.exec(c)}return new Date(d,f,e)};if(c=(c=null==c||""===c?e:"string"===typeof c?f(c):"number"===typeof c?isNaN(c)?e:d(c):new Date(c.getTime()))&&"Invalid Date"===c.toString()?e:c)c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0);return this._daylightSavingAdjust(c)},_daylightSavingAdjust:function(a){if(!a)return null;a.setHours(12<a.getHours()?a.getHours()+2:0);return a},_setDate:function(a,b,c){var e=!b,d=a.selectedMonth,f=a.selectedYear;b=this._restrictMinMax(a,
this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();d===a.selectedMonth&&f===a.selectedYear||c||this._notifyChange(a);this._adjustInstDate(a);a.input&&a.input.val(e?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&""===a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_attachHandlers:function(a){var c=
this._get(a,"stepMonths"),e="#"+a.id.replace(/\\\\/g,"\\");a.dpDiv.find("[data-handler]").map(function(){b(this).on(this.getAttribute("data-event"),{prev:function(){b.datepicker._adjustDate(e,-c,"M")},next:function(){b.datepicker._adjustDate(e,+c,"M")},hide:function(){b.datepicker._hideDatepicker()},today:function(){b.datepicker._gotoToday(e)},selectDay:function(){b.datepicker._selectDay(e,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this);return!1},selectMonth:function(){b.datepicker._selectMonthYear(e,
this,"M");return!1},selectYear:function(){b.datepicker._selectMonthYear(e,this,"Y");return!1}}[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b,c,e,d,f=new Date;f=this._daylightSavingAdjust(new Date(f.getFullYear(),f.getMonth(),f.getDate()));var g=this._get(a,"isRTL");var h=this._get(a,"showButtonPanel");var z=this._get(a,"hideIfNoPrevNext");var t=this._get(a,"navigationAsDateFormat");var v=this._getNumberOfMonths(a),r=this._get(a,"showCurrentAtPos");var w=this._get(a,"stepMonths");
var B=1!==v[0]||1!==v[1],A=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),y=this._getMinMaxDate(a,"min"),G=this._getMinMaxDate(a,"max");r=a.drawMonth-r;var H=a.drawYear;0>r&&(r+=12,H--);if(G){var C=this._daylightSavingAdjust(new Date(G.getFullYear(),G.getMonth()-v[0]*v[1]+1,G.getDate()));for(C=y&&C<y?y:C;this._daylightSavingAdjust(new Date(H,r,1))>C;)r--,0>r&&(r=11,H--)}a.drawMonth=r;a.drawYear=H;C=this._get(a,"prevText");C=t?this.formatDate(C,
this._daylightSavingAdjust(new Date(H,r-w,1)),this._getFormatConfig(a)):C;C=this._canAdjustMonth(a,-1,H,r)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+C+"'><span class='ui-icon ui-icon-circle-triangle-"+(g?"e":"w")+"'>"+C+"</span></a>":z?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+C+"'><span class='ui-icon ui-icon-circle-triangle-"+(g?"e":"w")+"'>"+C+"</span></a>";var U=this._get(a,"nextText");U=t?this.formatDate(U,this._daylightSavingAdjust(new Date(H,
r+w,1)),this._getFormatConfig(a)):U;z=this._canAdjustMonth(a,1,H,r)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+U+"'><span class='ui-icon ui-icon-circle-triangle-"+(g?"w":"e")+"'>"+U+"</span></a>":z?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+U+"'><span class='ui-icon ui-icon-circle-triangle-"+(g?"w":"e")+"'>"+U+"</span></a>";w=this._get(a,"currentText");U=this._get(a,"gotoCurrent")&&a.currentDay?A:f;w=t?this.formatDate(w,
U,this._getFormatConfig(a)):w;t=a.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(a,"closeText")+"</button>";h=h?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(g?t:"")+(this._isInRange(a,U)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+w+"</button>":"")+(g?"":t)+"</div>":
"";t=parseInt(this._get(a,"firstDay"),10);t=isNaN(t)?0:t;w=this._get(a,"showWeek");U=this._get(a,"dayNames");var x=this._get(a,"dayNamesMin");var Y=this._get(a,"monthNames");var aa=this._get(a,"monthNamesShort");var fa=this._get(a,"beforeShowDay");var N=this._get(a,"showOtherMonths");var ba=this._get(a,"selectOtherMonths");var L=this._getDefaultDate(a);var V="";for(b=0;b<v[0];b++){var W="";this.maxRows=4;for(c=0;c<v[1];c++){var R=this._daylightSavingAdjust(new Date(H,r,a.selectedDay));var D=" ui-corner-all";
var K="";if(B){K+="<div class='ui-datepicker-group";if(1<v[1])switch(c){case 0:K+=" ui-datepicker-group-first";D=" ui-corner-"+(g?"right":"left");break;case v[1]-1:K+=" ui-datepicker-group-last";D=" ui-corner-"+(g?"left":"right");break;default:K+=" ui-datepicker-group-middle",D=""}K+="'>"}K+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+D+"'>"+(/all|left/.test(D)&&0===b?g?z:C:"")+(/all|right/.test(D)&&0===b?g?C:z:"")+this._generateMonthYearHeader(a,r,H,y,G,0<b||0<c,Y,aa)+
"</div><table class='ui-datepicker-calendar'><thead><tr>";var F=w?"<th class='ui-datepicker-week-col'>"+this._get(a,"weekHeader")+"</th>":"";for(D=0;7>D;D++){var E=(D+t)%7;F+="<th scope='col'"+(5<=(D+t+6)%7?" class='ui-datepicker-week-end'":"")+"><span title='"+U[E]+"'>"+x[E]+"</span></th>"}K+=F+"</tr></thead><tbody>";F=this._getDaysInMonth(H,r);H===a.selectedYear&&r===a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,F));D=(this._getFirstDayOfMonth(H,r)-t+7)%7;F=Math.ceil((D+F)/7);this.maxRows=
F=B?this.maxRows>F?this.maxRows:F:F;E=this._daylightSavingAdjust(new Date(H,r,1-D));for(e=0;e<F;e++){K+="<tr>";var O=w?"<td class='ui-datepicker-week-col'>"+this._get(a,"calculateWeek")(E)+"</td>":"";for(D=0;7>D;D++){var S=fa?fa.apply(a.input?a.input[0]:null,[E]):[!0,""];var X=(d=E.getMonth()!==r)&&!ba||!S[0]||y&&E<y||G&&E>G;O+="<td class='"+(5<=(D+t+6)%7?" ui-datepicker-week-end":"")+(d?" ui-datepicker-other-month":"")+(E.getTime()===R.getTime()&&r===a.selectedMonth&&a._keyEvent||L.getTime()===E.getTime()&&
L.getTime()===R.getTime()?" "+this._dayOverClass:"")+(X?" "+this._unselectableClass+" ui-state-disabled":"")+(d&&!N?"":" "+S[1]+(E.getTime()===A.getTime()?" "+this._currentClass:"")+(E.getTime()===f.getTime()?" ui-datepicker-today":""))+"'"+(d&&!N||!S[2]?"":" title='"+S[2].replace(/'/g,"&#39;")+"'")+(X?"":" data-handler='selectDay' data-event='click' data-month='"+E.getMonth()+"' data-year='"+E.getFullYear()+"'")+">"+(d&&!N?"&#xa0;":X?"<span class='ui-state-default'>"+E.getDate()+"</span>":"<a class='ui-state-default"+
(E.getTime()===f.getTime()?" ui-state-highlight":"")+(E.getTime()===A.getTime()?" ui-state-active":"")+(d?" ui-priority-secondary":"")+"' href='#'>"+E.getDate()+"</a>")+"</td>";E.setDate(E.getDate()+1);E=this._daylightSavingAdjust(E)}K+=O+"</tr>"}r++;11<r&&(r=0,H++);K+="</tbody></table>"+(B?"</div>"+(0<v[0]&&c===v[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"");W+=K}V+=W}a._keyEvent=!1;return V+h},_generateMonthYearHeader:function(a,b,c,e,d,f,h,u){var g,l=this._get(a,"changeMonth"),k=this._get(a,
"changeYear"),q=this._get(a,"showMonthAfterYear"),n="<div class='ui-datepicker-title'>",p="";if(f||!l)p+="<span class='ui-datepicker-month'>"+h[b]+"</span>";else{h=e&&e.getFullYear()===c;var m=d&&d.getFullYear()===c;p+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(g=0;12>g;g++)(!h||g>=e.getMonth())&&(!m||g<=d.getMonth())&&(p+="<option value='"+g+"'"+(g===b?" selected='selected'":"")+">"+u[g]+"</option>");p+="</select>"}q||(n+=p+(!f&&l&&k?"":"&#xa0;"));if(!a.yearshtml)if(a.yearshtml=
"",f||!k)n+="<span class='ui-datepicker-year'>"+c+"</span>";else{u=this._get(a,"yearRange").split(":");var y=(new Date).getFullYear();h=function(a){a=a.match(/c[+\-].*/)?c+parseInt(a.substring(1),10):a.match(/[+\-].*/)?y+parseInt(a,10):parseInt(a,10);return isNaN(a)?y:a};b=h(u[0]);u=Math.max(b,h(u[1]||""));b=e?Math.max(b,e.getFullYear()):b;u=d?Math.min(u,d.getFullYear()):u;for(a.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";b<=u;b++)a.yearshtml+="<option value='"+
b+"'"+(b===c?" selected='selected'":"")+">"+b+"</option>";a.yearshtml+="</select>";n+=a.yearshtml;a.yearshtml=null}n+=this._get(a,"yearSuffix");q&&(n+=(!f&&l&&k?"":"&#xa0;")+p);return n+"</div>"},_adjustInstDate:function(a,b,c){var e=a.selectedYear+("Y"===c?b:0),d=a.selectedMonth+("M"===c?b:0);b=Math.min(a.selectedDay,this._getDaysInMonth(e,d))+("D"===c?b:0);e=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(e,d,b)));a.selectedDay=e.getDate();a.drawMonth=a.selectedMonth=e.getMonth();a.drawYear=
a.selectedYear=e.getFullYear();"M"!==c&&"Y"!==c||this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min");a=this._getMinMaxDate(a,"max");b=c&&b<c?c:b;return a&&b>a?a:b},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,"numberOfMonths");return null==a?[1,1]:"number"===typeof a?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,
this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,e){var d=this._getNumberOfMonths(a);c=this._daylightSavingAdjust(new Date(c,e+(0>b?b:d[0]*d[1]),1));0>b&&c.setDate(this._getDaysInMonth(c.getFullYear(),c.getMonth()));return this._isInRange(a,c)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),e=this._getMinMaxDate(a,
"max"),d=null,f=null;if(a=this._get(a,"yearRange")){a=a.split(":");var g=(new Date).getFullYear();d=parseInt(a[0],10);f=parseInt(a[1],10);a[0].match(/[+\-].*/)&&(d+=g);a[1].match(/[+\-].*/)&&(f+=g)}return(!c||b.getTime()>=c.getTime())&&(!e||b.getTime()<=e.getTime())&&(!d||b.getFullYear()>=d)&&(!f||b.getFullYear()<=f)},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");b="string"!==typeof b?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,
"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,e){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);b=b?"object"===typeof b?b:this._daylightSavingAdjust(new Date(e,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});b.fn.datepicker=
function(a){if(!this.length)return this;b.datepicker.initialized||(b(document).on("mousedown",b.datepicker._checkExternalClick),b.datepicker.initialized=!0);0===b("#"+b.datepicker._mainDivId).length&&b("body").append(b.datepicker.dpDiv);var c=Array.prototype.slice.call(arguments,1);return"string"===typeof a&&("isDisabled"===a||"getDate"===a||"widget"===a)||"option"===a&&2===arguments.length&&"string"===typeof arguments[1]?b.datepicker["_"+a+"Datepicker"].apply(b.datepicker,[this[0]].concat(c)):this.each(function(){"string"===
typeof a?b.datepicker["_"+a+"Datepicker"].apply(b.datepicker,[this].concat(c)):b.datepicker._attachDatepicker(this,a)})};b.datepicker=new c;b.datepicker.initialized=!1;b.datepicker.uuid=(new Date).getTime();b.datepicker.version="1.12.1";return b.datepicker});
(function(b){"function"===typeof define&&define.amd?define("jquery ../keycode ../position ../safe-active-element ../unique-id ../version ../widget".split(" "),b):b(jQuery)})(function(b){return b.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=!1;this.element.uniqueId().attr({role:this.options.role,
tabIndex:0});this._addClass("ui-menu","ui-widget ui-widget-content");this._on({"mousedown .ui-menu-item":function(a){a.preventDefault()},"click .ui-menu-item":function(a){var c=b(a.target),d=b(b.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&c.not(".ui-state-disabled").length&&(this.select(a),a.isPropagationStopped()||(this.mouseHandled=!0),c.has(".ui-menu").length?this.expand(a):!this.element.is(":focus")&&d.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&
1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(a){if(!this.previousFilter){var c=b(a.target).closest(".ui-menu-item"),d=b(a.currentTarget);c[0]===d[0]&&(this._removeClass(d.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(a,d))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var c=this.active||this.element.find(this.options.items).eq(0);b||this.focus(a,c)},blur:function(a){this._delay(function(){b.contains(this.element[0],
b.ui.safeActiveElement(this.document[0]))||this.collapseAll(a)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(a){this._closeOnDocumentClick(a)&&this.collapseAll(a);this.mouseHandled=!1}})},_destroy:function(){var a=this.element.find(".ui-menu-item").removeAttr("role aria-disabled").children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show();
a.children().each(function(){var a=b(this);a.data("ui-menu-submenu-caret")&&a.remove()})},_keydown:function(a){var c=!0;switch(a.keyCode){case b.ui.keyCode.PAGE_UP:this.previousPage(a);break;case b.ui.keyCode.PAGE_DOWN:this.nextPage(a);break;case b.ui.keyCode.HOME:this._move("first","first",a);break;case b.ui.keyCode.END:this._move("last","last",a);break;case b.ui.keyCode.UP:this.previous(a);break;case b.ui.keyCode.DOWN:this.next(a);break;case b.ui.keyCode.LEFT:this.collapse(a);break;case b.ui.keyCode.RIGHT:this.active&&
!this.active.is(".ui-state-disabled")&&this.expand(a);break;case b.ui.keyCode.ENTER:case b.ui.keyCode.SPACE:this._activate(a);break;case b.ui.keyCode.ESCAPE:this.collapse(a);break;default:c=!1;var d=this.previousFilter||"";var e=!1;var f=96<=a.keyCode&&105>=a.keyCode?(a.keyCode-96).toString():String.fromCharCode(a.keyCode);clearTimeout(this.filterTimer);f===d?e=!0:f=d+f;d=this._filterMenuItems(f);d=e&&-1!==d.index(this.active.next())?this.active.nextAll(".ui-menu-item"):d;d.length||(f=String.fromCharCode(a.keyCode),
d=this._filterMenuItems(f));d.length?(this.focus(a,d),this.previousFilter=f,this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)):delete this.previousFilter}c&&a.preventDefault()},_activate:function(a){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(a):this.select(a))},refresh:function(){var a=this,c=this.options.icons.submenu;var d=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,
!!this.element.find(".ui-icon").length);var e=d.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=b(this),d=e.prev(),f=b("<span>").data("ui-menu-submenu-caret",!0);a._addClass(f,"ui-menu-icon","ui-icon "+c);d.attr("aria-haspopup","true").prepend(f);e.attr("aria-labelledby",d.attr("id"))});this._addClass(e,"ui-menu","ui-widget ui-widget-content ui-front");e=d.add(this.element).find(this.options.items);e.not(".ui-menu-item").each(function(){var c=
b(this);a._isDivider(c)&&a._addClass(c,"ui-menu-divider","ui-widget-content")});d=e.not(".ui-menu-item, .ui-menu-divider");var f=d.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()});this._addClass(d,"ui-menu-item")._addClass(f,"ui-menu-item-wrapper");e.filter(".ui-state-disabled").attr("aria-disabled","true");this.active&&!b.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(a,
b){if("icons"===a){var c=this.element.find(".ui-menu-icon");this._removeClass(c,null,this.options.icons.submenu)._addClass(c,null,b.submenu)}this._super(a,b)},_setOptionDisabled:function(a){this._super(a);this.element.attr("aria-disabled",String(a));this._toggleClass(null,"ui-state-disabled",!!a)},focus:function(a,b){this.blur(a,a&&"focus"===a.type);this._scrollIntoView(b);this.active=b.first();var c=this.active.children(".ui-menu-item-wrapper");this._addClass(c,null,"ui-state-active");this.options.role&&
this.element.attr("aria-activedescendant",c.attr("id"));c=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper");this._addClass(c,null,"ui-state-active");a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay);c=b.children(".ui-menu");c.length&&a&&/^mouse/.test(a.type)&&this._startOpening(c);this.activeMenu=b.parent();this._trigger("focus",a,{item:b})},_scrollIntoView:function(a){if(this._hasScroll()){var c=parseFloat(b.css(this.activeMenu[0],
"borderTopWidth"))||0;var d=parseFloat(b.css(this.activeMenu[0],"paddingTop"))||0;c=a.offset().top-this.activeMenu.offset().top-c-d;d=this.activeMenu.scrollTop();var e=this.activeMenu.height();a=a.outerHeight();0>c?this.activeMenu.scrollTop(d+c):c+a>e&&this.activeMenu.scrollTop(d+c-e+a)}},blur:function(a,b){b||clearTimeout(this.timer);this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",a,{item:this.active}),this.active=null)},
_startOpening:function(a){clearTimeout(this.timer);"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close();this._open(a)},this.delay))},_open:function(a){var c=b.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(a.parents(".ui-menu")).hide().attr("aria-hidden","true");a.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(a,c){clearTimeout(this.timer);this.timer=this._delay(function(){var d=
c?this.element:b(a&&a.target).closest(this.element.find(".ui-menu"));d.length||(d=this.element);this._close(d);this.blur(a);this._removeClass(d.find(".ui-state-active"),null,"ui-state-active");this.activeMenu=d},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element);a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(a){return!b(a.target).closest(".ui-menu").length},_isDivider:function(a){return!/[^\-\u2014\u2013\s]/.test(a.text())},
collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},
isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,d){var c;this.active&&(c="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+"All"](".ui-menu-item").eq(0));c&&c.length&&this.active||(c=this.activeMenu.find(this.options.items)[b]());this.focus(d,c)},nextPage:function(a){var c;if(!this.active)this.next(a);else if(!this.isLastItem())if(this._hasScroll()){var d=this.active.offset().top;var e=
this.element.height();this.active.nextAll(".ui-menu-item").each(function(){c=b(this);return 0>c.offset().top-d-e});this.focus(a,c)}else this.focus(a,this.activeMenu.find(this.options.items)[this.active?"last":"first"]())},previousPage:function(a){var c;if(!this.active)this.next(a);else if(!this.isFirstItem())if(this._hasScroll()){var d=this.active.offset().top;var e=this.element.height();this.active.prevAll(".ui-menu-item").each(function(){c=b(this);return 0<c.offset().top-d+e});this.focus(a,c)}else this.focus(a,
this.activeMenu.find(this.options.items).first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(a){this.active=this.active||b(a.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(a,!0);this._trigger("select",a,c)},_filterMenuItems:function(a){a=a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");var c=new RegExp("^"+a,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return c.test(b.trim(b(this).children(".ui-menu-item-wrapper").text()))})}})});
(function(b){"function"===typeof define&&define.amd?define("jquery ./mouse ../data ../plugin ../safe-active-element ../safe-blur ../scroll-parent ../version ../widget".split(" "),b):b(jQuery)})(function(b){b.widget("ui.draggable",b.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,
scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative();this.options.addClasses&&this._addClass("ui-draggable");this._setHandleClassName();this._mouseInit()},_setOption:function(a,b){this._super(a,b);"handle"===a&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?
this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(a){var c=this.options;if(this.helper||c.disabled||0<b(a.target).closest(".ui-resizable-handle").length)return!1;this.handle=this._getHandle(a);if(!this.handle)return!1;this._blurActiveElement(a);this._blockFrames(!0===c.iframeFix?"iframe":c.iframeFix);return!0},_blockFrames:function(a){this.iframeBlocks=this.document.find(a).map(function(){var a=b(this);return b("<div>").css("position","absolute").appendTo(a.parent()).outerWidth(a.outerWidth()).outerHeight(a.outerHeight()).offset(a.offset())[0]})},
_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(a){var c=b.ui.safeActiveElement(this.document[0]);b(a.target).closest(c).length||b.ui.safeBlur(c)},_mouseStart:function(a){var c=this.options;this.helper=this._createHelper(a);this._addClass(this.helper,"ui-draggable-dragging");this._cacheHelperProportions();b.ui.ddmanager&&(b.ui.ddmanager.current=this);this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=
this.helper.scrollParent(!0);this.offsetParent=this.helper.offsetParent();this.hasFixedAncestor=0<this.helper.parents().filter(function(){return"fixed"===b(this).css("position")}).length;this.positionAbs=this.element.offset();this._refreshOffsets(a);this.originalPosition=this.position=this._generatePosition(a,!1);this.originalPageX=a.pageX;this.originalPageY=a.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);this._setContainment();if(!1===this._trigger("start",a))return this._clear(),!1;
this._cacheHelperProportions();b.ui.ddmanager&&!c.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,a);this._mouseDrag(a,!0);b.ui.ddmanager&&b.ui.ddmanager.dragStart(this,a);return!0},_refreshOffsets:function(a){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()};this.offset.click={left:a.pageX-this.offset.left,top:a.pageY-this.offset.top}},_mouseDrag:function(a,c){this.hasFixedAncestor&&
(this.offset.parent=this._getParentOffset());this.position=this._generatePosition(a,!0);this.positionAbs=this._convertPositionTo("absolute");if(!c){c=this._uiHash();if(!1===this._trigger("drag",a,c))return this._mouseUp(new b.Event("mouseup",a)),!1;this.position=c.position}this.helper[0].style.left=this.position.left+"px";this.helper[0].style.top=this.position.top+"px";b.ui.ddmanager&&b.ui.ddmanager.drag(this,a);return!1},_mouseStop:function(a){var c=this,d=!1;b.ui.ddmanager&&!this.options.dropBehaviour&&
(d=b.ui.ddmanager.drop(this,a));this.dropped&&(d=this.dropped,this.dropped=!1);"invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||!0===this.options.revert||b.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?b(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==c._trigger("stop",a)&&c._clear()}):!1!==this._trigger("stop",a)&&this._clear();return!1},_mouseUp:function(a){this._unblockFrames();b.ui.ddmanager&&
b.ui.ddmanager.dragStop(this,a);this.handleElement.is(a.target)&&this.element.trigger("focus");return b.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp(new b.Event("mouseup",{target:this.element[0]})):this._clear();return this},_getHandle:function(a){return this.options.handle?!!b(a.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):
this.element;this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(a){var c=this.options,d=b.isFunction(c.helper);a=d?b(c.helper.apply(this.element[0],[a])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;a.parents("body").length||a.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo);d&&a[0]===this.element[0]&&this._setPositionRelative();
a[0]===this.element[0]||/(fixed|absolute)/.test(a.css("position"))||a.css("position","absolute");return a},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(a){"string"===typeof a&&(a=a.split(" "));b.isArray(a)&&(a={left:+a[0],top:+a[1]||0});"left"in a&&(this.offset.click.left=a.left+this.margins.left);"right"in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left);
"top"in a&&(this.offset.click.top=a.top+this.margins.top);"bottom"in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_isRootNode:function(a){return/(html|body)/i.test(a.tagName)||a===this.document[0]},_getParentOffset:function(){var a=this.offsetParent.offset(),c=this.document[0];"absolute"===this.cssPosition&&this.scrollParent[0]!==c&&b.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());
this._isRootNode(this.offsetParent[0])&&(a={top:0,left:0});return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var a=this.element.position(),b=this._isRootNode(this.scrollParent[0]);return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+(b?0:this.scrollParent.scrollTop()),left:a.left-(parseInt(this.helper.css("left"),
10)||0)+(b?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a;var c=this.options;var d=this.document[0];this.relativeContainer=
null;if(c.containment)if("window"===c.containment)this.containment=[b(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,b(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,b(window).scrollLeft()+b(window).width()-this.helperProportions.width-this.margins.left,b(window).scrollTop()+(b(window).height()||d.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];else if("document"===c.containment)this.containment=[0,0,b(d).width()-this.helperProportions.width-
this.margins.left,(b(d).height()||d.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];else if(c.containment.constructor===Array)this.containment=c.containment;else{if("parent"===c.containment&&(c.containment=this.helper[0].parentNode),d=b(c.containment),a=d[0])c=/(scroll|auto)/.test(d.css("overflow")),this.containment=[(parseInt(d.css("borderLeftWidth"),10)||0)+(parseInt(d.css("paddingLeft"),10)||0),(parseInt(d.css("borderTopWidth"),10)||0)+(parseInt(d.css("paddingTop"),
10)||0),(c?Math.max(a.scrollWidth,a.offsetWidth):a.offsetWidth)-(parseInt(d.css("borderRightWidth"),10)||0)-(parseInt(d.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(c?Math.max(a.scrollHeight,a.offsetHeight):a.offsetHeight)-(parseInt(d.css("borderBottomWidth"),10)||0)-(parseInt(d.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=d}else this.containment=null},_convertPositionTo:function(a,
b){b||(b=this.position);a="absolute"===a?1:-1;var c=this._isRootNode(this.scrollParent[0]);return{top:b.top+this.offset.relative.top*a+this.offset.parent.top*a-("fixed"===this.cssPosition?-this.offset.scroll.top:c?0:this.offset.scroll.top)*a,left:b.left+this.offset.relative.left*a+this.offset.parent.left*a-("fixed"===this.cssPosition?-this.offset.scroll.left:c?0:this.offset.scroll.left)*a}},_generatePosition:function(a,b){var c=this.options,e=this._isRootNode(this.scrollParent[0]);var f=a.pageX;var h=
a.pageY;e&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()});if(b){if(this.containment){if(this.relativeContainer){var g=this.relativeContainer.offset();g=[this.containment[0]+g.left,this.containment[1]+g.top,this.containment[2]+g.left,this.containment[3]+g.top]}else g=this.containment;a.pageX-this.offset.click.left<g[0]&&(f=g[0]+this.offset.click.left);a.pageY-this.offset.click.top<g[1]&&(h=g[1]+this.offset.click.top);a.pageX-this.offset.click.left>
g[2]&&(f=g[2]+this.offset.click.left);a.pageY-this.offset.click.top>g[3]&&(h=g[3]+this.offset.click.top)}c.grid&&(h=c.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY,h=g?h-this.offset.click.top>=g[1]||h-this.offset.click.top>g[3]?h:h-this.offset.click.top>=g[1]?h-c.grid[1]:h+c.grid[1]:h,f=c.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX,f=g?f-this.offset.click.left>=g[0]||f-this.offset.click.left>
g[2]?f:f-this.offset.click.left>=g[0]?f-c.grid[0]:f+c.grid[0]:f);"y"===c.axis&&(f=this.originalPageX);"x"===c.axis&&(h=this.originalPageY)}return{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:e?0:this.offset.scroll.top),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:e?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,
"ui-draggable-dragging");this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1;this.destroyOnClear&&this.destroy()},_trigger:function(a,c,d){d=d||this._uiHash();b.ui.plugin.call(this,a,[c,d,this],!0);/^(drag|start|stop)/.test(a)&&(this.positionAbs=this._convertPositionTo("absolute"),d.offset=this.positionAbs);return b.Widget.prototype._trigger.call(this,a,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,
originalPosition:this.originalPosition,offset:this.positionAbs}}});b.ui.plugin.add("draggable","connectToSortable",{start:function(a,c,d){var e=b.extend({},c,{item:d.element});d.sortables=[];b(d.options.connectToSortable).each(function(){var c=b(this).sortable("instance");c&&!c.options.disabled&&(d.sortables.push(c),c.refreshPositions(),c._trigger("activate",a,e))})},stop:function(a,c,d){var e=b.extend({},c,{item:d.element});d.cancelHelperRemoval=!1;b.each(d.sortables,function(){this.isOver?(this.isOver=
0,d.cancelHelperRemoval=!0,this.cancelHelperRemoval=!1,this._storedCSS={position:this.placeholder.css("position"),top:this.placeholder.css("top"),left:this.placeholder.css("left")},this._mouseStop(a),this.options.helper=this.options._helper):(this.cancelHelperRemoval=!0,this._trigger("deactivate",a,e))})},drag:function(a,c,d){b.each(d.sortables,function(){var e=!1,f=this;f.positionAbs=d.positionAbs;f.helperProportions=d.helperProportions;f.offset.click=d.offset.click;f._intersectsWith(f.containerCache)&&
(e=!0,b.each(d.sortables,function(){this.positionAbs=d.positionAbs;this.helperProportions=d.helperProportions;this.offset.click=d.offset.click;this!==f&&this._intersectsWith(this.containerCache)&&b.contains(f.element[0],this.element[0])&&(e=!1);return e}));e?(f.isOver||(f.isOver=1,d._parent=c.helper.parent(),f.currentItem=c.helper.appendTo(f.element).data("ui-sortable-item",!0),f.options._helper=f.options.helper,f.options.helper=function(){return c.helper[0]},a.target=f.currentItem[0],f._mouseCapture(a,
!0),f._mouseStart(a,!0,!0),f.offset.click.top=d.offset.click.top,f.offset.click.left=d.offset.click.left,f.offset.parent.left-=d.offset.parent.left-f.offset.parent.left,f.offset.parent.top-=d.offset.parent.top-f.offset.parent.top,d._trigger("toSortable",a),d.dropped=f.element,b.each(d.sortables,function(){this.refreshPositions()}),d.currentItem=d.element,f.fromOutside=d),f.currentItem&&(f._mouseDrag(a),c.position=f.position)):f.isOver&&(f.isOver=0,f.cancelHelperRemoval=!0,f.options._revert=f.options.revert,
f.options.revert=!1,f._trigger("out",a,f._uiHash(f)),f._mouseStop(a,!0),f.options.revert=f.options._revert,f.options.helper=f.options._helper,f.placeholder&&f.placeholder.remove(),c.helper.appendTo(d._parent),d._refreshOffsets(a),c.position=d._generatePosition(a,!0),d._trigger("fromSortable",a),d.dropped=!1,b.each(d.sortables,function(){this.refreshPositions()}))})}});b.ui.plugin.add("draggable","cursor",{start:function(a,c,d){a=b("body");d=d.options;a.css("cursor")&&(d._cursor=a.css("cursor"));a.css("cursor",
d.cursor)},stop:function(a,c,d){a=d.options;a._cursor&&b("body").css("cursor",a._cursor)}});b.ui.plugin.add("draggable","opacity",{start:function(a,c,d){a=b(c.helper);d=d.options;a.css("opacity")&&(d._opacity=a.css("opacity"));a.css("opacity",d.opacity)},stop:function(a,c,d){a=d.options;a._opacity&&b(c.helper).css("opacity",a._opacity)}});b.ui.plugin.add("draggable","scroll",{start:function(a,b,d){d.scrollParentNotHidden||(d.scrollParentNotHidden=d.helper.scrollParent(!1));d.scrollParentNotHidden[0]!==
d.document[0]&&"HTML"!==d.scrollParentNotHidden[0].tagName&&(d.overflowOffset=d.scrollParentNotHidden.offset())},drag:function(a,c,d){c=d.options;var e=!1,f=d.scrollParentNotHidden[0],h=d.document[0];f!==h&&"HTML"!==f.tagName?(c.axis&&"x"===c.axis||(d.overflowOffset.top+f.offsetHeight-a.pageY<c.scrollSensitivity?f.scrollTop=e=f.scrollTop+c.scrollSpeed:a.pageY-d.overflowOffset.top<c.scrollSensitivity&&(f.scrollTop=e=f.scrollTop-c.scrollSpeed)),c.axis&&"y"===c.axis||(d.overflowOffset.left+f.offsetWidth-
a.pageX<c.scrollSensitivity?f.scrollLeft=e=f.scrollLeft+c.scrollSpeed:a.pageX-d.overflowOffset.left<c.scrollSensitivity&&(f.scrollLeft=e=f.scrollLeft-c.scrollSpeed))):(c.axis&&"x"===c.axis||(a.pageY-b(h).scrollTop()<c.scrollSensitivity?e=b(h).scrollTop(b(h).scrollTop()-c.scrollSpeed):b(window).height()-(a.pageY-b(h).scrollTop())<c.scrollSensitivity&&(e=b(h).scrollTop(b(h).scrollTop()+c.scrollSpeed))),c.axis&&"y"===c.axis||(a.pageX-b(h).scrollLeft()<c.scrollSensitivity?e=b(h).scrollLeft(b(h).scrollLeft()-
c.scrollSpeed):b(window).width()-(a.pageX-b(h).scrollLeft())<c.scrollSensitivity&&(e=b(h).scrollLeft(b(h).scrollLeft()+c.scrollSpeed))));!1!==e&&b.ui.ddmanager&&!c.dropBehaviour&&b.ui.ddmanager.prepareOffsets(d,a)}});b.ui.plugin.add("draggable","snap",{start:function(a,c,d){a=d.options;d.snapElements=[];b(a.snap.constructor!==String?a.snap.items||":data(ui-draggable)":a.snap).each(function(){var a=b(this),c=a.offset();this!==d.element[0]&&d.snapElements.push({item:this,width:a.outerWidth(),height:a.outerHeight(),
top:c.top,left:c.left})})},drag:function(a,c,d){var e,f=d.options,h=f.snapTolerance,g=c.offset.left,k=g+d.helperProportions.width,m=c.offset.top,l=m+d.helperProportions.height;for(e=d.snapElements.length-1;0<=e;e--){var n=d.snapElements[e].left-d.margins.left;var q=n+d.snapElements[e].width;var p=d.snapElements[e].top-d.margins.top;var u=p+d.snapElements[e].height;if(k<n-h||g>q+h||l<p-h||m>u+h||!b.contains(d.snapElements[e].item.ownerDocument,d.snapElements[e].item))d.snapElements[e].snapping&&d.options.snap.release&&
d.options.snap.release.call(d.element,a,b.extend(d._uiHash(),{snapItem:d.snapElements[e].item})),d.snapElements[e].snapping=!1;else{if("inner"!==f.snapMode){var z=Math.abs(p-l)<=h;var t=Math.abs(u-m)<=h;var v=Math.abs(n-k)<=h;var r=Math.abs(q-g)<=h;z&&(c.position.top=d._convertPositionTo("relative",{top:p-d.helperProportions.height,left:0}).top);t&&(c.position.top=d._convertPositionTo("relative",{top:u,left:0}).top);v&&(c.position.left=d._convertPositionTo("relative",{top:0,left:n-d.helperProportions.width}).left);
r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:q}).left)}var w=z||t||v||r;"outer"!==f.snapMode&&(z=Math.abs(p-m)<=h,t=Math.abs(u-l)<=h,v=Math.abs(n-g)<=h,r=Math.abs(q-k)<=h,z&&(c.position.top=d._convertPositionTo("relative",{top:p,left:0}).top),t&&(c.position.top=d._convertPositionTo("relative",{top:u-d.helperProportions.height,left:0}).top),v&&(c.position.left=d._convertPositionTo("relative",{top:0,left:n}).left),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:q-
d.helperProportions.width}).left));!d.snapElements[e].snapping&&(z||t||v||r||w)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,a,b.extend(d._uiHash(),{snapItem:d.snapElements[e].item}));d.snapElements[e].snapping=z||t||v||r||w}}}});b.ui.plugin.add("draggable","stack",{start:function(a,c,d){a=b.makeArray(b(d.options.stack)).sort(function(a,c){return(parseInt(b(a).css("zIndex"),10)||0)-(parseInt(b(c).css("zIndex"),10)||0)});if(a.length){var e=parseInt(b(a[0]).css("zIndex"),10)||0;b(a).each(function(a){b(this).css("zIndex",
e+a)});this.css("zIndex",e+a.length)}}});b.ui.plugin.add("draggable","zIndex",{start:function(a,c,d){a=b(c.helper);d=d.options;a.css("zIndex")&&(d._zIndex=a.css("zIndex"));a.css("zIndex",d.zIndex)},stop:function(a,c,d){a=d.options;a._zIndex&&b(c.helper).css("zIndex",a._zIndex)}});return b.ui.draggable});
(function(b){"function"===typeof define&&define.amd?define(["jquery","./draggable","./mouse","../version","../widget"],b):b(jQuery)})(function(b){b.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var a,d=this.options,e=d.accept;this.isover=!1;this.isout=!0;this.accept=b.isFunction(e)?e:function(a){return a.is(e)};this.proportions=
function(){if(arguments.length)a=arguments[0];else return a?a:a={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}};this._addToManager(d.scope);d.addClasses&&this._addClass("ui-droppable")},_addToManager:function(a){b.ui.ddmanager.droppables[a]=b.ui.ddmanager.droppables[a]||[];b.ui.ddmanager.droppables[a].push(this)},_splice:function(a){for(var b=0;b<a.length;b++)a[b]===this&&a.splice(b,1)},_destroy:function(){this._splice(b.ui.ddmanager.droppables[this.options.scope])},_setOption:function(a,
d){"accept"===a?this.accept=b.isFunction(d)?d:function(a){return a.is(d)}:"scope"===a&&(this._splice(b.ui.ddmanager.droppables[this.options.scope]),this._addToManager(d));this._super(a,d)},_activate:function(a){var c=b.ui.ddmanager.current;this._addActiveClass();c&&this._trigger("activate",a,this.ui(c))},_deactivate:function(a){var c=b.ui.ddmanager.current;this._removeActiveClass();c&&this._trigger("deactivate",a,this.ui(c))},_over:function(a){var c=b.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==
this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this._addHoverClass(),this._trigger("over",a,this.ui(c)))},_out:function(a){var c=b.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this._removeHoverClass(),this._trigger("out",a,this.ui(c)))},_drop:function(c,d){var e=d||b.ui.ddmanager.current,f=!1;if(!e||(e.currentItem||e.element)[0]===this.element[0])return!1;this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var d=
b(this).droppable("instance");if(d.options.greedy&&!d.options.disabled&&d.options.scope===e.options.scope&&d.accept.call(d.element[0],e.currentItem||e.element)&&a(e,b.extend(d,{offset:d.element.offset()}),d.options.tolerance,c))return f=!0,!1});return f?!1:this.accept.call(this.element[0],e.currentItem||e.element)?(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",c,this.ui(e)),this.element):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,
offset:a.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var a=b.ui.intersect=function(){return function(a,b,e,f){if(!b.offset)return!1;var c=(a.positionAbs||a.position.absolute).left+a.margins.left,d=(a.positionAbs||a.position.absolute).top+a.margins.top,k=c+a.helperProportions.width,
m=d+a.helperProportions.height,l=b.offset.left,n=b.offset.top,q=l+b.proportions().width,p=n+b.proportions().height;switch(e){case "fit":return l<=c&&k<=q&&n<=d&&m<=p;case "intersect":return l<c+a.helperProportions.width/2&&k-a.helperProportions.width/2<q&&n<d+a.helperProportions.height/2&&m-a.helperProportions.height/2<p;case "pointer":a=f.pageY;e=b.proportions().height;if(n=a>=n&&a<n+e)f=f.pageX,b=b.proportions().width,n=f>=l&&f<l+b;return n;case "touch":return(d>=n&&d<=p||m>=n&&m<=p||d<n&&m>p)&&
(c>=l&&c<=q||k>=l&&k<=q||c<l&&k>q);default:return!1}}}();b.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(a,d){var c,f=b.ui.ddmanager.droppables[a.options.scope]||[],h=d?d.type:null,g=(a.currentItem||a.element).find(":data(ui-droppable)").addBack();var k=0;a:for(;k<f.length;k++)if(!(f[k].options.disabled||a&&!f[k].accept.call(f[k].element[0],a.currentItem||a.element))){for(c=0;c<g.length;c++)if(g[c]===f[k].element[0]){f[k].proportions().height=0;continue a}f[k].visible=
"none"!==f[k].element.css("display");f[k].visible&&("mousedown"===h&&f[k]._activate.call(f[k],d),f[k].offset=f[k].element.offset(),f[k].proportions({width:f[k].element[0].offsetWidth,height:f[k].element[0].offsetHeight}))}},drop:function(c,d){var e=!1;b.each((b.ui.ddmanager.droppables[c.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&a(c,this,this.options.tolerance,d)&&(e=this._drop.call(this,d)||e),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],
c.currentItem||c.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,d)))});return e},dragStart:function(a,d){a.element.parentsUntil("body").on("scroll.droppable",function(){a.options.refreshPositions||b.ui.ddmanager.prepareOffsets(a,d)})},drag:function(c,d){c.options.refreshPositions&&b.ui.ddmanager.prepareOffsets(c,d);b.each(b.ui.ddmanager.droppables[c.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var e=a(c,this,this.options.tolerance,d);
var f=!e&&this.isover?"isout":e&&!this.isover?"isover":null;if(f){if(this.options.greedy){var h=this.options.scope;e=this.element.parents(":data(ui-droppable)").filter(function(){return b(this).droppable("instance").options.scope===h});if(e.length){var g=b(e[0]).droppable("instance");g.greedyChild="isover"===f}}g&&"isover"===f&&(g.isover=!1,g.isout=!0,g._out.call(g,d));this[f]=!0;this["isout"===f?"isover":"isout"]=!1;this["isover"===f?"_over":"_out"].call(this,d);g&&"isout"===f&&(g.isout=!1,g.isover=
!0,g._over.call(g,d))}}})},dragStop:function(a,d){a.element.parentsUntil("body").off("scroll.droppable");a.options.refreshPositions||b.ui.ddmanager.prepareOffsets(a,d)}};!1!==b.uiBackCompat&&b.widget("ui.droppable",b.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super();this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super();this.options.activeClass&&this.element.removeClass(this.options.activeClass)},
_addHoverClass:function(){this._super();this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super();this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}});return b.ui.droppable});
(function(b){"function"===typeof define&&define.amd?define("jquery ./mouse ../disable-selection ../plugin ../version ../widget".split(" "),b):b(jQuery)})(function(b){b.widget("ui.resizable",b.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,
minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(a){return parseFloat(a)||0},_isNumber:function(a){return!isNaN(parseFloat(a))},_hasScroll:function(a,c){if("hidden"===b(a).css("overflow"))return!1;c=c&&"left"===c?"scrollLeft":"scrollTop";if(0<a[c])return!0;a[c]=1;var d=0<a[c];a[c]=0;return d},_create:function(){var a=this.options,c=this;this._addClass("ui-resizable");b.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,
_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)){this.element.wrap(b("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance"));
this.elementIsWrapper=!0;var d={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")};this.element.css(d);this.originalElement.css("margin",0);this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));
this.originalElement.css(d);this._proportionallyResize()}this._setupHandles();if(a.autoHide)b(this.element).on("mouseenter",function(){a.disabled||(c._removeClass("ui-resizable-autohide"),c._handles.show())}).on("mouseleave",function(){a.disabled||c.resizing||(c._addClass("ui-resizable-autohide"),c._handles.hide())});this._mouseInit()},_destroy:function(){this._mouseDestroy();var a=function(a){b(a).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};
if(this.elementIsWrapper){a(this.element);var c=this.element;this.originalElement.css({position:c.css("position"),width:c.outerWidth(),height:c.outerHeight(),top:c.css("top"),left:c.css("left")}).insertAfter(c);c.remove()}this.originalElement.css("resize",this.originalResizeStyle);a(this.originalElement);return this},_setOption:function(a,b){this._super(a,b);switch(a){case "handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var a=this.options,c,d=this;this.handles=a.handles||
(b(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");this._handles=b();if(this.handles.constructor===String){"all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var e=this.handles.split(",");this.handles={};for(c=0;c<e.length;c++){var f=b.trim(e[c]);var h="ui-resizable-"+f;var g=b("<div>");this._addClass(g,"ui-resizable-handle "+
h);g.css({zIndex:a.zIndex});this.handles[f]=".ui-resizable-"+f;this.element.append(g)}}this._renderAxis=function(a){var c;a=a||this.element;for(c in this.handles){if(this.handles[c].constructor===String)this.handles[c]=this.element.children(this.handles[c]).first().show();else if(this.handles[c].jquery||this.handles[c].nodeType)this.handles[c]=b(this.handles[c]),this._on(this.handles[c],{mousedown:d._mouseDown});if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)){var e=
b(this.handles[c],this.element);var f=/sw|ne|nw|se|n|s/.test(c)?e.outerHeight():e.outerWidth();e=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join("");a.css(e,f);this._proportionallyResize()}this._handles=this._handles.add(this.handles[c])}};this._renderAxis(this.element);this._handles=this._handles.add(this.element.find(".ui-resizable-handle"));this._handles.disableSelection();this._handles.on("mouseover",function(){d.resizing||(this.className&&(g=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),
d.axis=g&&g[1]?g[1]:"se")});a.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(a){var c,d=!1;for(c in this.handles){var e=b(this.handles[c])[0];if(e===a.target||b.contains(e,a.target))d=!0}return!this.options.disabled&&d},_mouseStart:function(a){var c=this.options,d=this.element;this.resizing=!0;this._renderProxy();var e=this._num(this.helper.css("left"));var f=this._num(this.helper.css("top"));c.containment&&
(e+=b(c.containment).scrollLeft()||0,f+=b(c.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:e,top:f};this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:d.width(),height:d.height()};this.originalSize=this._helper?{width:d.outerWidth(),height:d.outerHeight()}:{width:d.width(),height:d.height()};this.sizeDiff={width:d.outerWidth()-d.width(),height:d.outerHeight()-d.height()};this.originalPosition={left:e,top:f};this.originalMousePosition=
{left:a.pageX,top:a.pageY};this.aspectRatio="number"===typeof c.aspectRatio?c.aspectRatio:this.originalSize.width/this.originalSize.height||1;e=b(".ui-resizable-"+this.axis).css("cursor");b("body").css("cursor","auto"===e?this.axis+"-resize":e);this._addClass("ui-resizable-resizing");this._propagate("start",a);return!0},_mouseDrag:function(a){var c=this.originalMousePosition;var d=a.pageX-c.left||0;c=a.pageY-c.top||0;var e=this._change[this.axis];this._updatePrevProperties();if(!e)return!1;d=e.apply(this,
[a,d,c]);this._updateVirtualBoundaries(a.shiftKey);if(this._aspectRatio||a.shiftKey)d=this._updateRatio(d,a);d=this._respectSize(d,a);this._updateCache(d);this._propagate("resize",a);d=this._applyChanges();!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();b.isEmptyObject(d)||(this._updatePrevProperties(),this._trigger("resize",a,this.ui()),this._applyChanges());return!1},_mouseStop:function(a){this.resizing=!1;var c,d=this.options;if(this._helper){var e=this._proportionallyResizeElements;
e=(c=e.length&&/textarea/i.test(e[0].nodeName))&&this._hasScroll(e[0],"left")?0:this.sizeDiff.height;c=c?0:this.sizeDiff.width;c={width:this.helper.width()-c,height:this.helper.height()-e};e=parseFloat(this.element.css("left"))+(this.position.left-this.originalPosition.left)||null;var f=parseFloat(this.element.css("top"))+(this.position.top-this.originalPosition.top)||null;d.animate||this.element.css(b.extend(c,{top:f,left:e}));this.helper.height(this.size.height);this.helper.width(this.size.width);
this._helper&&!d.animate&&this._proportionallyResize()}b("body").css("cursor","auto");this._removeClass("ui-resizable-resizing");this._propagate("stop",a);this._helper&&this.helper.remove();return!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left};this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var a={};this.position.top!==this.prevPosition.top&&(a.top=this.position.top+"px");this.position.left!==this.prevPosition.left&&
(a.left=this.position.left+"px");this.size.width!==this.prevSize.width&&(a.width=this.size.width+"px");this.size.height!==this.prevSize.height&&(a.height=this.size.height+"px");this.helper.css(a);return a},_updateVirtualBoundaries:function(a){var b=this.options;b={minWidth:this._isNumber(b.minWidth)?b.minWidth:0,maxWidth:this._isNumber(b.maxWidth)?b.maxWidth:Infinity,minHeight:this._isNumber(b.minHeight)?b.minHeight:0,maxHeight:this._isNumber(b.maxHeight)?b.maxHeight:Infinity};if(this._aspectRatio||
a){a=b.minHeight*this.aspectRatio;var d=b.minWidth/this.aspectRatio;var e=b.maxHeight*this.aspectRatio;var f=b.maxWidth/this.aspectRatio;a>b.minWidth&&(b.minWidth=a);d>b.minHeight&&(b.minHeight=d);e<b.maxWidth&&(b.maxWidth=e);f<b.maxHeight&&(b.maxHeight=f)}this._vBoundaries=b},_updateCache:function(a){this.offset=this.helper.offset();this._isNumber(a.left)&&(this.position.left=a.left);this._isNumber(a.top)&&(this.position.top=a.top);this._isNumber(a.height)&&(this.size.height=a.height);this._isNumber(a.width)&&
(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,d=this.size,e=this.axis;this._isNumber(a.height)?a.width=a.height*this.aspectRatio:this._isNumber(a.width)&&(a.height=a.width/this.aspectRatio);"sw"===e&&(a.left=b.left+(d.width-a.width),a.top=null);"nw"===e&&(a.top=b.top+(d.height-a.height),a.left=b.left+(d.width-a.width));return a},_respectSize:function(a){var b=this._vBoundaries,d=this.axis,e=this._isNumber(a.width)&&b.maxWidth&&b.maxWidth<a.width,f=this._isNumber(a.height)&&
b.maxHeight&&b.maxHeight<a.height,h=this._isNumber(a.width)&&b.minWidth&&b.minWidth>a.width,g=this._isNumber(a.height)&&b.minHeight&&b.minHeight>a.height,k=this.originalPosition.left+this.originalSize.width,m=this.originalPosition.top+this.originalSize.height,l=/sw|nw|w/.test(d);d=/nw|ne|n/.test(d);h&&(a.width=b.minWidth);g&&(a.height=b.minHeight);e&&(a.width=b.maxWidth);f&&(a.height=b.maxHeight);h&&l&&(a.left=k-b.minWidth);e&&l&&(a.left=k-b.maxWidth);g&&d&&(a.top=m-b.minHeight);f&&d&&(a.top=m-b.maxHeight);
a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null;return a},_getPaddingPlusBorderDimensions:function(a){var b=0,d=[],e=[a.css("borderTopWidth"),a.css("borderRightWidth"),a.css("borderBottomWidth"),a.css("borderLeftWidth")];for(a=[a.css("paddingTop"),a.css("paddingRight"),a.css("paddingBottom"),a.css("paddingLeft")];4>b;b++)d[b]=parseFloat(e[b])||0,d[b]+=parseFloat(a[b])||0;return{height:d[0]+d[2],width:d[1]+d[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var a,
b=0,d=this.helper||this.element;b<this._proportionallyResizeElements.length;b++)a=this._proportionallyResizeElements[b],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(a)),a.css({height:d.height()-this.outerDimensions.height||0,width:d.width()-this.outerDimensions.width||0})},_renderProxy:function(){var a=this.options;this.elementOffset=this.element.offset();this._helper?(this.helper=this.helper||b("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,
this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++a.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){return{left:this.originalPosition.left+b,width:this.originalSize.width-b}},n:function(a,b,d){return{top:this.originalPosition.top+d,height:this.originalSize.height-
d}},s:function(a,b,d){return{height:this.originalSize.height+d}},se:function(a,c,d){return b.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[a,c,d]))},sw:function(a,c,d){return b.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[a,c,d]))},ne:function(a,c,d){return b.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[a,c,d]))},nw:function(a,c,d){return b.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[a,c,d]))}},
_propagate:function(a,c){b.ui.plugin.call(this,a,[c,this.ui()]);"resize"!==a&&this._trigger(a,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});b.ui.plugin.add("resizable","animate",{stop:function(a){var c=b(this).resizable("instance"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),
h=f&&c._hasScroll(e[0],"left")?0:c.sizeDiff.height;f={width:c.size.width-(f?0:c.sizeDiff.width),height:c.size.height-h};h=parseFloat(c.element.css("left"))+(c.position.left-c.originalPosition.left)||null;var g=parseFloat(c.element.css("top"))+(c.position.top-c.originalPosition.top)||null;c.element.animate(b.extend(f,g&&h?{top:g,left:h}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseFloat(c.element.css("width")),height:parseFloat(c.element.css("height")),top:parseFloat(c.element.css("top")),
left:parseFloat(c.element.css("left"))};e&&e.length&&b(e[0]).css({width:d.width,height:d.height});c._updateCache(d);c._propagate("resize",a)}})}});b.ui.plugin.add("resizable","containment",{start:function(){var a=b(this).resizable("instance"),c=a.element;var d=a.options.containment;if(c=d instanceof b?d.get(0):/parent/.test(d)?c.parent().get(0):d)if(a.containerElement=b(c),/document/.test(d)||d===document)a.containerOffset={left:0,top:0},a.containerPosition={left:0,top:0},a.parentData={element:b(document),
left:0,top:0,width:b(document).width(),height:b(document).height()||document.body.parentNode.scrollHeight};else{var e=b(c);var f=[];b(["Top","Right","Left","Bottom"]).each(function(b,c){f[b]=a._num(e.css("padding"+c))});a.containerOffset=e.offset();a.containerPosition=e.position();a.containerSize={height:e.innerHeight()-f[3],width:e.innerWidth()-f[1]};d=a.containerOffset;var h=a.containerSize.height;var g=a.containerSize.width;g=a._hasScroll(c,"left")?c.scrollWidth:g;h=a._hasScroll(c)?c.scrollHeight:
h;a.parentData={element:c,left:d.left,top:d.top,width:g,height:h}}},resize:function(a){var c=b(this).resizable("instance");var d=c.options;var e=c.containerOffset;var f=c.position;a=c._aspectRatio||a.shiftKey;var h={top:0,left:0},g=c.containerElement,k=!0;g[0]!==document&&/static/.test(g.css("position"))&&(h=e);f.left<(c._helper?e.left:0)&&(c.size.width+=c._helper?c.position.left-e.left:c.position.left-h.left,a&&(c.size.height=c.size.width/c.aspectRatio,k=!1),c.position.left=d.helper?e.left:0);f.top<
(c._helper?e.top:0)&&(c.size.height+=c._helper?c.position.top-e.top:c.position.top,a&&(c.size.width=c.size.height*c.aspectRatio,k=!1),c.position.top=c._helper?e.top:0);d=c.containerElement.get(0)===c.element.parent().get(0);f=/relative|absolute/.test(c.containerElement.css("position"));d&&f?(c.offset.left=c.parentData.left+c.position.left,c.offset.top=c.parentData.top+c.position.top):(c.offset.left=c.element.offset().left,c.offset.top=c.element.offset().top);d=Math.abs(c.sizeDiff.width+(c._helper?
c.offset.left-h.left:c.offset.left-e.left));e=Math.abs(c.sizeDiff.height+(c._helper?c.offset.top-h.top:c.offset.top-e.top));d+c.size.width>=c.parentData.width&&(c.size.width=c.parentData.width-d,a&&(c.size.height=c.size.width/c.aspectRatio,k=!1));e+c.size.height>=c.parentData.height&&(c.size.height=c.parentData.height-e,a&&(c.size.width=c.size.height*c.aspectRatio,k=!1));k||(c.position.left=c.prevPosition.left,c.position.top=c.prevPosition.top,c.size.width=c.prevSize.width,c.size.height=c.prevSize.height)},
stop:function(){var a=b(this).resizable("instance"),c=a.options,d=a.containerOffset,e=a.containerPosition,f=a.containerElement,h=b(a.helper),g=h.offset(),k=h.outerWidth()-a.sizeDiff.width;h=h.outerHeight()-a.sizeDiff.height;a._helper&&!c.animate&&/relative/.test(f.css("position"))&&b(this).css({left:g.left-e.left-d.left,width:k,height:h});a._helper&&!c.animate&&/static/.test(f.css("position"))&&b(this).css({left:g.left-e.left-d.left,width:k,height:h})}});b.ui.plugin.add("resizable","alsoResize",{start:function(){var a=
b(this).resizable("instance").options;b(a.alsoResize).each(function(){var a=b(this);a.data("ui-resizable-alsoresize",{width:parseFloat(a.width()),height:parseFloat(a.height()),left:parseFloat(a.css("left")),top:parseFloat(a.css("top"))})})},resize:function(a,c){a=b(this).resizable("instance");var d=a.originalSize,e=a.originalPosition,f={height:a.size.height-d.height||0,width:a.size.width-d.width||0,top:a.position.top-e.top||0,left:a.position.left-e.left||0};b(a.options.alsoResize).each(function(){var a=
b(this),e=b(this).data("ui-resizable-alsoresize"),d={},m=a.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];b.each(m,function(a,b){(a=(e[b]||0)+(f[b]||0))&&0<=a&&(d[b]=a||null)});a.css(d)})},stop:function(){b(this).removeData("ui-resizable-alsoresize")}});b.ui.plugin.add("resizable","ghost",{start:function(){var a=b(this).resizable("instance"),c=a.size;a.ghost=a.originalElement.clone();a.ghost.css({opacity:.25,display:"block",position:"relative",height:c.height,
width:c.width,margin:0,left:0,top:0});a._addClass(a.ghost,"ui-resizable-ghost");!1!==b.uiBackCompat&&"string"===typeof a.options.ghost&&a.ghost.addClass(this.options.ghost);a.ghost.appendTo(a.helper)},resize:function(){var a=b(this).resizable("instance");a.ghost&&a.ghost.css({position:"relative",height:a.size.height,width:a.size.width})},stop:function(){var a=b(this).resizable("instance");a.ghost&&a.helper&&a.helper.get(0).removeChild(a.ghost.get(0))}});b.ui.plugin.add("resizable","grid",{resize:function(){var a=
b(this).resizable("instance"),c=a.options,d=a.size,e=a.originalSize,f=a.originalPosition,h=a.axis,g="number"===typeof c.grid?[c.grid,c.grid]:c.grid,k=g[0]||1,m=g[1]||1,l=Math.round((d.width-e.width)/k)*k;d=Math.round((d.height-e.height)/m)*m;var n=e.width+l,q=e.height+d,p=c.maxWidth&&c.maxWidth<n,u=c.maxHeight&&c.maxHeight<q,z=c.minWidth&&c.minWidth>n,t=c.minHeight&&c.minHeight>q;c.grid=g;z&&(n+=k);t&&(q+=m);p&&(n-=k);u&&(q-=m);if(/^(se|s|e)$/.test(h))a.size.width=n,a.size.height=q;else if(/^(ne)$/.test(h))a.size.width=
n,a.size.height=q,a.position.top=f.top-d;else if(/^(sw)$/.test(h))a.size.width=n,a.size.height=q,a.position.left=f.left-l;else{if(0>=q-m||0>=n-k)var v=a._getPaddingPlusBorderDimensions(this);0<q-m?(a.size.height=q,a.position.top=f.top-d):(q=m-v.height,a.size.height=q,a.position.top=f.top+e.height-q);0<n-k?(a.size.width=n,a.position.left=f.left-l):(n=k-v.width,a.size.width=n,a.position.left=f.left+e.width-n)}}});return b.ui.resizable});
(function(b){"function"===typeof define&&define.amd?define(["jquery","./controlgroup","./checkboxradio","../keycode","../widget"],b):b(jQuery)})(function(b){b.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var a=this._super()||{};this.isInput=this.element.is("input");var b=this.element[0].disabled;null!=b&&(a.disabled=b);if(this.originalLabel=
this.isInput?this.element.val():this.element.html())a.label=this.originalLabel;return a},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0);null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1);this.hasTitle=!!this.element.attr("title");this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label));this._addClass("ui-button","ui-widget");this._setOption("disabled",
this.options.disabled);this._enhance();this.element.is("a")&&this._on({keyup:function(a){a.keyCode===b.ui.keyCode.SPACE&&(a.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button");this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title");this.options.showLabel||this.title||this.element.attr("title",
this.options.label)},_updateIcon:function(a,c){var d=(a="iconPosition"!==a)?this.options.iconPosition:c,e="top"===d||"bottom"===d;this.icon?a&&this._removeClass(this.icon,null,this.options.icon):(this.icon=b("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only"));a&&this._addClass(this.icon,null,c);this._attachIcon(d);e?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||
(this.iconSpace=b("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(d))},_destroy:function(){this.element.removeAttr("role");this.icon&&this.icon.remove();this.iconSpace&&this.iconSpace.remove();this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(a){this.icon[/^(?:end|bottom)/.test(a)?"before":"after"](this.iconSpace)},_attachIcon:function(a){this.element[/^(?:end|bottom)/.test(a)?
"append":"prepend"](this.icon)},_setOptions:function(a){var b=void 0===a.icon?this.options.icon:a.icon;(void 0===a.showLabel?this.options.showLabel:a.showLabel)||b||(a.showLabel=!0);this._super(a)},_setOption:function(a,b){"icon"===a&&(b?this._updateIcon(a,b):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove()));"iconPosition"===a&&this._updateIcon(a,b);"showLabel"===a&&(this._toggleClass("ui-button-icon-only",null,!b),this._updateTooltip());"label"===a&&(this.isInput?this.element.val(b):
(this.element.html(b),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition))));this._super(a,b);"disabled"===a&&(this._toggleClass(null,"ui-state-disabled",b),(this.element[0].disabled=b)&&this.element.blur())},refresh:function(){var a=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");a!==this.options.disabled&&this._setOptions({disabled:a});this._updateTooltip()}});!1!==b.uiBackCompat&&(b.widget("ui.button",
b.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text);!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel);this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,
this.options.iconPosition="end");this._super()},_setOption:function(a,b){"text"===a?this._super("showLabel",b):("showLabel"===a&&(this.options.text=b),"icon"===a&&(this.options.icons.primary=b),"icons"===a&&(b.primary?(this._super("icon",b.primary),this._super("iconPosition","beginning")):b.secondary&&(this._super("icon",b.secondary),this._super("iconPosition","end"))),this._superApply(arguments))}}),b.fn.button=function(a){return function(){if(!this.length||this.length&&"INPUT"!==this[0].tagName||
this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type"))return a.apply(this,arguments);b.ui.checkboxradio||b.error("Checkboxradio widget missing");return 0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments)}}(b.fn.button),b.fn.buttonset=function(){b.ui.controlgroup||b.error("Controlgroup widget missing");if("option"===arguments[0]&&"items"===arguments[1]&&arguments[2])return this.controlgroup.apply(this,[arguments[0],
"items.button",arguments[2]]);if("option"===arguments[0]&&"items"===arguments[1])return this.controlgroup.apply(this,[arguments[0],"items.button"]);"object"===typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items});return this.controlgroup.apply(this,arguments)});return b.ui.button});
(function(b){"function"===typeof define&&define.amd?define("jquery ./button ./draggable ./mouse ./resizable ../focusable ../keycode ../position ../safe-active-element ../safe-blur ../tabbable ../unique-id ../version ../widget".split(" "),b):b(jQuery)})(function(b){b.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,
maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(a){var c=b(this).css(a).offset().top;0>c&&b(this).css("top",a.top-c)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,
maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle);
this.options.disabled&&(this.options.disabled=!1);this._createWrapper();this.element.show().removeAttr("title").appendTo(this.uiDialog);this._addClass("ui-dialog-content","ui-widget-content");this._createTitlebar();this._createButtonPane();this.options.draggable&&b.fn.draggable&&this._makeDraggable();this.options.resizable&&b.fn.resizable&&this._makeResizable();this._isOpen=!1;this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var a=this.options.appendTo;
return a&&(a.jquery||a.nodeType)?b(a):this.document.find(a||"body").eq(0)},_destroy:function(){var a=this.originalPosition;this._untrackInstance();this._destroyOverlay();this.element.removeUniqueId().css(this.originalCss).detach();this.uiDialog.remove();this.originalTitle&&this.element.attr("title",this.originalTitle);var b=a.parent.children().eq(a.index);b.length&&b[0]!==this.element[0]?b.before(this.element):a.parent.append(this.element)},widget:function(){return this.uiDialog},disable:b.noop,enable:b.noop,
close:function(a){var c=this;this._isOpen&&!1!==this._trigger("beforeClose",a)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||b.ui.safeBlur(b.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){c._trigger("close",a)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(a,c){var d=!1,e=this.uiDialog.siblings(".ui-front:visible").map(function(){return+b(this).css("z-index")}).get();
e=Math.max.apply(null,e);e>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",e+1),d=!0);d&&!c&&this._trigger("focus",a);return d},open:function(){var a=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=b(b.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){a._focusTabbable();
a._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var a=this._focusedElement;a||(a=this.element.find("[autofocus]"));a.length||(a=this.element.find(":tabbable"));a.length||(a=this.uiDialogButtonPane.find(":tabbable"));a.length||(a=this.uiDialogTitlebarClose.filter(":tabbable"));a.length||(a=this.uiDialog);a.eq(0).trigger("focus")},_keepFocus:function(a){function c(){var a=b.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===a||b.contains(this.uiDialog[0],
a)||this._focusTabbable()}a.preventDefault();c.call(this);this._delay(c)},_createWrapper:function(){this.uiDialog=b("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front");this._on(this.uiDialog,{keydown:function(a){if(this.options.closeOnEscape&&!a.isDefaultPrevented()&&a.keyCode&&a.keyCode===b.ui.keyCode.ESCAPE)a.preventDefault(),this.close(a);else if(a.keyCode===b.ui.keyCode.TAB&&!a.isDefaultPrevented()){var c=
this.uiDialog.find(":tabbable"),d=c.filter(":first"),e=c.filter(":last");a.target!==e[0]&&a.target!==this.uiDialog[0]||a.shiftKey?a.target!==d[0]&&a.target!==this.uiDialog[0]||!a.shiftKey||(this._delay(function(){e.trigger("focus")}),a.preventDefault()):(this._delay(function(){d.trigger("focus")}),a.preventDefault())}},mousedown:function(a){this._moveToTop(a)&&this._focusTabbable()}});this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},
_createTitlebar:function(){this.uiDialogTitlebar=b("<div>");this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix");this._on(this.uiDialogTitlebar,{mousedown:function(a){b(a.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}});this.uiDialogTitlebarClose=b("<button type='button'></button>").button({label:b("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar);this._addClass(this.uiDialogTitlebarClose,
"ui-dialog-titlebar-close");this._on(this.uiDialogTitlebarClose,{click:function(a){a.preventDefault();this.close(a)}});var a=b("<span>").uniqueId().prependTo(this.uiDialogTitlebar);this._addClass(a,"ui-dialog-title");this._title(a);this.uiDialogTitlebar.prependTo(this.uiDialog);this.uiDialog.attr({"aria-labelledby":a.attr("id")})},_title:function(a){this.options.title?a.text(this.options.title):a.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=b("<div>");this._addClass(this.uiDialogButtonPane,
"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix");this.uiButtonSet=b("<div>").appendTo(this.uiDialogButtonPane);this._addClass(this.uiButtonSet,"ui-dialog-buttonset");this._createButtons()},_createButtons:function(){var a=this,c=this.options.buttons;this.uiDialogButtonPane.remove();this.uiButtonSet.empty();b.isEmptyObject(c)||b.isArray(c)&&!c.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(b.each(c,function(c,e){e=b.isFunction(e)?{click:e,text:c}:e;e=b.extend({type:"button"},
e);var d=e.click;c={icon:e.icon,iconPosition:e.iconPosition,showLabel:e.showLabel,icons:e.icons,text:e.text};delete e.click;delete e.icon;delete e.iconPosition;delete e.showLabel;delete e.icons;"boolean"===typeof e.text&&delete e.text;b("<button></button>",e).button(c).appendTo(a.uiButtonSet).on("click",function(){d.apply(a.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function a(a){return{position:a.position,
offset:a.offset}}var c=this,d=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(e,d){c._addClass(b(this),"ui-dialog-dragging");c._blockFrames();c._trigger("dragStart",e,a(d))},drag:function(b,d){c._trigger("drag",b,a(d))},stop:function(e,f){var h=f.offset.left-c.document.scrollLeft(),g=f.offset.top-c.document.scrollTop();d.position={my:"left top",at:"left"+(0<=h?"+":"")+h+" top"+(0<=g?"+":
"")+g,of:c.window};c._removeClass(b(this),"ui-dialog-dragging");c._unblockFrames();c._trigger("dragStop",e,a(f))}})},_makeResizable:function(){function a(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}var c=this,d=this.options,e=d.resizable,f=this.uiDialog.css("position");e="string"===typeof e?e:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:d.maxWidth,maxHeight:d.maxHeight,
minWidth:d.minWidth,minHeight:this._minHeight(),handles:e,start:function(e,d){c._addClass(b(this),"ui-dialog-resizing");c._blockFrames();c._trigger("resizeStart",e,a(d))},resize:function(b,e){c._trigger("resize",b,a(e))},stop:function(e,f){var g=c.uiDialog.offset(),h=g.left-c.document.scrollLeft();g=g.top-c.document.scrollTop();d.height=c.uiDialog.height();d.width=c.uiDialog.width();d.position={my:"left top",at:"left"+(0<=h?"+":"")+h+" top"+(0<=g?"+":"")+g,of:c.window};c._removeClass(b(this),"ui-dialog-resizing");
c._unblockFrames();c._trigger("resizeStop",e,a(f))}}).css("position",f)},_trackFocus:function(){this._on(this.widget(),{focusin:function(a){this._makeFocusTarget();this._focusedElement=b(a.target)}})},_makeFocusTarget:function(){this._untrackInstance();this._trackingInstances().unshift(this)},_untrackInstance:function(){var a=this._trackingInstances(),c=b.inArray(this,a);-1!==c&&a.splice(c,1)},_trackingInstances:function(){var a=this.document.data("ui-dialog-instances");a||(a=[],this.document.data("ui-dialog-instances",
a));return a},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(){var a=this.uiDialog.is(":visible");a||this.uiDialog.show();this.uiDialog.position(this.options.position);a||this.uiDialog.hide()},_setOptions:function(a){var c=this,d=!1,e={};b.each(a,function(a,b){c._setOption(a,b);a in c.sizeRelatedOptions&&(d=!0);a in c.resizableRelatedOptions&&(e[a]=b)});d&&(this._size(),this._position());this.uiDialog.is(":data(ui-resizable)")&&
this.uiDialog.resizable("option",e)},_setOption:function(a,c){var d,e=this.uiDialog;"disabled"!==a&&(this._super(a,c),"appendTo"===a&&this.uiDialog.appendTo(this._appendTo()),"buttons"===a&&this._createButtons(),"closeText"===a&&this.uiDialogTitlebarClose.button({label:b("<a>").text(""+this.options.closeText).html()}),"draggable"===a&&((d=e.is(":data(ui-draggable)"))&&!c&&e.draggable("destroy"),!d&&c&&this._makeDraggable()),"position"===a&&this._position(),"resizable"===a&&((d=e.is(":data(ui-resizable)"))&&
!c&&e.resizable("destroy"),d&&"string"===typeof c&&e.resizable("option","handles",c),d||!1===c||this._makeResizable()),"title"===a&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var a=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});a.minWidth>a.width&&(a.width=a.minWidth);var b=this.uiDialog.css({height:"auto",width:a.width}).outerHeight();var d=Math.max(0,a.minHeight-b);var e="number"===typeof a.maxHeight?Math.max(0,a.maxHeight-
b):"none";"auto"===a.height?this.element.css({minHeight:d,maxHeight:e,height:"auto"}):this.element.height(Math.max(0,a.height-b));this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var a=b(this);return b("<div>").css({position:"absolute",width:a.outerWidth(),height:a.outerHeight()}).appendTo(a.parent()).offset(a.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&
(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(a){return b(a.target).closest(".ui-dialog").length?!0:!!b(a.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var a=!0;this._delay(function(){a=!1});this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(b){a||this._allowInteraction(b)||(b.preventDefault(),this._trackingInstances()[0]._focusTabbable())}});this.overlay=b("<div>").appendTo(this._appendTo());
this._addClass(this.overlay,null,"ui-widget-overlay ui-front");this._on(this.overlay,{mousedown:"_keepFocus"});this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var a=this.document.data("ui-dialog-overlays")-1;a?this.document.data("ui-dialog-overlays",a):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays"));this.overlay.remove();this.overlay=null}}});!1!==b.uiBackCompat&&
b.widget("ui.dialog",b.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super();this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(a,b){"dialogClass"===a&&this.uiDialog.removeClass(this.options.dialogClass).addClass(b);this._superApply(arguments)}});return b.ui.dialog});
(function(b){"function"===typeof define&&define.amd?define("jquery ./menu ../keycode ../position ../safe-active-element ../version ../widget".split(" "),b):b(jQuery)})(function(b){b.widget("ui.autocomplete",{version:"1.12.1",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var a,
c,d,e=this.element[0].nodeName.toLowerCase(),f="textarea"===e;e="input"===e;this.isMultiLine=f||!e&&this._isContentEditable(this.element);this.valueMethod=this.element[f||e?"val":"text"];this.isNewMenu=!0;this._addClass("ui-autocomplete-input");this.element.attr("autocomplete","off");this._on(this.element,{keydown:function(e){if(this.element.prop("readOnly"))c=d=a=!0;else{c=d=a=!1;var f=b.ui.keyCode;switch(e.keyCode){case f.PAGE_UP:a=!0;this._move("previousPage",e);break;case f.PAGE_DOWN:a=!0;this._move("nextPage",
e);break;case f.UP:a=!0;this._keyEvent("previous",e);break;case f.DOWN:a=!0;this._keyEvent("next",e);break;case f.ENTER:this.menu.active&&(a=!0,e.preventDefault(),this.menu.select(e));break;case f.TAB:this.menu.active&&this.menu.select(e);break;case f.ESCAPE:this.menu.element.is(":visible")&&(this.isMultiLine||this._value(this.term),this.close(e),e.preventDefault());break;default:c=!0,this._searchTimeout(e)}}},keypress:function(e){if(a)a=!1,this.isMultiLine&&!this.menu.element.is(":visible")||e.preventDefault();
else if(!c){var d=b.ui.keyCode;switch(e.keyCode){case d.PAGE_UP:this._move("previousPage",e);break;case d.PAGE_DOWN:this._move("nextPage",e);break;case d.UP:this._keyEvent("previous",e);break;case d.DOWN:this._keyEvent("next",e)}}},input:function(a){d?(d=!1,a.preventDefault()):this._searchTimeout(a)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(a){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(a),this._change(a))}});this._initSource();
this.menu=b("<ul>").appendTo(this._appendTo()).menu({role:null}).hide().menu("instance");this._addClass(this.menu.element,"ui-autocomplete","ui-front");this._on(this.menu.element,{mousedown:function(a){a.preventDefault();this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur;this.element[0]!==b.ui.safeActiveElement(this.document[0])&&this.element.trigger("focus")})},menufocus:function(a,e){if(this.isNewMenu&&(this.isNewMenu=!1,a.originalEvent&&/^mouse/.test(a.originalEvent.type))){this.menu.blur();
this.document.one("mousemove",function(){b(a.target).trigger(a.originalEvent)});return}var c=e.item.data("ui-autocomplete-item");!1!==this._trigger("focus",a,{item:c})&&a.originalEvent&&/^key/.test(a.originalEvent.type)&&this._value(c.value);(e=e.item.attr("aria-label")||c.value)&&b.trim(e).length&&(this.liveRegion.children().hide(),b("<div>").text(e).appendTo(this.liveRegion))},menuselect:function(a,e){var c=e.item.data("ui-autocomplete-item"),d=this.previous;this.element[0]!==b.ui.safeActiveElement(this.document[0])&&
(this.element.trigger("focus"),this.previous=d,this._delay(function(){this.previous=d;this.selectedItem=c}));!1!==this._trigger("select",a,{item:c})&&this._value(c.value);this.term=this._value();this.close(a);this.selectedItem=c}});this.liveRegion=b("<div>",{role:"status","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body);this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible");this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},
_destroy:function(){clearTimeout(this.searching);this.element.removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(a,b){this._super(a,b);"source"===a&&this._initSource();"appendTo"===a&&this.menu.element.appendTo(this._appendTo());"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_isEventTargetInWidget:function(a){var c=this.menu.element[0];return a.target===this.element[0]||a.target===c||b.contains(c,a.target)},_closeOnClickOutside:function(a){this._isEventTargetInWidget(a)||
this.close()},_appendTo:function(){var a=this.options.appendTo;a&&(a=a.jquery||a.nodeType?b(a):this.document.find(a).eq(0));a&&a[0]||(a=this.element.closest(".ui-front, dialog"));a.length||(a=this.document[0].body);return a},_initSource:function(){var a=this;if(b.isArray(this.options.source)){var c=this.options.source;this.source=function(a,d){d(b.ui.autocomplete.filter(c,a.term))}}else if("string"===typeof this.options.source){var d=this.options.source;this.source=function(e,c){a.xhr&&a.xhr.abort();
a.xhr=b.ajax({url:d,data:e,dataType:"json",success:function(a){c(a)},error:function(){c([])}})}}else this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching);this.searching=this._delay(function(){var b=this.term===this._value(),d=this.menu.element.is(":visible"),e=a.altKey||a.ctrlKey||a.metaKey||a.shiftKey;if(!b||b&&!d&&!e)this.selectedItem=null,this.search(null,a)},this.options.delay)},search:function(a,b){a=null!=a?a:this._value();this.term=this._value();if(a.length<
this.options.minLength)return this.close(b);if(!1!==this._trigger("search",b))return this._search(a)},_search:function(a){this.pending++;this._addClass("ui-autocomplete-loading");this.cancelSearch=!1;this.source({term:a},this._response())},_response:function(){var a=++this.requestIndex;return b.proxy(function(b){a===this.requestIndex&&this.__response(b);this.pending--;this.pending||this._removeClass("ui-autocomplete-loading")},this)},__response:function(a){a&&(a=this._normalize(a));this._trigger("response",
null,{content:a});!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):this._close()},close:function(a){this.cancelSearch=!0;this._close(a)},_close:function(a){this._off(this.document,"mousedown");this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(a){return a.length&&
a[0].label&&a[0].value?a:b.map(a,function(a){return"string"===typeof a?{label:a,value:a}:b.extend({},a,{label:a.label||a.value,value:a.value||a.label})})},_suggest:function(a){var c=this.menu.element.empty();this._renderMenu(c,a);this.isNewMenu=!0;this.menu.refresh();c.show();this._resizeMenu();c.position(b.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next();this._on(this.document,{mousedown:"_closeOnClickOutside"})},_resizeMenu:function(){var a=this.menu.element;
a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(a,c){var d=this;b.each(c,function(b,c){d._renderItemData(a,c)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-autocomplete-item",b)},_renderItem:function(a,c){return b("<li>").append(b("<div>").text(c.label)).appendTo(a)},_move:function(a,b){if(this.menu.element.is(":visible"))if(this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a))this.isMultiLine||
this._value(this.term),this.menu.blur();else this.menu[a](b);else this.search(null,b)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(a,b),b.preventDefault()},_isContentEditable:function(a){if(!a.length)return!1;var b=a.prop("contentEditable");return"inherit"===b?this._isContentEditable(a.parent()):"true"===b}});b.extend(b.ui.autocomplete,
{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(a,c){var d=new RegExp(b.ui.autocomplete.escapeRegex(c),"i");return b.grep(a,function(a){return d.test(a.label||a.value||a)})}});b.widget("ui.autocomplete",b.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(1<a?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(a){this._superApply(arguments);if(!this.options.disabled&&
!this.cancelSearch){var c=a&&a.length?this.options.messages.results(a.length):this.options.messages.noResults;this.liveRegion.children().hide();b("<div>").text(c).appendTo(this.liveRegion)}}});return b.ui.autocomplete});
(function(b){"function"===typeof define&&define.amd?define("jquery ./menu ../escape-selector ../form-reset-mixin ../keycode ../labels ../position ../unique-id ../version ../widget".split(" "),b):b(jQuery)})(function(b){return b.widget("ui.selectmenu",[b.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",
at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var a=this.element.uniqueId().attr("id");this.ids={element:a,button:a+"-button",menu:a+"-menu"};this._drawButton();this._drawMenu();this._bindFormResetHandler();this._rendered=!1;this.menuItems=b()},_drawButton:function(){var a=this,c=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button);
this._on(this.labels,{click:function(a){this.button.focus();a.preventDefault()}});this.element.hide();this.button=b("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element);this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget");var d=b("<span>").appendTo(this.button);this._addClass(d,
"ui-selectmenu-icon","ui-icon "+this.options.icons.button);this.buttonItem=this._renderButtonItem(c).appendTo(this.button);!1!==this.options.width&&this._resizeButton();this._on(this.button,this._buttonEvents);this.button.one("focusin",function(){a._rendered||a._refreshMenu()})},_drawMenu:function(){var a=this;this.menu=b("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu});this.menuWrap=b("<div>").append(this.menu);this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front");
this.menuWrap.appendTo(this._appendTo());this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(b,d){b.preventDefault();a._setSelection();a._select(d.item.data("ui-selectmenu-item"),b)},focus:function(b,d){d=d.item.data("ui-selectmenu-item");null!=a.focusIndex&&d.index!==a.focusIndex&&(a._trigger("focus",b,{item:d}),a.isOpen||a._select(d,b));a.focusIndex=d.index;a.button.attr("aria-activedescendant",a.menuItems.eq(d.index).attr("id"))}}).menu("instance");
this.menuInstance._off(this.menu,"mouseleave");this.menuInstance._closeOnDocumentClick=function(){return!1};this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu();this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{}));null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var a=this.element.find("option");this.menu.empty();this._parseOptions(a);this._renderMenu(this.menu,this.items);
this.menuInstance.refresh();this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper");this._rendered=!0;a.length&&(a=this._getSelectedItem(),this.menuInstance.focus(null,a),this._setAria(a.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(a){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):
this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",a)))},_position:function(){this.menuWrap.position(b.extend({of:this.button},this.options.position))},close:function(a){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",a))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(a){var c=
b("<span>");this._setText(c,a.label);this._addClass(c,"ui-selectmenu-text");return c},_renderMenu:function(a,c){var d=this,e="";b.each(c,function(c,h){h.optgroup!==e&&(c=b("<li>",{text:h.optgroup}),d._addClass(c,"ui-selectmenu-optgroup","ui-menu-divider"+(h.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),c.appendTo(a),e=h.optgroup);d._renderItemData(a,h)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-selectmenu-item",b)},_renderItem:function(a,c){var d=
b("<li>"),e=b("<div>",{title:c.element.attr("title")});c.disabled&&this._addClass(d,null,"ui-state-disabled");this._setText(e,c.label);return d.append(e).appendTo(a)},_setText:function(a,b){b?a.text(b):a.html("&#160;")},_move:function(a,b){var c=".ui-menu-item";if(this.isOpen)var e=this.menuItems.eq(this.focusIndex).parent("li");else e=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),c+=":not(.ui-state-disabled)";a="first"===a||"last"===a?e["first"===a?"prevAll":"nextAll"](c).eq(-1):
e[a+"All"](c).eq(0);a.length&&this.menuInstance.focus(b,a)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(a){this[this.isOpen?"close":"open"](a)},_setSelection:function(){if(this.range){if(window.getSelection){var a=window.getSelection();a.removeAllRanges();a.addRange(this.range)}else this.range.select();this.button.focus()}},_documentClick:{mousedown:function(a){this.isOpen&&(b(a.target).closest(".ui-selectmenu-menu, #"+b.ui.escapeSelector(this.ids.button)).length||
this.close(a))}},_buttonEvents:{mousedown:function(){if(window.getSelection){var a=window.getSelection();a.rangeCount&&(this.range=a.getRangeAt(0))}else this.range=document.selection.createRange()},click:function(a){this._setSelection();this._toggle(a)},keydown:function(a){var c=!0;switch(a.keyCode){case b.ui.keyCode.TAB:case b.ui.keyCode.ESCAPE:this.close(a);c=!1;break;case b.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(a);break;case b.ui.keyCode.UP:a.altKey?this._toggle(a):this._move("prev",
a);break;case b.ui.keyCode.DOWN:a.altKey?this._toggle(a):this._move("next",a);break;case b.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(a):this._toggle(a);break;case b.ui.keyCode.LEFT:this._move("prev",a);break;case b.ui.keyCode.RIGHT:this._move("next",a);break;case b.ui.keyCode.HOME:case b.ui.keyCode.PAGE_UP:this._move("first",a);break;case b.ui.keyCode.END:case b.ui.keyCode.PAGE_DOWN:this._move("last",a);break;default:this.menu.trigger(a),c=!1}c&&a.preventDefault()}},_selectFocusedItem:function(a){var b=
this.menuItems.eq(this.focusIndex).parent("li");b.hasClass("ui-state-disabled")||this._select(b.data("ui-selectmenu-item"),a)},_select:function(a,b){var c=this.element[0].selectedIndex;this.element[0].selectedIndex=a.index;this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(a));this._setAria(a);this._trigger("select",b,{item:a});a.index!==c&&this._trigger("change",b,{item:a});this.close(b)},_setAria:function(a){a=this.menuItems.eq(a.index).attr("id");this.button.attr({"aria-labelledby":a,
"aria-activedescendant":a});this.menu.attr("aria-activedescendant",a)},_setOption:function(a,b){if("icons"===a){var c=this.button.find("span.ui-icon");this._removeClass(c,null,this.options.icons.button)._addClass(c,null,b.button)}this._super(a,b);"appendTo"===a&&this.menuWrap.appendTo(this._appendTo());"width"===a&&this._resizeButton()},_setOptionDisabled:function(a){this._super(a);this.menuInstance.option("disabled",a);this.button.attr("aria-disabled",a);this._toggleClass(this.button,null,"ui-state-disabled",
a);this.element.prop("disabled",a);a?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var a=this.options.appendTo;a&&(a=a.jquery||a.nodeType?b(a):this.document.find(a).eq(0));a&&a[0]||(a=this.element.closest(".ui-front, dialog"));a.length||(a=this.document[0].body);return a},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen);this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,
"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen);this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var a=this.options.width;!1===a?this.button.css("width",""):(null===a&&(a=this.element.show().outerWidth(),this.element.hide()),this.button.outerWidth(a))},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var a=this._super();
a.disabled=this.element.prop("disabled");return a},_parseOptions:function(a){var c=this,d=[];a.each(function(a,f){d.push(c._parseOption(b(f),a))});this.items=d},_parseOption:function(a,b){var c=a.parent("optgroup");return{element:a,index:b,value:a.val(),label:a.text(),optgroup:c.attr("label")||"",disabled:c.prop("disabled")||a.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler();this.menuWrap.remove();this.button.remove();this.element.show();this.element.removeUniqueId();this.labels.attr("for",
this.ids.element)}}])});
(function(b){"function"===typeof define&&define.amd?define(["jquery","./mouse","../keycode","../version","../widget"],b):b(jQuery)})(function(b){return b.widget("ui.slider",b.ui.mouse,{version:"1.12.1",widgetEventPrefix:"slide",options:{animate:!1,classes:{"ui-slider":"ui-corner-all","ui-slider-handle":"ui-corner-all","ui-slider-range":"ui-corner-all ui-widget-header"},distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},
numPages:5,_create:function(){this._mouseSliding=this._keySliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this._calculateNewMax();this._addClass("ui-slider ui-slider-"+this.orientation,"ui-widget ui-widget-content");this._refresh();this._animateOff=!1},_refresh:function(){this._createRange();this._createHandles();this._setupEvents();this._refreshValue()},_createHandles:function(){var a=this.options;var c=this.element.find(".ui-slider-handle"),d=[];
var e=a.values&&a.values.length||1;c.length>e&&(c.slice(e).remove(),c=c.slice(0,e));for(a=c.length;a<e;a++)d.push("<span tabindex='0'></span>");this.handles=c.add(b(d.join("")).appendTo(this.element));this._addClass(this.handles,"ui-slider-handle","ui-state-default");this.handle=this.handles.eq(0);this.handles.each(function(a){b(this).data("ui-slider-handle-index",a).attr("tabIndex",0)})},_createRange:function(){var a=this.options;a.range?(!0===a.range&&(a.values?a.values.length&&2!==a.values.length?
a.values=[a.values[0],a.values[0]]:b.isArray(a.values)&&(a.values=a.values.slice(0)):a.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?(this._removeClass(this.range,"ui-slider-range-min ui-slider-range-max"),this.range.css({left:"",bottom:""})):(this.range=b("<div>").appendTo(this.element),this._addClass(this.range,"ui-slider-range")),"min"!==a.range&&"max"!==a.range||this._addClass(this.range,"ui-slider-range-"+a.range)):(this.range&&this.range.remove(),this.range=null)},
_setupEvents:function(){this._off(this.handles);this._on(this.handles,this._handleEvents);this._hoverable(this.handles);this._focusable(this.handles)},_destroy:function(){this.handles.remove();this.range&&this.range.remove();this._mouseDestroy()},_mouseCapture:function(a){var c,d,e=this,f=this.options;if(f.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();var h=this._normValueFromMouse({x:a.pageX,y:a.pageY});
var g=this._valueMax()-this._valueMin()+1;this.handles.each(function(a){var l=Math.abs(h-e.values(a));if(g>l||g===l&&(a===e._lastChangedValue||e.values(a)===f.min))g=l,c=b(this),d=a});if(!1===this._start(a,d))return!1;this._mouseSliding=!0;this._handleIndex=d;this._addClass(c,null,"ui-state-active");c.trigger("focus");var k=c.offset();this._clickOffset=b(a.target).parents().addBack().is(".ui-slider-handle")?{left:a.pageX-k.left-c.width()/2,top:a.pageY-k.top-c.height()/2-(parseInt(c.css("borderTopWidth"),
10)||0)-(parseInt(c.css("borderBottomWidth"),10)||0)+(parseInt(c.css("marginTop"),10)||0)}:{left:0,top:0};this.handles.hasClass("ui-state-hover")||this._slide(a,d,h);return this._animateOff=!0},_mouseStart:function(){return!0},_mouseDrag:function(a){var b=this._normValueFromMouse({x:a.pageX,y:a.pageY});this._slide(a,this._handleIndex,b);return!1},_mouseStop:function(a){this._removeClass(this.handles,null,"ui-state-active");this._mouseSliding=!1;this._stop(a,this._handleIndex);this._change(a,this._handleIndex);
this._clickOffset=this._handleIndex=null;return this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){if("horizontal"===this.orientation){var b=this.elementSize.width;a=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else b=this.elementSize.height,a=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0);b=a/b;1<b&&(b=1);0>b&&(b=0);"vertical"===this.orientation&&
(b=1-b);a=this._valueMax()-this._valueMin();b=this._valueMin()+b*a;return this._trimAlignValue(b)},_uiHash:function(a,b,d){var e={handle:this.handles[a],handleIndex:a,value:void 0!==b?b:this.value()};this._hasMultipleValues()&&(e.value=void 0!==b?b:this.values(a),e.values=d||this.values());return e},_hasMultipleValues:function(){return this.options.values&&this.options.values.length},_start:function(a,b){return this._trigger("start",a,this._uiHash(b))},_slide:function(a,b,d){var e=this.value(),c=
this.values();if(this._hasMultipleValues()){var h=this.values(b?0:1);e=this.values(b);2===this.options.values.length&&!0===this.options.range&&(d=0===b?Math.min(h,d):Math.max(h,d));c[b]=d}d!==e&&!1!==this._trigger("slide",a,this._uiHash(b,d,c))&&(this._hasMultipleValues()?this.values(b,d):this.value(d))},_stop:function(a,b){this._trigger("stop",a,this._uiHash(b))},_change:function(a,b){this._keySliding||this._mouseSliding||(this._lastChangedValue=b,this._trigger("change",a,this._uiHash(b)))},value:function(a){if(arguments.length)this.options.value=
this._trimAlignValue(a),this._refreshValue(),this._change(null,0);else return this._value()},values:function(a,c){var d;if(1<arguments.length)this.options.values[a]=this._trimAlignValue(c),this._refreshValue(),this._change(null,a);else if(arguments.length)if(b.isArray(arguments[0])){var e=this.options.values;var f=arguments[0];for(d=0;d<e.length;d+=1)e[d]=this._trimAlignValue(f[d]),this._change(null,d);this._refreshValue()}else return this._hasMultipleValues()?this._values(a):this.value();else return this._values()},
_setOption:function(a,c){var d=0;"range"===a&&!0===this.options.range&&("min"===c?(this.options.value=this._values(0),this.options.values=null):"max"===c&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null));b.isArray(this.options.values)&&(d=this.options.values.length);this._super(a,c);switch(a){case "orientation":this._detectOrientation();this._removeClass("ui-slider-horizontal ui-slider-vertical")._addClass("ui-slider-"+this.orientation);this._refreshValue();
this.options.range&&this._refreshRange(c);this.handles.css("horizontal"===c?"bottom":"left","");break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(a=d-1;0<=a;a--)this._change(null,a);this._animateOff=!1;break;case "step":case "min":case "max":this._animateOff=!0;this._calculateNewMax();this._refreshValue();this._animateOff=!1;break;case "range":this._animateOff=!0,this._refresh(),this._animateOff=
!1}},_setOptionDisabled:function(a){this._super(a);this._toggleClass(null,"ui-state-disabled",!!a)},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b;if(arguments.length){var d=this.options.values[a];return d=this._trimAlignValue(d)}if(this._hasMultipleValues()){d=this.options.values.slice();for(b=0;b<d.length;b+=1)d[b]=this._trimAlignValue(d[b]);return d}return[]},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=
this._valueMax())return this._valueMax();var b=0<this.options.step?this.options.step:1,d=(a-this._valueMin())%b;a-=d;2*Math.abs(d)>=b&&(a+=0<d?b:-b);return parseFloat(a.toFixed(5))},_calculateNewMax:function(){var a=this.options.max,b=this._valueMin(),d=this.options.step;a=Math.round((a-b)/d)*d+b;a>this.options.max&&(a-=d);this.max=parseFloat(a.toFixed(this._precision()))},_precision:function(){var a=this._precisionOf(this.options.step);null!==this.options.min&&(a=Math.max(a,this._precisionOf(this.options.min)));
return a},_precisionOf:function(a){a=a.toString();var b=a.indexOf(".");return-1===b?0:a.length-b-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshRange:function(a){"vertical"===a&&this.range.css({width:"",left:""});"horizontal"===a&&this.range.css({height:"",bottom:""})},_refreshValue:function(){var a,c=this.options.range,d=this.options,e=this,f=this._animateOff?!1:d.animate,h={};if(this._hasMultipleValues())this.handles.each(function(c){l=(e.values(c)-
e._valueMin())/(e._valueMax()-e._valueMin())*100;h["horizontal"===e.orientation?"left":"bottom"]=l+"%";b(this).stop(1,1)[f?"animate":"css"](h,d.animate);if(!0===e.options.range)if("horizontal"===e.orientation){if(0===c)e.range.stop(1,1)[f?"animate":"css"]({left:l+"%"},d.animate);if(1===c)e.range[f?"animate":"css"]({width:l-a+"%"},{queue:!1,duration:d.animate})}else{if(0===c)e.range.stop(1,1)[f?"animate":"css"]({bottom:l+"%"},d.animate);if(1===c)e.range[f?"animate":"css"]({height:l-a+"%"},{queue:!1,
duration:d.animate})}a=l});else{var g=this.value();var k=this._valueMin();var m=this._valueMax();var l=m!==k?(g-k)/(m-k)*100:0;h["horizontal"===this.orientation?"left":"bottom"]=l+"%";this.handle.stop(1,1)[f?"animate":"css"](h,d.animate);if("min"===c&&"horizontal"===this.orientation)this.range.stop(1,1)[f?"animate":"css"]({width:l+"%"},d.animate);if("max"===c&&"horizontal"===this.orientation)this.range.stop(1,1)[f?"animate":"css"]({width:100-l+"%"},d.animate);if("min"===c&&"vertical"===this.orientation)this.range.stop(1,
1)[f?"animate":"css"]({height:l+"%"},d.animate);if("max"===c&&"vertical"===this.orientation)this.range.stop(1,1)[f?"animate":"css"]({height:100-l+"%"},d.animate)}},_handleEvents:{keydown:function(a){var c,d=b(a.target).data("ui-slider-handle-index");switch(a.keyCode){case b.ui.keyCode.HOME:case b.ui.keyCode.END:case b.ui.keyCode.PAGE_UP:case b.ui.keyCode.PAGE_DOWN:case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(a.preventDefault(),!this._keySliding){this._keySliding=
!0;this._addClass(b(a.target),null,"ui-state-active");var e=this._start(a,d);if(!1===e)return}}var f=this.options.step;e=this._hasMultipleValues()?c=this.values(d):c=this.value();switch(a.keyCode){case b.ui.keyCode.HOME:c=this._valueMin();break;case b.ui.keyCode.END:c=this._valueMax();break;case b.ui.keyCode.PAGE_UP:c=this._trimAlignValue(e+(this._valueMax()-this._valueMin())/this.numPages);break;case b.ui.keyCode.PAGE_DOWN:c=this._trimAlignValue(e-(this._valueMax()-this._valueMin())/this.numPages);
break;case b.ui.keyCode.UP:case b.ui.keyCode.RIGHT:if(e===this._valueMax())return;c=this._trimAlignValue(e+f);break;case b.ui.keyCode.DOWN:case b.ui.keyCode.LEFT:if(e===this._valueMin())return;c=this._trimAlignValue(e-f)}this._slide(a,d,c)},keyup:function(a){var c=b(a.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(a,c),this._change(a,c),this._removeClass(b(a.target),null,"ui-state-active"))}}})});
(function(b){function a(){this.debug=!0;this._curInst=null;this._disabledInputs=[];this._inDialog=this._timepickerShowing=!1;this._dialogClass="ui-timepicker-dialog";this._mainDivId="ui-timepicker-div";this._inlineClass="ui-timepicker-inline";this._currentClass="ui-timepicker-current";this._dayOverClass="ui-timepicker-days-cell-over";this.regional=[];this.regional[""]={hourText:"Hour",minuteText:"Minute",amPmText:["AM","PM"],closeButtonText:"Done",nowButtonText:"Now",deselectButtonText:"Deselect"};
this._defaults={showOn:"focus",button:null,showAnim:"fadeIn",showOptions:{},appendText:"",beforeShow:null,onSelect:null,onClose:null,timeSeparator:":",periodSeparator:" ",showPeriod:!1,showPeriodLabels:!0,showLeadingZero:!0,showMinutesLeadingZero:!0,altField:"",defaultTime:"now",myPosition:"left top",atPosition:"left bottom",onHourShow:null,onMinuteShow:null,hours:{starts:0,ends:23},minutes:{starts:0,ends:55,interval:5,manual:[]},rows:4,showHours:!0,showMinutes:!0,optionalMinutes:!1,showCloseButton:!1,
showNowButton:!1,showDeselectButton:!1,maxTime:{hour:null,minute:null},minTime:{hour:null,minute:null}};b.extend(this._defaults,this.regional[""]);this.tpDiv=b('<div id="'+this._mainDivId+'" class="ui-timepicker ui-widget ui-helper-clearfix ui-corner-all " style="display: none"></div>')}function c(a,c){b.extend(a,c);for(var e in c)if(null==c[e]||void 0==c[e])a[e]=c[e];return a}b.extend(b.ui,{fgtimepicker:{version:"0.3.3"}});var d=(new Date).getTime();b.extend(a.prototype,{markerClassName:"hasTimepicker",
log:function(){this.debug&&console.log.apply("",arguments)},_widgetTimepicker:function(){return this.tpDiv},setDefaults:function(a){c(this._defaults,a||{});return this},_attachTimepicker:function(a,c){var e=null;for(f in this._defaults){var d=a.getAttribute("time:"+f);if(d){e=e||{};try{e[f]=eval(d)}catch(l){e[f]=d}}}var f=a.nodeName.toLowerCase();d="div"==f||"span"==f;a.id||(this.uuid+=1,a.id="tp"+this.uuid);var m=this._newInst(b(a),d);m.settings=b.extend({},c||{},e||{});"input"==f?(this._connectTimepicker(a,
m),this._setTimeFromField(m)):d&&this._inlineTimepicker(a,m)},_newInst:function(a,c){return{id:a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:a,inline:c,tpDiv:c?b('<div class="'+this._inlineClass+' ui-timepicker ui-widget  ui-helper-clearfix"></div>'):this.tpDiv}},_connectTimepicker:function(a,c){var e=b(a);c.append=b([]);c.trigger=b([]);e.hasClass(this.markerClassName)||(this._attachments(e,c),e.addClass(this.markerClassName).keydown(this._doKeyDown).keyup(this._doKeyUp).bind("setData.fgtimepicker",
function(a,b,e){c.settings[b]=e}).bind("getData.fgtimepicker",function(a,b){return this._get(c,b)}),b.data(a,"fgtimepicker",c))},_doKeyDown:function(a){var e=b.fgtimepicker._getInst(a.target),c=!0;e._keyEvent=!0;if(b.fgtimepicker._timepickerShowing)switch(a.keyCode){case 9:b.fgtimepicker._hideTimepicker();c=!1;break;case 13:return b.fgtimepicker._updateSelectedValue(e),b.fgtimepicker._hideTimepicker(),!1;case 27:b.fgtimepicker._hideTimepicker();break;default:c=!1}else 36==a.keyCode&&a.ctrlKey?b.fgtimepicker._showTimepicker(this):
c=!1;c&&(a.preventDefault(),a.stopPropagation())},_doKeyUp:function(a){a=b.fgtimepicker._getInst(a.target);b.fgtimepicker._setTimeFromField(a);b.fgtimepicker._updateTimepicker(a)},_attachments:function(a,c){var e=this._get(c,"appendText"),d=this._get(c,"isRTL");c.append&&c.append.remove();e&&(c.append=b('<span class="'+this._appendClass+'">'+e+"</span>"),a[d?"before":"after"](c.append));a.unbind("focus.fgtimepicker",this._showTimepicker);a.unbind("click.fgtimepicker",this._adjustZIndex);c.trigger&&
c.trigger.remove();e=this._get(c,"showOn");if("focus"==e||"both"==e)a.bind("focus.fgtimepicker",this._showTimepicker),a.bind("click.fgtimepicker",this._adjustZIndex);if("button"==e||"both"==e)e=this._get(c,"button"),null==e&&(e=b('<button class="ui-timepicker-trigger" type="button">...</button>'),a.after(e)),b(e).bind("click.fgtimepicker",function(){b.fgtimepicker._timepickerShowing&&b.fgtimepicker._lastInput==a[0]?b.fgtimepicker._hideTimepicker():c.input.is(":disabled")||b.fgtimepicker._showTimepicker(a[0]);
return!1})},_inlineTimepicker:function(a,c){var e=b(a);e.hasClass(this.markerClassName)||(e.addClass(this.markerClassName).append(c.tpDiv).bind("setData.fgtimepicker",function(a,b,e){c.settings[b]=e}).bind("getData.fgtimepicker",function(a,b){return this._get(c,b)}),b.data(a,"fgtimepicker",c),this._setTimeFromField(c),this._updateTimepicker(c),c.tpDiv.show())},_adjustZIndex:function(a){a=a.target||a;b.fgtimepicker._getInst(a).tpDiv.css("zIndex",b.fgtimepicker._getZIndex(a)+1)},_showTimepicker:function(a){a=
a.target||a;"input"!=a.nodeName.toLowerCase()&&(a=b("input",a.parentNode)[0]);if(!b.fgtimepicker._isDisabledTimepicker(a)&&b.fgtimepicker._lastInput!=a){b.fgtimepicker._hideTimepicker();var e=b.fgtimepicker._getInst(a);b.fgtimepicker._curInst&&b.fgtimepicker._curInst!=e&&b.fgtimepicker._curInst.tpDiv.stop(!0,!0);var d=b.fgtimepicker._get(e,"beforeShow");c(e.settings,d?d.apply(a,[a,e]):{});e.lastVal=null;b.fgtimepicker._lastInput=a;b.fgtimepicker._setTimeFromField(e);b.fgtimepicker._inDialog&&(a.value=
"");b.fgtimepicker._pos||(b.fgtimepicker._pos=b.fgtimepicker._findPos(a),b.fgtimepicker._pos[1]+=a.offsetHeight);var g=!1;b(a).parents().each(function(){g|="fixed"==b(this).css("position");return!g});d={left:b.fgtimepicker._pos[0],top:b.fgtimepicker._pos[1]};b.fgtimepicker._pos=null;e.tpDiv.css({position:"absolute",display:"block",top:"-1000px"});b.fgtimepicker._updateTimepicker(e);e.inline||"object"!=typeof b.ui.position||(e.tpDiv.position({of:e.input,my:b.fgtimepicker._get(e,"myPosition"),at:b.fgtimepicker._get(e,
"atPosition"),collision:"flip"}),d=e.tpDiv.offset(),b.fgtimepicker._pos=[d.top,d.left]);e._hoursClicked=!1;e._minutesClicked=!1;d=b.fgtimepicker._checkOffset(e,d,g);e.tpDiv.css({position:b.fgtimepicker._inDialog&&b.blockUI?"static":g?"fixed":"absolute",display:"none",left:d.left+"px",top:d.top+"px"});if(!e.inline){d=b.fgtimepicker._get(e,"showAnim");var k=b.fgtimepicker._get(e,"duration"),m=function(){b.fgtimepicker._timepickerShowing=!0;var a=b.fgtimepicker._getBorders(e.tpDiv);e.tpDiv.find("iframe.ui-timepicker-cover").css({left:-a[0],
top:-a[1],width:e.tpDiv.outerWidth(),height:e.tpDiv.outerHeight()})};b.fgtimepicker._adjustZIndex(a);b.effects&&b.effects[d]?e.tpDiv.show(d,b.fgtimepicker._get(e,"showOptions"),k,m):e.tpDiv.show(d?k:null,m);d&&k||m();e.input.is(":visible")&&!e.input.is(":disabled")&&e.input.focus();b.fgtimepicker._curInst=e}}},_getZIndex:function(a){a=b(a);for(var e=0,c;a.length&&a[0]!==document;){c=a.css("position");if("absolute"===c||"relative"===c||"fixed"===c)c=parseInt(a.css("zIndex"),10),isNaN(c)||0===c||c>
e&&(e=c);a=a.parent()}return e},_refreshTimepicker:function(a){(a=this._getInst(a))&&this._updateTimepicker(a)},_updateTimepicker:function(a){a.tpDiv.empty().append(this._generateHTML(a));this._rebindDialogEvents(a)},_rebindDialogEvents:function(a){var e=b.fgtimepicker._getBorders(a.tpDiv),c=this;a.tpDiv.find("iframe.ui-timepicker-cover").css({left:-e[0],top:-e[1],width:a.tpDiv.outerWidth(),height:a.tpDiv.outerHeight()}).end().find(".ui-timepicker-minute-cell").unbind().bind("click",{fromDoubleClick:!1},
b.proxy(b.fgtimepicker.selectMinutes,this)).bind("dblclick",{fromDoubleClick:!0},b.proxy(b.fgtimepicker.selectMinutes,this)).end().find(".ui-timepicker-hour-cell").unbind().bind("click",{fromDoubleClick:!1},b.proxy(b.fgtimepicker.selectHours,this)).bind("dblclick",{fromDoubleClick:!0},b.proxy(b.fgtimepicker.selectHours,this)).end().find(".ui-timepicker td a").unbind().bind("mouseout",function(){b(this).removeClass("ui-state-hover");-1!=this.className.indexOf("ui-timepicker-prev")&&b(this).removeClass("ui-timepicker-prev-hover");
-1!=this.className.indexOf("ui-timepicker-next")&&b(this).removeClass("ui-timepicker-next-hover")}).bind("mouseover",function(){c._isDisabledTimepicker(a.inline?a.tpDiv.parent()[0]:a.input[0])||(b(this).parents(".ui-timepicker-calendar").find("a").removeClass("ui-state-hover"),b(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-timepicker-prev")&&b(this).addClass("ui-timepicker-prev-hover"),-1!=this.className.indexOf("ui-timepicker-next")&&b(this).addClass("ui-timepicker-next-hover"))}).end().find("."+
this._dayOverClass+" a").trigger("mouseover").end().find(".ui-timepicker-now").bind("click",function(a){b.fgtimepicker.selectNow(a)}).end().find(".ui-timepicker-deselect").bind("click",function(a){b.fgtimepicker.deselectTime(a)}).end().find(".ui-timepicker-close").bind("click",function(a){b.fgtimepicker._hideTimepicker()}).end()},_generateHTML:function(a){var b,e,c=1==this._get(a,"showPeriod"),d=1==this._get(a,"showPeriodLabels"),m=1==this._get(a,"showLeadingZero");var l=1==this._get(a,"showHours");
var n=1==this._get(a,"showMinutes"),q=this._get(a,"amPmText"),p=this._get(a,"rows"),u=0,z=0,t=e=0,v=0,r=0,w=[],B=this._get(a,"hours"),A=0;var y=this._get(a,"hourText");var G=this._get(a,"showCloseButton"),H=this._get(a,"closeButtonText"),C=this._get(a,"showNowButton"),U=this._get(a,"nowButtonText"),x=this._get(a,"showDeselectButton"),Y=this._get(a,"deselectButtonText"),aa=G||C||x;for(b=B.starts;b<=B.ends;b++)w.push(b);b=Math.ceil(w.length/p);if(d){for(A=0;A<w.length;A++)12>w[A]?e++:t++;A=0;u=Math.floor(e/
w.length*p);z=Math.floor(t/w.length*p);p!=u+z&&(e&&(!t||!u||z&&e/u>=t/z)?u++:z++);v=Math.min(u,1);r=u+1;b=0==u?Math.ceil(t/z):0==z?Math.ceil(e/u):Math.ceil(Math.max(e/u,t/z))}e='<table class="ui-timepicker-table ui-widget-content ui-corner-all"><tr>';if(l){e+='<td class="ui-timepicker-hours"><div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+y+'</div><table class="ui-timepicker">';for(l=1;l<=p;l++){e+="<tr>";l==v&&d&&(e+='<th rowspan="'+u.toString()+'" class="periods" scope="row">'+
q[0]+"</th>");l==r&&d&&(e+='<th rowspan="'+z.toString()+'" class="periods" scope="row">'+q[1]+"</th>");for(y=1;y<=b;y++)d&&l<r&&12<=w[A]?e+=this._generateHTMLHourCell(a,void 0,c,m):(e+=this._generateHTMLHourCell(a,w[A],c,m),A++);e+="</tr>"}e+="</table></td>"}n&&(e=e+'<td class="ui-timepicker-minutes">'+this._generateHTMLMinutes(a),e+="</td>");e+="</tr>";aa&&(c='<tr><td colspan="3"><div class="ui-timepicker-buttonpane ui-widget-content">',C&&(c+='<button type="button" class="ui-timepicker-now ui-state-default ui-corner-all"  data-timepicker-instance-id="#'+
a.id.replace(/\\\\/g,"\\")+'" >'+U+"</button>"),x&&(c+='<button type="button" class="ui-timepicker-deselect ui-state-default ui-corner-all"  data-timepicker-instance-id="#'+a.id.replace(/\\\\/g,"\\")+'" >'+Y+"</button>"),G&&(c+='<button type="button" class="ui-timepicker-close ui-state-default ui-corner-all"  data-timepicker-instance-id="#'+a.id.replace(/\\\\/g,"\\")+'" >'+H+"</button>"),e+=c+"</div></td></tr>");return e+"</table>"},_updateMinuteDisplay:function(a){var b=this._generateHTMLMinutes(a);
a.tpDiv.find("td.ui-timepicker-minutes").html(b);this._rebindDialogEvents(a)},_generateHTMLMinutes:function(a){var e,c="",d=this._get(a,"rows"),k=[];var m=this._get(a,"minutes");var l=null,n=0,q=1==this._get(a,"showMinutesLeadingZero"),p=this._get(a,"onMinuteShow"),u=this._get(a,"minuteText");m.starts||(m.starts=0);m.ends||(m.ends=59);m.manual||(m.manual=[]);for(e=m.starts;e<=m.ends;e+=m.interval)k.push(e);for(i=0;i<m.manual.length;i++)e=m.manual[i],"number"!=typeof e||0>e||59<e||0<=b.inArray(e,k)||
k.push(e);k.sort(function(a,b){return a-b});l=Math.round(k.length/d+.49);if(p&&0==p.apply(a.input?a.input[0]:null,[a.hours,a.minutes]))for(n=0;n<k.length;n+=1)if(e=k[n],p.apply(a.input?a.input[0]:null,[a.hours,e])){a.minutes=e;break}c+='<div class="ui-timepicker-title ui-widget-header ui-helper-clearfix ui-corner-all">'+u+'</div><table class="ui-timepicker">';n=0;for(m=1;m<=d;m++){for(c+="<tr>";n<m*l;)e=k[n],p="",void 0!==e&&(p=10>e&&q?"0"+e.toString():e.toString()),c+=this._generateHTMLMinuteCell(a,
e,p),n++;c+="</tr>"}return c+"</table>"},_generateHTMLHourCell:function(a,b,c,d){var e=b;12<b&&c&&(e=b-12);0==e&&c&&(e=12);10>e&&d&&(e="0"+e);c=!0;d=this._get(a,"onHourShow");var f=this._get(a,"maxTime"),g=this._get(a,"minTime");if(void 0==b)return'<td><span class="ui-state-default ui-state-disabled">&nbsp;</span></td>';d&&(c=d.apply(a.input?a.input[0]:null,[b]));c&&(!isNaN(parseInt(f.hour))&&b>f.hour&&(c=!1),!isNaN(parseInt(g.hour))&&b<g.hour&&(c=!1));return c?'<td class="ui-timepicker-hour-cell" data-timepicker-instance-id="#'+
a.id.replace(/\\\\/g,"\\")+'" data-hour="'+b.toString()+'"><a class="ui-state-default '+(b==a.hours?"ui-state-active":"")+'">'+e.toString()+"</a></td>":'<td><span class="ui-state-default ui-state-disabled '+(b==a.hours?" ui-state-active ":" ")+'">'+e.toString()+"</span></td>"},_generateHTMLMinuteCell:function(a,b,c){var e=!0,d=a.hours,f=this._get(a,"onMinuteShow"),h=this._get(a,"maxTime"),n=this._get(a,"minTime");f&&(e=f.apply(a.input?a.input[0]:null,[a.hours,b]));if(void 0==b)return'<td><span class="ui-state-default ui-state-disabled">&nbsp;</span></td>';
e&&null!==d&&(!isNaN(parseInt(h.hour))&&!isNaN(parseInt(h.minute))&&d>=h.hour&&b>h.minute&&(e=!1),!isNaN(parseInt(n.hour))&&!isNaN(parseInt(n.minute))&&d<=n.hour&&b<n.minute&&(e=!1));return e?'<td class="ui-timepicker-minute-cell" data-timepicker-instance-id="#'+a.id.replace(/\\\\/g,"\\")+'" data-minute="'+b.toString()+'" ><a class="ui-state-default '+(b==a.minutes?"ui-state-active":"")+'" >'+c+"</a></td>":'<td><span class="ui-state-default ui-state-disabled" >'+c+"</span></td>"},_destroyTimepicker:function(a){var e=
b(a),c=b.data(a,"fgtimepicker");if(e.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();b.removeData(a,"fgtimepicker");"input"==d?(c.append.remove(),c.trigger.remove(),e.removeClass(this.markerClassName).unbind("focus.fgtimepicker",this._showTimepicker).unbind("click.fgtimepicker",this._adjustZIndex)):"div"!=d&&"span"!=d||e.removeClass(this.markerClassName).empty()}},_enableTimepicker:function(a){var e=b(a),c=e.attr("id"),d=b.data(a,"fgtimepicker");if(e.hasClass(this.markerClassName)){var k=
a.nodeName.toLowerCase();if("input"==k)a.disabled=!1,a=this._get(d,"button"),b(a).removeClass("ui-state-disabled").disabled=!1,d.trigger.filter("button").each(function(){this.disabled=!1}).end();else if("div"==k||"span"==k)d=e.children("."+this._inlineClass),d.children().removeClass("ui-state-disabled"),d.find("button").each(function(){this.disabled=!1});this._disabledInputs=b.map(this._disabledInputs,function(a){return a==c?null:a})}},_disableTimepicker:function(a){var e=b(a),c=b.data(a,"fgtimepicker");
if(e.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();if("input"==d)d=this._get(c,"button"),b(d).addClass("ui-state-disabled").disabled=!0,a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end();else if("div"==d||"span"==d)c=e.children("."+this._inlineClass),c.children().addClass("ui-state-disabled"),c.find("button").each(function(){this.disabled=!0});this._disabledInputs=b.map(this._disabledInputs,function(b){return b==a?null:b});this._disabledInputs[this._disabledInputs.length]=
e.attr("id")}},_isDisabledTimepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_checkOffset:function(a,c,d){var e=a.tpDiv.outerWidth(),f=a.tpDiv.outerHeight(),h=a.input?a.input.outerWidth():0,l=a.input?a.input.outerHeight():0,n=document.documentElement.clientWidth+b(document).scrollLeft(),q=document.documentElement.clientHeight+b(document).scrollTop();c.left-=this._get(a,"isRTL")?e-h:0;c.left-=d&&c.left==a.input.offset().left?
b(document).scrollLeft():0;c.top-=d&&c.top==a.input.offset().top+l?b(document).scrollTop():0;c.left-=Math.min(c.left,c.left+e>n&&n>e?Math.abs(c.left+e-n):0);c.top-=Math.min(c.top,c.top+f>q&&q>f?Math.abs(f+l):0);return c},_findPos:function(a){var c=this._getInst(a);for(c=this._get(c,"isRTL");a&&("hidden"==a.type||1!=a.nodeType);)a=a[c?"previousSibling":"nextSibling"];a=b(a).offset();return[a.left,a.top]},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),
parseFloat(b(a.css("border-top-width")))]},_checkExternalClick:function(a){b.fgtimepicker._curInst&&(a=b(a.target),a[0].id==b.fgtimepicker._mainDivId||0!=a.parents("#"+b.fgtimepicker._mainDivId).length||a.hasClass(b.fgtimepicker.markerClassName)||a.hasClass(b.fgtimepicker._triggerClass)||!b.fgtimepicker._timepickerShowing||b.fgtimepicker._inDialog&&b.blockUI||b.fgtimepicker._hideTimepicker())},_hideTimepicker:function(a){var c=this._curInst;if(c&&(!a||c==b.data(a,"fgtimepicker"))&&this._timepickerShowing){a=
this._get(c,"showAnim");var e=this._get(c,"duration"),d=function(){b.fgtimepicker._tidyDialog(c);this._curInst=null};if(b.effects&&b.effects[a])c.tpDiv.hide(a,b.fgtimepicker._get(c,"showOptions"),e,d);else c.tpDiv["slideDown"==a?"slideUp":"fadeIn"==a?"fadeOut":"hide"](a?e:null,d);a||d();this._timepickerShowing=!1;this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),b.blockUI&&(b.unblockUI(),b("body").append(this.tpDiv)));this._inDialog=!1;(a=this._get(c,
"onClose"))&&a.apply(c.input?c.input[0]:null,[c.input?c.input.val():"",c])}},_tidyDialog:function(a){a.tpDiv.removeClass(this._dialogClass).unbind(".ui-timepicker")},_getInst:function(a){try{return b.data(a,"fgtimepicker")}catch(f){throw"Missing instance data for this timepicker";}},_get:function(a,b){return void 0!==a.settings[b]?a.settings[b]:this._defaults[b]},_setTimeFromField:function(a){if(a.input.val()!=a.lastVal){var c=this._get(a,"defaultTime");c="now"==c?this._getCurrentTimeRounded(a):c;
0==a.inline&&""!=a.input.val()&&(c=a.input.val());if(c instanceof Date)a.hours=c.getHours(),a.minutes=c.getMinutes();else{var e=a.lastVal=c;""==c?(a.hours=-1,a.minutes=-1):(c=this.parseTime(a,e),a.hours=c.hours,a.minutes=c.minutes)}b.fgtimepicker._updateTimepicker(a)}},_optionTimepicker:function(a,d,h){var e=this._getInst(a);if(2==arguments.length&&"string"==typeof d)return"defaults"==d?b.extend({},b.fgtimepicker._defaults):e?"all"==d?b.extend({},e.settings):this._get(e,d):null;var f=d||{};"string"==
typeof d&&(f={},f[d]=h);e&&(c(e.settings,f),this._curInst==e&&(this._hideTimepicker(),this._updateTimepicker(e)),e.inline&&this._updateTimepicker(e))},_setTimeTimepicker:function(a,b){if(a=this._getInst(a))this._setTime(a,b),this._updateTimepicker(a),this._updateAlternate(a,b)},_setTime:function(a,b,c){var e=a.hours,d=a.minutes;b instanceof Date?(a.hours=b.getHours(),a.minutes=b.getMinutes()):(b=this.parseTime(a,b),a.hours=b.hours,a.minutes=b.minutes);e==a.hours&&d==a.minutes||c||a.input.trigger("change");
this._updateTimepicker(a);this._updateSelectedValue(a)},_getCurrentTimeRounded:function(a){var b=new Date,c=b.getMinutes();a=this._get(a,"minutes");b.setMinutes(Math.round(c/a.interval)*a.interval);return b},parseTime:function(a,b){var c={hours:-1,minutes:-1};if(!b)return"";var e=this._get(a,"timeSeparator"),d=this._get(a,"amPmText"),f=this._get(a,"showHours"),l=this._get(a,"showMinutes"),n=this._get(a,"optionalMinutes");a=1==this._get(a,"showPeriod");e=b.indexOf(e);-1!=e?(c.hours=parseInt(b.substr(0,
e),10),c.minutes=parseInt(b.substr(e+1),10)):!f||l&&!n?!f&&l&&(c.minutes=parseInt(b,10)):c.hours=parseInt(b,10);f&&(b=b.toUpperCase(),12>c.hours&&a&&-1!=b.indexOf(d[1].toUpperCase())&&(c.hours+=12),12==c.hours&&a&&-1!=b.indexOf(d[0].toUpperCase())&&(c.hours=0));return c},selectNow:function(a){a=b(a.target).attr("data-timepicker-instance-id");a=b(a);a=this._getInst(a[0]);var c=new Date;a.hours=c.getHours();a.minutes=c.getMinutes();this._updateSelectedValue(a);this._updateTimepicker(a);this._hideTimepicker()},
deselectTime:function(a){a=b(a.target).attr("data-timepicker-instance-id");a=b(a);a=this._getInst(a[0]);a.hours=-1;a.minutes=-1;this._updateSelectedValue(a);this._hideTimepicker()},selectHours:function(a){var c=b(a.currentTarget),e=c.attr("data-timepicker-instance-id"),d=parseInt(c.attr("data-hour"));a=a.data.fromDoubleClick;var k=b(e);e=this._getInst(k[0]);var m=1==this._get(e,"showMinutes");if(b.fgtimepicker._isDisabledTimepicker(k.attr("id")))return!1;c.parents(".ui-timepicker-hours:first").find("a").removeClass("ui-state-active");
c.children("a").addClass("ui-state-active");e.hours=d;c=this._get(e,"onMinuteShow");d=this._get(e,"maxTime");k=this._get(e,"minTime");(c||d.minute||k.minute)&&this._updateMinuteDisplay(e);this._updateSelectedValue(e);e._hoursClicked=!0;(e._minutesClicked||a||0==m)&&b.fgtimepicker._hideTimepicker();return!1},selectMinutes:function(a){var c=b(a.currentTarget),e=c.attr("data-timepicker-instance-id"),d=parseInt(c.attr("data-minute"));a=a.data.fromDoubleClick;e=b(e);var k=this._getInst(e[0]),m=1==this._get(k,
"showHours");if(b.fgtimepicker._isDisabledTimepicker(e.attr("id")))return!1;c.parents(".ui-timepicker-minutes:first").find("a").removeClass("ui-state-active");c.children("a").addClass("ui-state-active");k.minutes=d;this._updateSelectedValue(k);k._minutesClicked=!0;(k._hoursClicked||a||0==m)&&b.fgtimepicker._hideTimepicker();return!1},_updateSelectedValue:function(a){var b=this._getParsedTime(a);a.input&&(a.input.val(b),a.input.trigger("change"));var c=this._get(a,"onSelect");c&&c.apply(a.input?a.input[0]:
null,[b,a]);this._updateAlternate(a,b);return b},_getParsedTime:function(a){if(-1==a.hours&&-1==a.minutes)return"";if(a.hours<a.hours.starts||a.hours>a.hours.ends)a.hours=0;if(a.minutes<a.minutes.starts||a.minutes>a.minutes.ends)a.minutes=0;var b="",c=1==this._get(a,"showPeriod"),e=1==this._get(a,"showLeadingZero"),d=1==this._get(a,"showHours"),m=1==this._get(a,"showMinutes"),l=1==this._get(a,"optionalMinutes"),n=this._get(a,"amPmText"),q=a.hours?a.hours:0,p=a.minutes?a.minutes:0,u=q?q:0;q="";-1==
u&&(u=0);-1==p&&(p=0);c&&(0==a.hours&&(u=12),12>a.hours?b=n[0]:(b=n[1],12<u&&(u-=12)));c=u.toString();e&&10>u&&(c="0"+c);e=p.toString();10>p&&(e="0"+e);d&&(q+=c);!d||!m||l&&0==e||(q+=this._get(a,"timeSeparator"));!m||l&&0==e||(q+=e);d&&0<b.length&&(q+=this._get(a,"periodSeparator")+b);return q},_updateAlternate:function(a,c){(a=this._get(a,"altField"))&&b(a).each(function(a,e){b(e).val(c)})},_getTimeAsDateTimepicker:function(a){a=this._getInst(a);if(-1==a.hours&&-1==a.minutes)return"";if(a.hours<
a.hours.starts||a.hours>a.hours.ends)a.hours=0;if(a.minutes<a.minutes.starts||a.minutes>a.minutes.ends)a.minutes=0;return new Date(0,0,0,a.hours,a.minutes,0)},_getTimeTimepicker:function(a){a=this._getInst(a);return this._getParsedTime(a)},_getHourTimepicker:function(a){a=this._getInst(a);return void 0==a?-1:a.hours},_getMinuteTimepicker:function(a){a=this._getInst(a);return void 0==a?-1:a.minutes}});b.fn.fgtimepicker=function(a){b.fgtimepicker.initialized||(b(document).mousedown(b.fgtimepicker._checkExternalClick),
b.fgtimepicker.initialized=!0);0===b("#"+b.fgtimepicker._mainDivId).length&&b("body").append(b.fgtimepicker.tpDiv);var c=Array.prototype.slice.call(arguments,1);return"string"==typeof a&&("getTime"==a||"getTimeAsDate"==a||"getHour"==a||"getMinute"==a)||"option"==a&&2==arguments.length&&"string"==typeof arguments[1]?b.fgtimepicker["_"+a+"Timepicker"].apply(b.fgtimepicker,[this[0]].concat(c)):this.each(function(){"string"==typeof a?b.fgtimepicker["_"+a+"Timepicker"].apply(b.fgtimepicker,[this].concat(c)):
b.fgtimepicker._attachTimepicker(this,a)})};b.fgtimepicker=new a;b.fgtimepicker.initialized=!1;b.fgtimepicker.uuid=(new Date).getTime();b.fgtimepicker.version="0.3.3";window["TP_jQuery_"+d]=b})(jQuery);
(function(b){b.ui.timepicker=b.ui.timepicker||{};if(!b.ui.timepicker.version){b.extend(b.ui,{timepicker:{version:"1.5.0"}});var a=function(){this.regional=[];this.regional[""]={currentText:"Now",closeText:"Done",amNames:["AM","A"],pmNames:["PM","P"],timeFormat:"HH:mm",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",millisecText:"Millisecond",microsecText:"Microsecond",timezoneText:"Time Zone",isRTL:!1};this._defaults={showButtonPanel:!0,
timeOnly:!1,timeOnlyShowDate:!1,showHour:null,showMinute:null,showSecond:null,showMillisec:null,showMicrosec:null,showTimezone:null,showTime:!0,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,stepMicrosec:1,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,microsecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,microsecMax:999,minDateTime:null,maxDateTime:null,maxTime:null,minTime:null,onSelect:null,hourGrid:0,minuteGrid:0,
secondGrid:0,millisecGrid:0,microsecGrid:0,alwaysSetTime:!0,separator:" ",altFieldTimeOnly:!0,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,altRedirectFocus:!0,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:!0,timezoneList:null,addSliderAccess:!1,sliderAccessArgs:null,controlType:"slider",defaultValue:null,parse:"strict"};b.extend(this._defaults,this.regional[""])};b.extend(a.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,
millisec_slider:null,microsec_slider:null,timezone_select:null,maxTime:null,minTime:null,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,microsecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,microsecMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:null,units:["hour","minute","second","millisec",
"microsec"],support:{},control:null,setDefaults:function(a){d(this._defaults,a||{});return this},_newInst:function(c,d){var f=new a,g={},l={};for(n in this._defaults)if(this._defaults.hasOwnProperty(n)){var h=c.attr("time:"+n);if(h)try{g[n]=eval(h)}catch(r){g[n]=h}}var n={beforeShow:function(a,d){if(b.isFunction(f._defaults.evnts.beforeShow))return f._defaults.evnts.beforeShow.call(c[0],a,d,f)},onChangeMonthYear:function(a,d,e){f._updateDateTime(e);b.isFunction(f._defaults.evnts.onChangeMonthYear)&&
f._defaults.evnts.onChangeMonthYear.call(c[0],a,d,e,f)},onClose:function(a,d){!0===f.timeDefined&&""!==c.val()&&f._updateDateTime(d);b.isFunction(f._defaults.evnts.onClose)&&f._defaults.evnts.onClose.call(c[0],a,d,f)}};for(k in n)n.hasOwnProperty(k)&&(l[k]=d[k]||null);f._defaults=b.extend({},this._defaults,g,d,n,{evnts:l,timepicker:f});f.amNames=b.map(f._defaults.amNames,function(a){return a.toUpperCase()});f.pmNames=b.map(f._defaults.pmNames,function(a){return a.toUpperCase()});f.support=e(f._defaults.timeFormat+
(f._defaults.pickerTimeFormat?f._defaults.pickerTimeFormat:"")+(f._defaults.altTimeFormat?f._defaults.altTimeFormat:""));"string"===typeof f._defaults.controlType?("slider"===f._defaults.controlType&&"undefined"===typeof b.ui.slider&&(f._defaults.controlType="select"),f.control=f._controls[f._defaults.controlType]):f.control=f._defaults.controlType;d=[-720,-660,-600,-570,-540,-480,-420,-360,-300,-270,-240,-210,-180,-120,-60,0,60,120,180,210,240,270,300,330,345,360,390,420,480,525,540,570,600,630,
660,690,720,765,780,840];null!==f._defaults.timezoneList&&(d=f._defaults.timezoneList);g=d.length;l=0;var k=null;if(0<g&&"object"!==typeof d[0])for(;l<g;l++)k=d[l],d[l]={value:k,label:b.timepicker.timezoneOffsetString(k,f.support.iso8601)};f._defaults.timezoneList=d;f.timezone=null!==f._defaults.timezone?b.timepicker.timezoneOffsetNumber(f._defaults.timezone):-1*(new Date).getTimezoneOffset();f.hour=f._defaults.hour<f._defaults.hourMin?f._defaults.hourMin:f._defaults.hour>f._defaults.hourMax?f._defaults.hourMax:
f._defaults.hour;f.minute=f._defaults.minute<f._defaults.minuteMin?f._defaults.minuteMin:f._defaults.minute>f._defaults.minuteMax?f._defaults.minuteMax:f._defaults.minute;f.second=f._defaults.second<f._defaults.secondMin?f._defaults.secondMin:f._defaults.second>f._defaults.secondMax?f._defaults.secondMax:f._defaults.second;f.millisec=f._defaults.millisec<f._defaults.millisecMin?f._defaults.millisecMin:f._defaults.millisec>f._defaults.millisecMax?f._defaults.millisecMax:f._defaults.millisec;f.microsec=
f._defaults.microsec<f._defaults.microsecMin?f._defaults.microsecMin:f._defaults.microsec>f._defaults.microsecMax?f._defaults.microsecMax:f._defaults.microsec;f.ampm="";f.$input=c;f._defaults.altField&&(f.$altInput=b(f._defaults.altField),!0===f._defaults.altRedirectFocus&&f.$altInput.css({cursor:"pointer"}).focus(function(){c.trigger("focus")}));if(0===f._defaults.minDate||0===f._defaults.minDateTime)f._defaults.minDate=new Date;if(0===f._defaults.maxDate||0===f._defaults.maxDateTime)f._defaults.maxDate=
new Date;void 0!==f._defaults.minDate&&f._defaults.minDate instanceof Date&&(f._defaults.minDateTime=new Date(f._defaults.minDate.getTime()));void 0!==f._defaults.minDateTime&&f._defaults.minDateTime instanceof Date&&(f._defaults.minDate=new Date(f._defaults.minDateTime.getTime()));void 0!==f._defaults.maxDate&&f._defaults.maxDate instanceof Date&&(f._defaults.maxDateTime=new Date(f._defaults.maxDate.getTime()));void 0!==f._defaults.maxDateTime&&f._defaults.maxDateTime instanceof Date&&(f._defaults.maxDate=
new Date(f._defaults.maxDateTime.getTime()));f.$input.bind("focus",function(){f._onFocus()});return f},_addTimePicker:function(a){var b=this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val();this.timeDefined=this._parseTime(b);this._limitMinMaxDateTime(a,!1);this._injectTimePicker()},_parseTime:function(a,c){this.inst||(this.inst=b.datepicker._getInst(this.$input[0]));if(c||!this._defaults.timeOnly){c=b.datepicker._get(this.inst,"dateFormat");
try{var d=k(c,this._defaults.timeFormat,a,b.datepicker._getFormatConfig(this.inst),this._defaults);if(!d.timeObj)return!1;b.extend(this,d.timeObj)}catch(p){return b.timepicker.log("Error parsing the date/time string: "+p+"\ndate/time string = "+a+"\ntimeFormat = "+this._defaults.timeFormat+"\ndateFormat = "+c),!1}}else{a=b.datepicker.parseTime(this._defaults.timeFormat,a,this._defaults);if(!a)return!1;b.extend(this,a)}return!0},_injectTimePicker:function(){var a=this.inst.dpDiv,c=this.inst.settings,
d=this,e="",f="",g=null,h={},k={},r=null,w=0,B=0;if(0===a.find("div.ui-timepicker-div").length&&c.showTimepicker){r='<div class="ui-timepicker-div'+(c.isRTL?" ui-timepicker-rtl":"")+'"><dl><dt class="ui_tpicker_time_label"'+(c.showTime?"":' style="display:none;"')+">"+c.timeText+'</dt><dd class="ui_tpicker_time"'+(c.showTime?"":' style="display:none;"')+"></dd>";w=0;for(B=this.units.length;w<B;w++){e=this.units[w];f=e.substr(0,1).toUpperCase()+e.substr(1);g=null!==c["show"+f]?c["show"+f]:this.support[e];
h[e]=parseInt(c[e+"Max"]-(c[e+"Max"]-c[e+"Min"])%c["step"+f],10);k[e]=0;r+='<dt class="ui_tpicker_'+e+'_label"'+(g?"":' style="display:none;"')+">"+c[e+"Text"]+'</dt><dd class="ui_tpicker_'+e+'"><div class="ui_tpicker_'+e+'_slider"'+(g?"":' style="display:none;"')+"></div>";if(g&&0<c[e+"Grid"]){r+='<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>';if("hour"===e)for(f=c[e+"Min"];f<=h[e];f+=parseInt(c[e+"Grid"],10))k[e]++,g=b.datepicker.formatTime(this.support.ampm?"hht":"HH",
{hour:f},c),r+='<td data-for="'+e+'">'+g+"</td>";else for(f=c[e+"Min"];f<=h[e];f+=parseInt(c[e+"Grid"],10))k[e]++,r+='<td data-for="'+e+'">'+(10>f?"0":"")+f+"</td>";r+="</tr></table></div>"}r+="</dd>"}w=null!==c.showTimezone?c.showTimezone:this.support.timezone;r+='<dt class="ui_tpicker_timezone_label"'+(w?"":' style="display:none;"')+">"+c.timezoneText+"</dt>";var A=b(r+('<dd class="ui_tpicker_timezone" '+(w?"":' style="display:none;"')+"></dd></dl></div>"));!0===c.timeOnly&&(A.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+
c.timeOnlyTitle+"</div></div>"),a.find(".ui-datepicker-header, .ui-datepicker-calendar").hide());w=0;for(B=d.units.length;w<B;w++)e=d.units[w],f=e.substr(0,1).toUpperCase()+e.substr(1),g=null!==c["show"+f]?c["show"+f]:this.support[e],d[e+"_slider"]=d.control.create(d,A.find(".ui_tpicker_"+e+"_slider"),e,d[e],c[e+"Min"],h[e],c["step"+f]),g&&0<c[e+"Grid"]&&(r=100*k[e]*c[e+"Grid"]/(h[e]-c[e+"Min"]),A.find(".ui_tpicker_"+e+" table").css({width:r+"%",marginLeft:c.isRTL?"0":r/(-2*k[e])+"%",marginRight:c.isRTL?
r/(-2*k[e])+"%":"0",borderCollapse:"collapse"}).find("td").click(function(a){var c=b(this),f=c.html();a=parseInt(f.replace(/[^0-9]/g),10);f=f.replace(/[^apm]/ig);c=c.data("for");"hour"===c&&(-1!==f.indexOf("p")&&12>a?a+=12:-1!==f.indexOf("a")&&12===a&&(a=0));d.control.value(d,d[c+"_slider"],e,a);d._onTimeChange();d._onSelectHandler()}).css({cursor:"pointer",width:100/k[e]+"%",textAlign:"center",overflow:"hidden"}));this.timezone_select=A.find(".ui_tpicker_timezone").append("<select></select>").find("select");
b.fn.append.apply(this.timezone_select,b.map(c.timezoneList,function(a,c){return b("<option />").val("object"===typeof a?a.value:a).text("object"===typeof a?a.label:a)}));"undefined"!==typeof this.timezone&&null!==this.timezone&&""!==this.timezone?-1*(new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12)).getTimezoneOffset()===this.timezone?m(d):this.timezone_select.val(this.timezone):"undefined"!==typeof this.hour&&null!==this.hour&&""!==this.hour?this.timezone_select.val(c.timezone):
m(d);this.timezone_select.change(function(){d._onTimeChange();d._onSelectHandler()});c=a.find(".ui-datepicker-buttonpane");c.length?c.before(A):a.append(A);this.$timeObj=A.find(".ui_tpicker_time");null!==this.inst&&(a=this.timeDefined,this._onTimeChange(),this.timeDefined=a);if(this._defaults.addSliderAccess){var y=this._defaults.sliderAccessArgs,G=this._defaults.isRTL;y.isRTL=G;setTimeout(function(){if(0===A.find(".ui-slider-access").length){A.find(".ui-slider:visible").sliderAccess(y);var a=A.find(".ui-slider-access:eq(0)").outerWidth(!0);
a&&A.find("table:visible").each(function(){var c=b(this),d=c.outerWidth(),e=c.css(G?"marginRight":"marginLeft").toString().replace("%",""),f=d-a,g={width:f,marginRight:0,marginLeft:0};g[G?"marginRight":"marginLeft"]=e*f/d+"%";c.css(g)})}},10)}d._limitMinMaxDateTime(this.inst,!0)}},_limitMinMaxDateTime:function(a,c){var d=this._defaults,e=new Date(a.selectedYear,a.selectedMonth,a.selectedDay);if(this._defaults.showTimepicker){if(null!==b.datepicker._get(a,"minDateTime")&&void 0!==b.datepicker._get(a,
"minDateTime")&&e){var f=b.datepicker._get(a,"minDateTime"),g=new Date(f.getFullYear(),f.getMonth(),f.getDate(),0,0,0,0);if(null===this.hourMinOriginal||null===this.minuteMinOriginal||null===this.secondMinOriginal||null===this.millisecMinOriginal||null===this.microsecMinOriginal)this.hourMinOriginal=d.hourMin,this.minuteMinOriginal=d.minuteMin,this.secondMinOriginal=d.secondMin,this.millisecMinOriginal=d.millisecMin,this.microsecMinOriginal=d.microsecMin;a.settings.timeOnly||g.getTime()===e.getTime()?
(this._defaults.hourMin=f.getHours(),this.hour<=this._defaults.hourMin?(this.hour=this._defaults.hourMin,this._defaults.minuteMin=f.getMinutes(),this.minute<=this._defaults.minuteMin?(this.minute=this._defaults.minuteMin,this._defaults.secondMin=f.getSeconds(),this.second<=this._defaults.secondMin?(this.second=this._defaults.secondMin,this._defaults.millisecMin=f.getMilliseconds(),this.millisec<=this._defaults.millisecMin?(this.millisec=this._defaults.millisecMin,this._defaults.microsecMin=f.getMicroseconds()):
(this.microsec<this._defaults.microsecMin&&(this.microsec=this._defaults.microsecMin),this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=
this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.hourMin=this.hourMinOriginal,this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)}if(null!==b.datepicker._get(a,"maxDateTime")&&void 0!==b.datepicker._get(a,"maxDateTime")&&e){f=b.datepicker._get(a,"maxDateTime");g=new Date(f.getFullYear(),f.getMonth(),f.getDate(),
0,0,0,0);if(null===this.hourMaxOriginal||null===this.minuteMaxOriginal||null===this.secondMaxOriginal||null===this.millisecMaxOriginal)this.hourMaxOriginal=d.hourMax,this.minuteMaxOriginal=d.minuteMax,this.secondMaxOriginal=d.secondMax,this.millisecMaxOriginal=d.millisecMax,this.microsecMaxOriginal=d.microsecMax;a.settings.timeOnly||g.getTime()===e.getTime()?(this._defaults.hourMax=f.getHours(),this.hour>=this._defaults.hourMax?(this.hour=this._defaults.hourMax,this._defaults.minuteMax=f.getMinutes(),
this.minute>=this._defaults.minuteMax?(this.minute=this._defaults.minuteMax,this._defaults.secondMax=f.getSeconds(),this.second>=this._defaults.secondMax?(this.second=this._defaults.secondMax,this._defaults.millisecMax=f.getMilliseconds(),this.millisec>=this._defaults.millisecMax?(this.millisec=this._defaults.millisecMax,this._defaults.microsecMax=f.getMicroseconds()):(this.microsec>this._defaults.microsecMax&&(this.microsec=this._defaults.microsecMax),this._defaults.microsecMax=this.microsecMaxOriginal)):
(this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.hourMax=this.hourMaxOriginal,
this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)}null!==a.settings.minTime&&(d=new Date("01/01/1970 "+a.settings.minTime),this.hour<d.getHours()?(this.hour=this._defaults.hourMin=d.getHours(),this.minute=this._defaults.minuteMin=d.getMinutes()):this.hour===d.getHours()&&this.minute<d.getMinutes()?this.minute=this._defaults.minuteMin=d.getMinutes():
this._defaults.hourMin<d.getHours()?(this._defaults.hourMin=d.getHours(),this._defaults.minuteMin=d.getMinutes()):this._defaults.hourMin===d.getHours()===this.hour&&this._defaults.minuteMin<d.getMinutes()?this._defaults.minuteMin=d.getMinutes():this._defaults.minuteMin=0);null!==a.settings.maxTime&&(a=new Date("01/01/1970 "+a.settings.maxTime),this.hour>a.getHours()?(this.hour=this._defaults.hourMax=a.getHours(),this.minute=this._defaults.minuteMax=a.getMinutes()):this.hour===a.getHours()&&this.minute>
a.getMinutes()?this.minute=this._defaults.minuteMax=a.getMinutes():this._defaults.hourMax>a.getHours()?(this._defaults.hourMax=a.getHours(),this._defaults.minuteMax=a.getMinutes()):this._defaults.hourMax===a.getHours()===this.hour&&this._defaults.minuteMax>a.getMinutes()?this._defaults.minuteMax=a.getMinutes():this._defaults.minuteMax=59);void 0!==c&&!0===c&&(c=parseInt(this._defaults.hourMax-(this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour,10),a=parseInt(this._defaults.minuteMax-
(this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute,10),d=parseInt(this._defaults.secondMax-(this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond,10),e=parseInt(this._defaults.millisecMax-(this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec,10),f=parseInt(this._defaults.microsecMax-(this._defaults.microsecMax-this._defaults.microsecMin)%this._defaults.stepMicrosec,10),this.hour_slider&&(this.control.options(this,this.hour_slider,
"hour",{min:this._defaults.hourMin,max:c,step:this._defaults.stepHour}),this.control.value(this,this.hour_slider,"hour",this.hour-this.hour%this._defaults.stepHour)),this.minute_slider&&(this.control.options(this,this.minute_slider,"minute",{min:this._defaults.minuteMin,max:a,step:this._defaults.stepMinute}),this.control.value(this,this.minute_slider,"minute",this.minute-this.minute%this._defaults.stepMinute)),this.second_slider&&(this.control.options(this,this.second_slider,"second",{min:this._defaults.secondMin,
max:d,step:this._defaults.stepSecond}),this.control.value(this,this.second_slider,"second",this.second-this.second%this._defaults.stepSecond)),this.millisec_slider&&(this.control.options(this,this.millisec_slider,"millisec",{min:this._defaults.millisecMin,max:e,step:this._defaults.stepMillisec}),this.control.value(this,this.millisec_slider,"millisec",this.millisec-this.millisec%this._defaults.stepMillisec)),this.microsec_slider&&(this.control.options(this,this.microsec_slider,"microsec",{min:this._defaults.microsecMin,
max:f,step:this._defaults.stepMicrosec}),this.control.value(this,this.microsec_slider,"microsec",this.microsec-this.microsec%this._defaults.stepMicrosec)))}},_onTimeChange:function(){if(this._defaults.showTimepicker){var a=this.hour_slider?this.control.value(this,this.hour_slider,"hour"):!1,c=this.minute_slider?this.control.value(this,this.minute_slider,"minute"):!1,d=this.second_slider?this.control.value(this,this.second_slider,"second"):!1,e=this.millisec_slider?this.control.value(this,this.millisec_slider,
"millisec"):!1,f=this.microsec_slider?this.control.value(this,this.microsec_slider,"microsec"):!1,g=this.timezone_select?this.timezone_select.val():!1,h=this._defaults,k=h.pickerTimeFormat||h.timeFormat,r=h.pickerTimeSuffix||h.timeSuffix;"object"===typeof a&&(a=!1);"object"===typeof c&&(c=!1);"object"===typeof d&&(d=!1);"object"===typeof e&&(e=!1);"object"===typeof f&&(f=!1);"object"===typeof g&&(g=!1);!1!==a&&(a=parseInt(a,10));!1!==c&&(c=parseInt(c,10));!1!==d&&(d=parseInt(d,10));!1!==e&&(e=parseInt(e,
10));!1!==f&&(f=parseInt(f,10));!1!==g&&(g=g.toString());var m=h[12>a?"amNames":"pmNames"][0],B=a!==parseInt(this.hour,10)||c!==parseInt(this.minute,10)||d!==parseInt(this.second,10)||e!==parseInt(this.millisec,10)||f!==parseInt(this.microsec,10)||0<this.ampm.length&&12>a!==(-1!==b.inArray(this.ampm.toUpperCase(),this.amNames))||null!==this.timezone&&g!==this.timezone.toString();B&&(!1!==a&&(this.hour=a),!1!==c&&(this.minute=c),!1!==d&&(this.second=d),!1!==e&&(this.millisec=e),!1!==f&&(this.microsec=
f),!1!==g&&(this.timezone=g),this.inst||(this.inst=b.datepicker._getInst(this.$input[0])),this._limitMinMaxDateTime(this.inst,!0));this.support.ampm&&(this.ampm=m);this.formattedTime=b.datepicker.formatTime(h.timeFormat,this,h);this.$timeObj&&(k===h.timeFormat?this.$timeObj.text(this.formattedTime+r):this.$timeObj.text(b.datepicker.formatTime(k,this,h)+r));this.timeDefined=!0;B&&this._updateDateTime()}},_onSelectHandler:function(){var a=this._defaults.onSelect||this.inst.settings.onSelect,b=this.$input?
this.$input[0]:null;a&&b&&a.apply(b,[this.formattedDateTime,this])},_updateDateTime:function(a){a=this.inst||a;var c=b.datepicker._daylightSavingAdjust(0<a.currentYear?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(a.selectedYear,a.selectedMonth,a.selectedDay)),d=b.datepicker._get(a,"dateFormat"),e=b.datepicker._getFormatConfig(a),f=null!==c&&this.timeDefined;d=this.formattedDate=b.datepicker.formatDate(d,null===c?new Date:c,e);""===a.lastVal&&(a.currentYear=a.selectedYear,a.currentMonth=
a.selectedMonth,a.currentDay=a.selectedDay);if(!0===this._defaults.timeOnly&&!1===this._defaults.timeOnlyShowDate)d=this.formattedTime;else if(!0!==this._defaults.timeOnly&&(this._defaults.alwaysSetTime||f)||!0===this._defaults.timeOnly&&!0===this._defaults.timeOnlyShowDate)d+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix;this.formattedDateTime=d;this._defaults.showTimepicker?this.$altInput&&!1===this._defaults.timeOnly&&!0===this._defaults.altFieldTimeOnly?(this.$altInput.val(this.formattedTime),
this.$input.val(this.formattedDate)):this.$altInput?(this.$input.val(d),a="",f=null!==this._defaults.altSeparator?this._defaults.altSeparator:this._defaults.separator,d=null!==this._defaults.altTimeSuffix?this._defaults.altTimeSuffix:this._defaults.timeSuffix,this._defaults.timeOnly||(a=this._defaults.altFormat?b.datepicker.formatDate(this._defaults.altFormat,null===c?new Date:c,e):this.formattedDate)&&(a+=f),a=null!==this._defaults.altTimeFormat?a+(b.datepicker.formatTime(this._defaults.altTimeFormat,
this,this._defaults)+d):a+(this.formattedTime+d),this.$altInput.val(a)):this.$input.val(d):this.$input.val(this.formattedDate);this.$input.trigger("change")},_onFocus:function(){if(!this.$input.val()&&this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue);var a=b.datepicker._getInst(this.$input.get(0)),c=b.datepicker._get(a,"timepicker");if(c&&c._defaults.timeOnly&&a.input.val()!==a.lastVal)try{b.datepicker._updateDatepicker(a)}catch(q){b.timepicker.log(q)}}},_controls:{slider:{create:function(a,
c,d,e,f,g,h){var l=a._defaults.isRTL;return c.prop("slide",null).slider({orientation:"horizontal",value:l?-1*e:e,min:l?-1*g:f,max:l?-1*f:g,step:h,slide:function(c,e){a.control.value(a,b(this),d,l?-1*e.value:e.value);a._onTimeChange()},stop:function(b,c){a._onSelectHandler()}})},options:function(a,b,c,d,e){if(a._defaults.isRTL){if("string"===typeof d)return"min"===d||"max"===d?void 0!==e?b.slider(d,-1*e):Math.abs(b.slider(d)):b.slider(d);a=d.min;c=d.max;d.min=d.max=null;void 0!==a&&(d.max=-1*a);void 0!==
c&&(d.min=-1*c);return b.slider(d)}return"string"===typeof d&&void 0!==e?b.slider(d,e):b.slider(d)},value:function(a,b,c,d){return a._defaults.isRTL?void 0!==d?b.slider("value",-1*d):Math.abs(b.slider("value")):void 0!==d?b.slider("value",d):b.slider("value")}},select:{create:function(a,c,d,e,f,g,h){for(var l='<select class="ui-timepicker-select ui-state-default ui-corner-all" data-unit="'+d+'" data-min="'+f+'" data-max="'+g+'" data-step="'+h+'">',k=a._defaults.pickerTimeFormat||a._defaults.timeFormat;f<=
g;f+=h)l+='<option value="'+f+'"'+(f===e?" selected":"")+">",l="hour"===d?l+b.datepicker.formatTime(b.trim(k.replace(/[^ht ]/ig,"")),{hour:f},a._defaults):"millisec"===d||"microsec"===d||10<=f?l+f:l+("0"+f.toString()),l+="</option>";l+="</select>";c.children("select").remove();b(l).appendTo(c).change(function(b){a._onTimeChange();a._onSelectHandler()});return c},options:function(a,b,c,d,e){c={};var f=b.children("select");if("string"===typeof d){if(void 0===e)return f.data(d);c[d]=e}else c=d;return a.control.create(a,
b,f.data("unit"),f.val(),c.min||f.data("min"),c.max||f.data("max"),c.step||f.data("step"))},value:function(a,b,c,d){a=b.children("select");return void 0!==d?a.val(d):a.val()}}}});b.fn.extend({timepicker:function(a){a=a||{};var c=Array.prototype.slice.call(arguments);"object"===typeof a&&(c[0]=b.extend(a,{timeOnly:!0}));return b(this).each(function(){b.fn.datetimepicker.apply(b(this),c)})},datetimepicker:function(a){a=a||{};var c=arguments;return"string"===typeof a?"getDate"===a||"option"===a&&2===
c.length&&"string"===typeof c[1]?b.fn.datepicker.apply(b(this[0]),c):this.each(function(){var a=b(this);a.datepicker.apply(a,c)}):this.each(function(){var c=b(this);c.datepicker(b.timepicker._newInst(c,a)._defaults)})}});b.datepicker.parseDateTime=function(a,b,c,d,e){a=k(a,b,c,d,e);a.timeObj&&(b=a.timeObj,a.date.setHours(b.hour,b.minute,b.second,b.millisec),a.date.setMicroseconds(b.microsec));return a.date};b.datepicker.parseTime=function(a,c,e){e=d(d({},b.timepicker._defaults),e||{});a.replace(/'.*?'/g,
"").indexOf("Z");var f=function(a,c,d){var e=function(a,c){var d=[];a&&b.merge(d,a);c&&b.merge(d,c);d=b.map(d,function(a){return a.replace(/[.*+?|()\[\]{}\\]/g,"\\$&")});return"("+d.join("|")+")?"},f="^"+a.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(a){var b=a.length;switch(a.charAt(0).toLowerCase()){case "h":return 1===b?"(\\d?\\d)":"(\\d{"+b+"})";case "m":return 1===b?"(\\d?\\d)":"(\\d{"+b+"})";case "s":return 1===b?"(\\d?\\d)":"(\\d{"+b+"})";case "l":return"(\\d?\\d?\\d)";
case "c":return"(\\d?\\d?\\d)";case "z":return"(z|[-+]\\d\\d:?\\d\\d|\\S+)?";case "t":return e(d.amNames,d.pmNames);default:return"("+a.replace(/'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(a){return"\\"+a})+")?"}}).replace(/\s/g,"\\s?")+d.timeSuffix+"$";a=function(a){a=a.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|c{1}|t{1,2}|z|'.*?')/g);var b={h:-1,m:-1,s:-1,l:-1,c:-1,t:-1,z:-1};if(a)for(var c=0;c<a.length;c++)-1===b[a[c].toString().charAt(0)]&&(b[a[c].toString().charAt(0)]=
c+1);return b}(a);var g="";c=c.match(new RegExp(f,"i"));f={hour:0,minute:0,second:0,millisec:0,microsec:0};return c?(-1!==a.t&&(void 0===c[a.t]||0===c[a.t].length?(g="",f.ampm=""):(g=-1!==b.inArray(c[a.t].toUpperCase(),d.amNames)?"AM":"PM",f.ampm=d["AM"===g?"amNames":"pmNames"][0])),-1!==a.h&&(f.hour="AM"===g&&"12"===c[a.h]?0:"PM"===g&&"12"!==c[a.h]?parseInt(c[a.h],10)+12:Number(c[a.h])),-1!==a.m&&(f.minute=Number(c[a.m])),-1!==a.s&&(f.second=Number(c[a.s])),-1!==a.l&&(f.millisec=Number(c[a.l])),
-1!==a.c&&(f.microsec=Number(c[a.c])),-1!==a.z&&void 0!==c[a.z]&&(f.timezone=b.timepicker.timezoneOffsetNumber(c[a.z])),f):!1},g=function(a,c,d){try{var e=new Date("2012-01-01 "+c);if(isNaN(e.getTime())&&(e=new Date("2012-01-01T"+c),isNaN(e.getTime())&&(e=new Date("01/01/2012 "+c),isNaN(e.getTime()))))throw"Unable to parse time with native Date: "+c;return{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisec:e.getMilliseconds(),microsec:e.getMicroseconds(),timezone:-1*e.getTimezoneOffset()}}catch(w){try{return f(a,
c,d)}catch(B){b.timepicker.log("Unable to parse \ntimeString: "+c+"\ntimeFormat: "+a)}}return!1};return"function"===typeof e.parse?e.parse(a,c,e):"loose"===e.parse?g(a,c,e):f(a,c,e)};b.datepicker.formatTime=function(a,c,d){d=d||{};d=b.extend({},b.timepicker._defaults,d);c=b.extend({hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null},c);var e=d.amNames[0],g=parseInt(c.hour,10);11<g&&(e=d.pmNames[0]);return a=a.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(a){switch(a){case "HH":return("0"+
g).slice(-2);case "H":return g;case "hh":return("0"+f(g)).slice(-2);case "h":return f(g);case "mm":return("0"+c.minute).slice(-2);case "m":return c.minute;case "ss":return("0"+c.second).slice(-2);case "s":return c.second;case "l":return("00"+c.millisec).slice(-3);case "c":return("00"+c.microsec).slice(-3);case "z":return b.timepicker.timezoneOffsetString(null===c.timezone?d.timezone:c.timezone,!1);case "Z":return b.timepicker.timezoneOffsetString(null===c.timezone?d.timezone:c.timezone,!0);case "T":return e.charAt(0).toUpperCase();
case "TT":return e.toUpperCase();case "t":return e.charAt(0).toLowerCase();case "tt":return e.toLowerCase();default:return a.replace(/'/g,"")}})};b.datepicker._base_selectDate=b.datepicker._selectDate;b.datepicker._selectDate=function(a,c){var d=this._getInst(b(a)[0]),e=this._get(d,"timepicker");e&&d.settings.showTimepicker?(e._limitMinMaxDateTime(d,!0),e=d.inline,d.inline=d.stay_open=!0,this._base_selectDate(a,c),d.inline=e,d.stay_open=!1,this._notifyChange(d),this._updateDatepicker(d)):this._base_selectDate(a,
c)};b.datepicker._base_updateDatepicker=b.datepicker._updateDatepicker;b.datepicker._updateDatepicker=function(a){var c=a.input[0];if(!b.datepicker._curInst||b.datepicker._curInst===a||!b.datepicker._datepickerShowing||b.datepicker._lastInput===c)if("boolean"!==typeof a.stay_open||!1===a.stay_open)this._base_updateDatepicker(a),(c=this._get(a,"timepicker"))&&c._addTimePicker(a)};b.datepicker._base_doKeyPress=b.datepicker._doKeyPress;b.datepicker._doKeyPress=function(a){var c=b.datepicker._getInst(a.target),
d=b.datepicker._get(c,"timepicker");if(d&&b.datepicker._get(c,"constrainInput")){var e=d.support.ampm,f=null!==d._defaults.showTimezone?d._defaults.showTimezone:d.support.timezone;c=b.datepicker._possibleChars(b.datepicker._get(c,"dateFormat"));d=d._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,e?"APM":"").replace(/Tt/g,e?"AaPpMm":"").replace(/tT/g,e?"AaPpMm":"").replace(/T/g,e?"AP":"").replace(/tt/g,e?"apm":"").replace(/t/g,e?"ap":"")+" "+d._defaults.separator+d._defaults.timeSuffix+
(f?d._defaults.timezoneList.join(""):"")+d._defaults.amNames.join("")+d._defaults.pmNames.join("")+c;e=String.fromCharCode(void 0===a.charCode?a.keyCode:a.charCode);return a.ctrlKey||" ">e||!c||-1<d.indexOf(e)}return b.datepicker._base_doKeyPress(a)};b.datepicker._base_updateAlternate=b.datepicker._updateAlternate;b.datepicker._updateAlternate=function(a){var c=this._get(a,"timepicker");if(c){var d=c._defaults.altField;if(d){var e=this._getDate(a),f=b.datepicker._getFormatConfig(a),g=c._defaults.altSeparator?
c._defaults.altSeparator:c._defaults.separator;var h=c._defaults.altTimeSuffix?c._defaults.altTimeSuffix:c._defaults.timeSuffix;h=""+(b.datepicker.formatTime(null!==c._defaults.altTimeFormat?c._defaults.altTimeFormat:c._defaults.timeFormat,c,c._defaults)+h);c._defaults.timeOnly||c._defaults.altFieldTimeOnly||null===e||(h=c._defaults.altFormat?b.datepicker.formatDate(c._defaults.altFormat,e,f)+g+h:c.formattedDate+g+h);b(d).val(a.input.val()?h:"")}}else b.datepicker._base_updateAlternate(a)};b.datepicker._base_doKeyUp=
b.datepicker._doKeyUp;b.datepicker._doKeyUp=function(a){var c=b.datepicker._getInst(a.target),d=b.datepicker._get(c,"timepicker");if(d&&d._defaults.timeOnly&&c.input.val()!==c.lastVal)try{b.datepicker._updateDatepicker(c)}catch(p){b.timepicker.log(p)}return b.datepicker._base_doKeyUp(a)};b.datepicker._base_gotoToday=b.datepicker._gotoToday;b.datepicker._gotoToday=function(a){var c=this._getInst(b(a)[0]);this._base_gotoToday(a);a=this._get(c,"timepicker");m(a);a=new Date;this._setTime(c,a);this._setDate(c,
a)};b.datepicker._disableTimepickerDatepicker=function(a){var c=this._getInst(a);if(c){var d=this._get(c,"timepicker");b(a).datepicker("getDate");d&&(c.settings.showTimepicker=!1,d._defaults.showTimepicker=!1,d._updateDateTime(c))}};b.datepicker._enableTimepickerDatepicker=function(a){var c=this._getInst(a);if(c){var d=this._get(c,"timepicker");b(a).datepicker("getDate");d&&(c.settings.showTimepicker=!0,d._defaults.showTimepicker=!0,d._addTimePicker(c),d._updateDateTime(c))}};b.datepicker._setTime=
function(a,b){var c=this._get(a,"timepicker");if(c){var d=c._defaults;c.hour=b?b.getHours():d.hour;c.minute=b?b.getMinutes():d.minute;c.second=b?b.getSeconds():d.second;c.millisec=b?b.getMilliseconds():d.millisec;c.microsec=b?b.getMicroseconds():d.microsec;c._limitMinMaxDateTime(a,!0);c._onTimeChange();c._updateDateTime(a)}};b.datepicker._setTimeDatepicker=function(a,b,c){if(a=this._getInst(a)){var d=this._get(a,"timepicker");d&&(this._setDateFromField(a),b&&("string"===typeof b?(d._parseTime(b,c),
c=new Date,c.setHours(d.hour,d.minute,d.second,d.millisec),c.setMicroseconds(d.microsec)):(c=new Date(b.getTime()),c.setMicroseconds(b.getMicroseconds())),"Invalid Date"===c.toString()&&(c=void 0),this._setTime(a,c)))}};b.datepicker._base_setDateDatepicker=b.datepicker._setDateDatepicker;b.datepicker._setDateDatepicker=function(a,c){var d=this._getInst(a),e=c;if(d){"string"===typeof c&&(e=new Date(c),e.getTime()||(this._base_setDateDatepicker.apply(this,arguments),e=b(a).datepicker("getDate")));var f=
this._get(d,"timepicker");if(e instanceof Date){var g=new Date(e.getTime());g.setMicroseconds(e.getMicroseconds())}else g=e;f&&g&&(f.support.timezone||null!==f._defaults.timezone||(f.timezone=-1*g.getTimezoneOffset()),b.timepicker.timezoneAdjust(e,f.timezone),g=b.timepicker.timezoneAdjust(g,f.timezone));this._updateDatepicker(d);this._base_setDateDatepicker.apply(this,arguments);this._setTimeDatepicker(a,g,!0)}};b.datepicker._base_getDateDatepicker=b.datepicker._getDateDatepicker;b.datepicker._getDateDatepicker=
function(a,c){var d=this._getInst(a);if(d){var e=this._get(d,"timepicker");return e?(void 0===d.lastVal&&this._setDateFromField(d,c),(c=this._getDate(d))&&e._parseTime(b(a).val(),e.timeOnly)&&(c.setHours(e.hour,e.minute,e.second,e.millisec),c.setMicroseconds(e.microsec),null!=e.timezone&&(e.support.timezone||null!==e._defaults.timezone||(e.timezone=-1*c.getTimezoneOffset()),c=b.timepicker.timezoneAdjust(c,e.timezone))),c):this._base_getDateDatepicker(a,c)}};b.datepicker._base_parseDate=b.datepicker.parseDate;
b.datepicker.parseDate=function(a,c,d){try{var e=this._base_parseDate(a,c,d)}catch(u){if(0<=u.indexOf(":"))e=this._base_parseDate(a,c.substring(0,c.length-(u.length-u.indexOf(":")-2)),d),b.timepicker.log("Error parsing the date string: "+u+"\ndate string = "+c+"\ndate format = "+a);else throw u;}return e};b.datepicker._base_formatDate=b.datepicker._formatDate;b.datepicker._formatDate=function(a,b,c,d){return(b=this._get(a,"timepicker"))?(b._updateDateTime(a),b.$input.val()):this._base_formatDate(a)};
b.datepicker._base_optionDatepicker=b.datepicker._optionDatepicker;b.datepicker._optionDatepicker=function(a,d,e){var f=this._getInst(a);if(!f)return null;if(f=this._get(f,"timepicker")){var g=null,h=null,k=null,l=f._defaults.evnts,m={};if("string"===typeof d)if("minDate"===d||"minDateTime"===d)g=e;else if("maxDate"===d||"maxDateTime"===d)h=e;else if("onSelect"===d)k=e;else{if(l.hasOwnProperty(d)){if("undefined"===typeof e)return l[d];m[d]=e;var n={}}}else if("object"===typeof d)for(q in d.minDate?
g=d.minDate:d.minDateTime?g=d.minDateTime:d.maxDate?h=d.maxDate:d.maxDateTime&&(h=d.maxDateTime),l)l.hasOwnProperty(q)&&d[q]&&(m[q]=d[q]);for(q in m)m.hasOwnProperty(q)&&(l[q]=m[q],n||(n=b.extend({},d)),delete n[q]);if(n&&c(n))return;g?(g=0===g?new Date:new Date(g),f._defaults.minDate=g,f._defaults.minDateTime=g):h?(h=0===h?new Date:new Date(h),f._defaults.maxDate=h,f._defaults.maxDateTime=h):k&&(f._defaults.onSelect=k);if(g||h){f=b(a);var q=f.datetimepicker("getDate");a=this._base_optionDatepicker.call(b.datepicker,
a,n||d,e);f.datetimepicker("setDate",q);return a}}return void 0===e?this._base_optionDatepicker.call(b.datepicker,a,d):this._base_optionDatepicker.call(b.datepicker,a,n||d,e)};var c=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},d=function(a,c){b.extend(a,c);for(var d in c)if(null===c[d]||void 0===c[d])a[d]=c[d];return a},e=function(a){var b=a.replace(/'.*?'/g,"").toLowerCase(),c=function(a,b){return-1!==a.indexOf(b)?!0:!1};return{hour:c(b,"h"),minute:c(b,"m"),second:c(b,"s"),
millisec:c(b,"l"),microsec:c(b,"c"),timezone:c(b,"z"),ampm:c(b,"t")&&c(a,"h"),iso8601:c(a,"Z")}},f=function(a){a%=12;0===a&&(a=12);return String(a)},h=function(a,c){return a&&a[c]?a[c]:b.timepicker._defaults[c]},g=function(a,b){var c=h(b,"separator");b=h(b,"timeFormat").split(c).length;var d=a.split(c),e=d.length;return 1<e?{dateString:d.splice(0,e-b).join(c),timeString:d.splice(0,b).join(c)}:{dateString:a,timeString:""}},k=function(a,c,d,e,f){d=g(d,f);a=b.datepicker._base_parseDate(a,d.dateString,
e);if(""===d.timeString)return{date:a};c=b.datepicker.parseTime(c,d.timeString,f);if(!c)throw"Wrong time format";return{date:a,timeObj:c}},m=function(a,b){a&&a.timezone_select&&a.timezone_select.val(-(b||new Date).getTimezoneOffset())};b.timepicker=new a;b.timepicker.timezoneOffsetString=function(a,b){if(isNaN(a)||840<a||-720>a)return a;var c=a%60;b=b?":":"";a=(0<=a?"+":"-")+("0"+Math.abs((a-c)/60)).slice(-2)+b+("0"+Math.abs(c)).slice(-2);return"+00:00"===a?"Z":a};b.timepicker.timezoneOffsetNumber=
function(a){var b=a.toString().replace(":","");return"Z"===b.toUpperCase()?0:/^(\-|\+)\d{4}$/.test(b)?("-"===b.substr(0,1)?-1:1)*(60*parseInt(b.substr(1,2),10)+parseInt(b.substr(3,2),10)):a};b.timepicker.timezoneAdjust=function(a,c){c=b.timepicker.timezoneOffsetNumber(c);isNaN(c)||a.setMinutes(a.getMinutes()+-a.getTimezoneOffset()-c);return a};b.timepicker.timeRange=function(a,c,d){return b.timepicker.handleRange("timepicker",a,c,d)};b.timepicker.datetimeRange=function(a,c,d){b.timepicker.handleRange("datetimepicker",
a,c,d)};b.timepicker.dateRange=function(a,c,d){b.timepicker.handleRange("datepicker",a,c,d)};b.timepicker.handleRange=function(a,c,d,e){function f(b,f){var g=c[a]("getDate"),h=d[a]("getDate");b=b[a]("getDate");if(null!==g){var k=new Date(g.getTime()),l=new Date(g.getTime());k.setMilliseconds(k.getMilliseconds()+e.minInterval);l.setMilliseconds(l.getMilliseconds()+e.maxInterval);if(0<e.minInterval&&k>h)d[a]("setDate",k);else if(0<e.maxInterval&&l<h)d[a]("setDate",l);else if(g>h)f[a]("setDate",b)}}
function g(b,c,d){b.val()&&(b=b[a].call(b,"getDate"),null!==b&&0<e.minInterval&&("minDate"===d&&b.setMilliseconds(b.getMilliseconds()+e.minInterval),"maxDate"===d&&b.setMilliseconds(b.getMilliseconds()-e.minInterval)),b.getTime&&c[a].call(c,"option",d,b))}e=b.extend({},{minInterval:0,maxInterval:0,start:{},end:{}},e);var h=!1;"timepicker"===a&&(h=!0,a="datetimepicker");b.fn[a].call(c,b.extend({timeOnly:h,onClose:function(a,c){f(b(this),d)},onSelect:function(a){g(b(this),d,"minDate")}},e,e.start));
b.fn[a].call(d,b.extend({timeOnly:h,onClose:function(a,d){f(b(this),c)},onSelect:function(a){g(b(this),c,"maxDate")}},e,e.end));f(c,d);g(c,d,"minDate");g(d,c,"maxDate");return b([c.get(0),d.get(0)])};b.timepicker.log=function(){window.console&&window.console.log.apply(window.console,Array.prototype.slice.call(arguments))};b.timepicker._util={_extendRemove:d,_isEmptyObject:c,_convert24to12:f,_detectSupport:e,_selectLocalTimezone:m,_computeEffectiveSetting:h,_splitDateTime:g,_parseDateTimeInternal:k};
Date.prototype.getMicroseconds||(Date.prototype.microseconds=0,Date.prototype.getMicroseconds=function(){return this.microseconds},Date.prototype.setMicroseconds=function(a){this.setMilliseconds(this.getMilliseconds()+Math.floor(a/1E3));this.microseconds=a%1E3;return this});b.timepicker.version="1.5.0"}})(jQuery);
(function(b,a){var c=0,d=b(document);b.widget("ech.multiselect",{options:{header:!0,height:175,minWidth:225,classes:"",checkAllText:"Check all",uncheckAllText:"Uncheck all",allSelectedText:"All selected",noneSelectedText:"Select options",selectedText:"# selected",selectedList:0,show:null,hide:null,autoOpen:!1,multiple:!0,position:{},appendTo:"body",create:{}},_create:function(){var a=this.element.hide(),d=this.options;this.speed=b.fx.speeds._default;this._isOpen=!1;this._namespaceID=this.eventNamespace||
"multiselect"+c;var h=(this.button=b('<button type="button"><span class="ui-icon ui-icon-triangle-1-s"></span></button>')).addClass("ui-multiselect ui-widget ui-state-default ui-corner-all").addClass(d.classes).attr({title:a.attr("title"),"aria-haspopup":!0,tabIndex:a.attr("tabIndex")}).insertAfter(a);(this.buttonlabel=b("<span />")).html(d.noneSelectedText).appendTo(h);var g=(this.menu=b("<div />")).addClass("ui-multiselect-menu ui-widget ui-widget-content ui-corner-all").addClass(d.classes).appendTo(b(d.appendTo)),
k=(this.header=b("<div />")).addClass("ui-widget-header ui-corner-all ui-multiselect-header ui-helper-clearfix").appendTo(g);(this.headerLinkContainer=b("<ul />")).addClass("ui-helper-reset").html(function(){return!0===d.header?'<li><a class="ui-multiselect-all" href="#"><span class="ui-icon ui-icon-check"></span><span>'+d.checkAllText+'</span></a></li><li><a class="ui-multiselect-none" href="#"><span class="ui-icon ui-icon-closethick"></span><span>'+d.uncheckAllText+"</span></a></li>":"string"===
typeof d.header?"<li>"+d.header+"</li>":""}).append('<li class="ui-multiselect-close"><a href="#" class="ui-multiselect-close"><span class="ui-icon ui-icon-circle-close"></span></a></li>').appendTo(k);(this.checkboxContainer=b("<ul />")).addClass("ui-multiselect-checkboxes ui-helper-reset").appendTo(g);this._bindEvents();this.refresh(!0);d.multiple||g.addClass("ui-multiselect-single");a.hasClass("hide")&&h.hide();c++},_init:function(){!1===this.options.header&&this.header.hide();this.options.multiple||
this.headerLinkContainer.find(".ui-multiselect-all, .ui-multiselect-none").hide();this.options.autoOpen&&this.open();this.element.is(":disabled")&&this.disable()},refresh:function(a){var d=this.element,e=this.options,g=this.menu,k=this.checkboxContainer,m=[],l="",n=d.attr("id")||c++;d.find("option").each(function(a){b(this);var c=this.parentNode,d=this.innerHTML,f=this.title,g=this.value;a="ui-multiselect-"+(this.id||n+"-option-"+a);var h=this.disabled,k=this.selected,p=["ui-corner-all"],q=(h?"ui-multiselect-disabled ":
" ")+this.className;if("OPTGROUP"===c.tagName){var y=c.getAttribute("label");-1===b.inArray(y,m)&&(l+='<li class="ui-multiselect-optgroup-label '+c.className+'"><a href="#">'+y+"</a></li>",m.push(y))}h&&p.push("ui-state-disabled");k&&!e.multiple&&p.push("ui-state-active");l+='<li class="'+q+'">';l+='<label for="'+a+'" title="'+f+'" class="'+p.join(" ")+'">';l+='<input id="'+a+'" name="multiselect_'+n+'" type="'+(e.multiple?"checkbox":"radio")+'" value="'+g+'" title="'+f+'"';k&&(l+=' checked="checked"',
l+=' aria-selected="true"');h&&(l+=' disabled="disabled"',l+=' aria-disabled="true"');l+=" /><span>"+d+"</span></label></li>"});if(!b.isEmptyObject(e.create)){var q=e.create;d=S3.Ap.concat("/",q.c,"/",q.f,"/create?format=popup&caller=",n);q.parent&&(d+="&parent="+q.parent);q.child&&(d+="&child="+q.child);q=q.label;l+='<li><a class="s3_modal" target="top" title="'+q+'" href="'+d+'"><label class="ui-corner-all"><span><i>'+q+"</i></span></label></a></li>"}k.html(l);b.isEmptyObject(e.create)||S3.addModals();
this.labels=g.find("label");this.inputs=this.labels.children("input");this._setButtonWidth();this._setMenuWidth();this.button[0].defaultValue=this.update();a||this._trigger("refresh")},update:function(){var a=this.options;if(a.multiple){var c=this.inputs,d=c.filter(":checked"),g=d.length;a=0===g?a.noneSelectedText:g===c.length?a.allSelectedText:b.isFunction(a.selectedText)?a.selectedText.call(this,g,c.length,d.get()):/\d/.test(a.selectedList)&&0<a.selectedList&&g<=a.selectedList?d.map(function(){return b("<div>").html(b(this).next().html()).text()}).get().join(", "):
a.selectedText.replace("#",g).replace("#",c.length)}else a=this.element[0].value?this.element[0].selectedOptions&&this.element[0].selectedOptions[0].innerHTML:a.noneSelectedText;this._setButtonValue(a);return a},_setButtonValue:function(a){this.buttonlabel.text(a)},_bindEvents:function(){function a(){c[c._isOpen?"close":"open"]();return!1}var c=this,h=this.button;h.find("span").bind("click.multiselect",a);h.bind({click:a,keypress:function(a){switch(a.which){case 27:case 38:case 37:c.close();break;
case 39:case 40:c.open()}},mouseenter:function(){h.hasClass("ui-state-disabled")||b(this).addClass("ui-state-hover")},mouseleave:function(){b(this).removeClass("ui-state-hover")},focus:function(){h.hasClass("ui-state-disabled")||b(this).addClass("ui-state-focus")},blur:function(){b(this).removeClass("ui-state-focus")}});this.header.delegate("a","click.multiselect",function(a){if(b(this).hasClass("ui-multiselect-close"))c.close();else c[b(this).hasClass("ui-multiselect-all")?"checkAll":"uncheckAll"]();
a.preventDefault()});this.menu.delegate("li.ui-multiselect-optgroup-label a","click.multiselect",function(a){a.preventDefault();var d=b(this),e=d.parent().nextUntil("li.ui-multiselect-optgroup-label").find("input:visible:not(:disabled)"),f=e.get();d=d.parent().text();!1!==c._trigger("beforeoptgrouptoggle",a,{inputs:f,label:d})&&(c._toggleChecked(e.filter(":checked").length!==e.length,e),c._trigger("optgrouptoggle",a,{inputs:f,label:d,checked:f[0].checked}))}).delegate("label","mouseenter.multiselect",
function(){b(this).hasClass("ui-state-disabled")||(c.labels.removeClass("ui-state-hover"),b(this).addClass("ui-state-hover").find("input").focus())}).delegate("label","keydown.multiselect",function(a){a.preventDefault();switch(a.which){case 9:case 27:c.close();break;case 38:case 40:case 37:case 39:c._traverse(a.which,this);break;case 13:b(this).find("input")[0].click()}}).delegate('input[type="checkbox"], input[type="radio"]',"click.multiselect",function(a){var d=b(this),e=this.value,f=this.checked,
g=c.element.find("option");this.disabled||!1===c._trigger("click",a,{value:e,text:this.title,checked:f})?a.preventDefault():(d.focus(),d.attr("aria-selected",f),g.each(function(){this.value===e?this.selected=f:c.options.multiple||(this.selected=!1)}),c.options.multiple||(c.labels.removeClass("ui-state-active"),d.closest("label").toggleClass("ui-state-active",f),c.close()),c.element.trigger("change"),setTimeout(b.proxy(c.update,c),10))});d.bind("mousedown."+this._namespaceID,function(a){a=a.target;
!c._isOpen||a===c.button[0]||a===c.menu[0]||b.contains(c.menu[0],a)||b.contains(c.button[0],a)||c.close()});b(this.element[0].form).bind("reset."+this._namespaceID,function(){setTimeout(b.proxy(c.refresh,c),10)})},_setButtonWidth:function(){var a=this.element.outerWidth(),b=this.options;/\d/.test(b.minWidth)&&a<b.minWidth&&(a=b.minWidth);this.button.outerWidth(a)},_setMenuWidth:function(){this.menu.outerWidth(this.button.outerWidth())},_traverse:function(a,c){c=b(c);a=38===a||37===a;c=c.parent()[a?
"prevAll":"nextAll"]("li:not(.ui-multiselect-disabled, .ui-multiselect-optgroup-label)").first();c.length?c.find("label").trigger("mouseover"):(c=this.menu.find("ul").last(),this.menu.find("label")[a?"last":"first"]().trigger("mouseover"),c.scrollTop(a?c.height():0))},_toggleState:function(a,b){return function(){this.disabled||(this[a]=b);b?this.setAttribute("aria-selected",!0):this.removeAttribute("aria-selected")}},_toggleChecked:function(a,c){c=c&&c.length?c:this.inputs;var d=this;c.each(this._toggleState("checked",
a));c.eq(0).focus();this.update();var e=c.map(function(){return this.value}).get();this.element.find("option").each(function(){!this.disabled&&-1<b.inArray(this.value,e)&&d._toggleState("selected",a).call(this)});c.length&&this.element.trigger("change")},_toggleDisabled:function(a){this.button.attr({disabled:a,"aria-disabled":a})[a?"addClass":"removeClass"]("ui-state-disabled");var c=this.menu.find("input");c=a?c.filter(":enabled").data("ech-multiselect-disabled",!0):c.filter(function(){return!0===
b.data(this,"ech-multiselect-disabled")}).removeData("ech-multiselect-disabled");c.attr({disabled:a,"arial-disabled":a}).parent()[a?"addClass":"removeClass"]("ui-state-disabled");this.element.attr({disabled:a,"aria-disabled":a})},open:function(a){a=this.button;var c=this.menu,d=this.speed,e=this.options,k=[];if(!1!==this._trigger("beforeopen")&&!a.hasClass("ui-state-disabled")&&!this._isOpen){var m=c.find("ul").last(),l=e.show;b.isArray(e.show)&&(l=e.show[0],d=e.show[1]||this.speed);l&&(k=[l,d]);
m.scrollTop(0).height(e.height);this.position();b.fn.show.apply(c,k);this.labels.filter(":not(.ui-state-disabled)").eq(0).trigger("mouseover").trigger("mouseenter").find("input").trigger("focus");a.addClass("ui-state-active");this._isOpen=!0;this._trigger("open")}},close:function(){if(!1!==this._trigger("beforeclose")){var a=this.options,c=a.hide,d=this.speed,g=[];b.isArray(a.hide)&&(c=a.hide[0],d=a.hide[1]||this.speed);c&&(g=[c,d]);b.fn.hide.apply(this.menu,g);this.button.removeClass("ui-state-active").trigger("blur").trigger("mouseleave");
this._isOpen=!1;this._trigger("close")}},enable:function(){this._toggleDisabled(!1)},disable:function(){this._toggleDisabled(!0)},checkAll:function(a){this._toggleChecked(!0);this._trigger("checkAll")},uncheckAll:function(){this._toggleChecked(!1);this._trigger("uncheckAll")},getChecked:function(){return this.menu.find("input").filter(":checked")},destroy:function(){b.Widget.prototype.destroy.call(this);d.unbind(this._namespaceID);b(this.element[0].form).unbind(this._namespaceID);this.button.remove();
this.menu.remove();this.element.show();return this},isOpen:function(){return this._isOpen},widget:function(){return this.menu},getButton:function(){return this.button},position:function(){var a=this.options;b.ui.position&&!b.isEmptyObject(a.position)?(a.position.of=a.position.of||this.button,this.menu.show().position(a.position).hide()):(a=this.button.offset(),this.menu.css({top:a.top+this.button.outerHeight(),left:a.left}))},_setOption:function(a,c){var d=this.menu;switch(a){case "header":d.find("div.ui-multiselect-header")[c?
"show":"hide"]();break;case "checkAllText":d.find("a.ui-multiselect-all span").eq(-1).text(c);break;case "uncheckAllText":d.find("a.ui-multiselect-none span").eq(-1).text(c);break;case "height":d.find("ul").last().height(parseInt(c,10));break;case "minWidth":this.options[a]=parseInt(c,10);this._setButtonWidth();this._setMenuWidth();break;case "selectedText":case "selectedList":case "noneSelectedText":this.options[a]=c;this.update();break;case "classes":d.add(this.button).removeClass(this.options.classes).addClass(c);
break;case "multiple":d.toggleClass("ui-multiselect-single",!c);this.options.multiple=c;this.element[0].multiple=c;this.refresh();break;case "position":this.position()}b.Widget.prototype._setOption.apply(this,arguments)}})})(jQuery);
(function(b){var a=/[\-\[\]{}()*+?.,\\\^$|#\s]/g;b.widget("ech.multiselectfilter",{options:{label:"Filter:",width:null,placeholder:"Enter keywords",autoReset:!1},_create:function(){var a=this.options,d=b(this.element);d=this.instance=d.data("echMultiselect")||d.data("multiselect")||d.data("ech-multiselect");this.header=d.menu.find(".ui-multiselect-header").addClass("ui-multiselect-hasfilter");a=this.wrapper=b('<div class="ui-multiselect-filter">'+(a.label.length?a.label:"")+'<input placeholder="'+
a.placeholder+'" type="search"'+(/\d/.test(a.width)?'style="width:'+a.width+'px"':"")+" /></div>").prependTo(this.header);this.inputs=d.menu.find('input[type="checkbox"], input[type="radio"]');this.input=a.find("input").bind({keydown:function(a){13===a.which&&a.preventDefault()},keyup:b.proxy(this._handler,this),click:b.proxy(this._handler,this)});this.updateCache();d._toggleChecked=function(a,c){c=c&&c.length?c:this.labels.find("input");var d=this;c=c.not(d._isOpen?":disabled, :hidden":":disabled").each(this._toggleState("checked",
a));this.update();var e=c.map(function(){return this.value}).get();this.element.find("option").filter(function(){!this.disabled&&-1<b.inArray(this.value,e)&&d._toggleState("selected",a).call(this)});c.length&&this.element.trigger("change")};a=b(document).bind("multiselectrefresh."+d._namespaceID,b.proxy(function(){this.updateCache();this._handler()},this));this.options.autoReset&&a.bind("multiselectclose."+d._namespaceID,b.proxy(this._reset,this))},_handler:function(c){var d=b.trim(this.input[0].value.toLowerCase()),
e=this.rows,f=this.inputs,h=this.cache;if(d){e.hide();var g=new RegExp(d.replace(a,"\\$&"),"gi");this._trigger("filter",c,b.map(h,function(a,b){return-1!==a.search(g)?(e.eq(b).show(),f.get(b)):null}))}else e.show();this.instance.menu.find(".ui-multiselect-optgroup-label").each(function(){var a=b(this),c=a.nextUntil(".ui-multiselect-optgroup-label").filter(function(){return"none"!==b.css(this,"display")}).length;a[c?"show":"hide"]()})},_reset:function(){this.input.val("").trigger("keyup")},updateCache:function(){this.rows=
this.instance.menu.find(".ui-multiselect-checkboxes li:not(.ui-multiselect-optgroup-label)");this.cache=this.element.children().map(function(){var a=b(this);"optgroup"===this.tagName.toLowerCase()&&(a=a.children());return a.map(function(){return this.innerHTML.toLowerCase()}).get()}).get()},widget:function(){return this.wrapper},destroy:function(){b.Widget.prototype.destroy.call(this);this.input.val("").trigger("keyup");this.wrapper.remove()}})})(jQuery);
"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(b){return this.substring(0,b.length)===b});var S3={gis:{}};S3.gis.options={};S3.timeline={};S3.JSONRequest={};
S3.queryString={parse:function(b){return"string"!==typeof b?{}:(b=b.trim().replace(/^(\?|#)/,""))?b.trim().split("&").reduce(function(a,b){var c=b.replace(/\+/g," ").split("=");b=c[0];c=c[1];b=decodeURIComponent(b);c=void 0===c?null:decodeURIComponent(c);a.hasOwnProperty(b)?Array.isArray(a[b])?a[b].push(c):a[b]=[a[b],c]:a[b]=c;return a},{}):{}},stringify:function(b){return b?Object.keys(b).map(function(a){var c=b[a];return Array.isArray(c)?c.map(function(b){return encodeURIComponent(a)+"="+encodeURIComponent(b)}).join("&"):
encodeURIComponent(a)+"="+encodeURIComponent(c)}).join("&"):""}};S3.uid=function(){return(+new Date/1E3*65536+65535*Math.random()>>0).toString(16)};
S3.Utf8={encode:function(b){b=b.replace(/\r\n/g,"\n");for(var a="",c=0;c<b.length;c++){var d=b.charCodeAt(c);128>d?a+=String.fromCharCode(d):(127<d&&2048>d?a+=String.fromCharCode(d>>6|192):(a+=String.fromCharCode(d>>12|224),a+=String.fromCharCode(d>>6&63|128)),a+=String.fromCharCode(d&63|128))}return a},decode:function(b){for(var a="",c=0,d,e,f;c<b.length;)d=b.charCodeAt(c),128>d?(a+=String.fromCharCode(d),c++):191<d&&224>d?(e=b.charCodeAt(c+1),a+=String.fromCharCode((d&31)<<6|e&63),c+=2):(e=b.charCodeAt(c+
1),f=b.charCodeAt(c+2),a+=String.fromCharCode((d&15)<<12|(e&63)<<6|f&63),c+=3);return a}};
S3.addTooltips=function(){$.cluetip.defaults.cluezIndex=9999;$(".tooltip").cluetip({activation:"hover",sticky:!1,splitTitle:"|"});$('label[title][title!=""]').cluetip({splitTitle:"|",showTitle:!1});$(".tooltipbody").cluetip({activation:"hover",sticky:!1,splitTitle:"|",showTitle:!1});var b='<img src="'+S3.Ap.concat("/static/img/cross2.png")+'" alt="close" />';$(".stickytip").cluetip({activation:"hover",sticky:!0,closePosition:"title",closeText:b,splitTitle:"|"});$(".errortip").cluetip({activation:"click",
sticky:!0,closePosition:"title",closeText:b,splitTitle:"|"});$(".ajaxtip").cluetip({activation:"click",sticky:!0,closePosition:"title",closeText:b,width:380});$(".htmltip").cluetip({activation:"hover",sticky:!1,local:!0,attribute:"show",width:380})};
S3.addModals=function(){$("a.s3_add_resource_link").attr("href",function(b,a){b=a;if(-1==a.indexOf("caller=")){var c=$(this).parents("tr").attr("id");c||(c=$(this).parent().parent().attr("id"));c||(c=$(this).parents(".form-row").attr("id"));c||(c=$(this).parents(".control-group").attr("id"));c&&(c=c.replace(/__row_comment/,"").replace(/__row/,""),b=a+"&caller="+c)}return b});$(".s3_add_resource_link, .s3_modal").off(".S3Modal").on("click.S3Modal",function(){var b=this.title,a=this.href,c=a.indexOf("caller=");
if(-1!=c){var d=a.slice(c+7);c=d.indexOf("&");-1!=c&&(d=d.slice(0,c));c=$("#"+d);c.hasClass("multiselect-widget")&&c.multiselect("close")}var e=S3.uid(),f=$("<iframe>",{id:e,src:"","class":"loading",marginWidth:"0",marginHeight:"0",frameBorder:"0"}).appendTo("body");f.on("load",function(){$(this).attr("src")&&S3.popup_loaded(e)});var h=this;f.dialog({autoOpen:!1,title:b,minHeight:480,minWidth:320,modal:!0,closeText:"",open:function(){$(".ui-widget-overlay").bind("click",function(){f.dialog("close")})},
close:function(){if(h.parent){var a=h.parent.$("iframe.ui-dialog-content"),b=a.width();a.width(0);window.setTimeout(function(){a.width(b)},300)}f.attr("src","").remove()}});f.attr("src",a).dialog("open");return!1})};S3.popup_loaded=function(b){if(window!=window.parent){var a=$(window.parent.document).find(".ui-dialog"),c=a.height();a.height(c+41);a=a.find("iframe");c=a.height();a.height(c+41)}a=$(".ui-dialog").width();$("#"+b).removeClass("loading").width(a).contents().find("#popup").show()};
S3.popup_remove=function(){$("iframe.ui-dialog-content").dialog("close")};S3.redraw_fns=["addModals","addTooltips"];S3.redraw=function(){for(var b=S3.redraw_fns,a=b.length,c=0;c<a;c++)S3[b[c]]()};$.widget("custom.iconselectmenu",$.ui.selectmenu,{_renderItem:function(b,a){var c=$("<li>",{text:a.label});a.disabled&&c.addClass("ui-state-disabled");var d=a.element;a=(a=a.element.attr("data-class"))?"ui-icon "+a:"ui-icon";$("<span>",{style:d.attr("data-style"),"class":a}).appendTo(c);return c.appendTo(b)}});
S3.getClientLocation=function(b){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(a){b.val(a.coords.latitude+"|"+a.coords.longitude+"|"+a.coords.accuracy)})};S3.confirmClick=function(b,a){S3.interactive&&$(b).click(function(b){if(confirm(a))return!0;b.preventDefault();return!1})};
S3.autoTotals=function(b,a,c){c=void 0===c?"":c+"_";b=$("#"+c+b);for(var d,e,f,h=0;h<a.length;h++)d=a[h],$("#"+c+d).change(function(){for(var g=f=0;g<a.length;g++)d=a[g],(e=$("#"+c+d).val())&&(f+=parseInt(e));b.val(f).trigger("change")})};
S3.showHidden=function(b,a,c){c=void 0===c?"":c+"_";b=$("#"+c+b);b.change(function(){var d;if(b.prop("checked"))for(d=0;d<a.length;d++){var e=a[d];e="#"+c+e;$(e+"__row, "+e+"__subheading, "+e+"__subheading1, "+e+"__subheading2").show()}else for(d=0;d<a.length;d++)e=a[d],e="#"+c+e,$(e+"__row, "+e+"__subheading, "+e+"__subheading1, "+e+"__subheading2").hide()});b.trigger("change")};
S3.trunk8=function(b,a,c){var d={fill:'&hellip; <a class="s3-truncate-more" href="#">'+c+"</a>"};a&&(d.lines=a);$(b).trunk8(d);$(".dl").on("listUpdate",function(){$(this).find(b).each(function(){void 0===this.trunk8&&$(this).trunk8(d)})});$(".dataTable").on("draw.dt",function(){$(this).find(b).each(function(){void 0===this.trunk8&&$(this).trunk8(d)})})};
S3.maxLength={init:function(b,a){var c=this.apply;if(a){var d=$("#"+b);d.next("div.maxLength_status").remove();d.after('<div class="maxLength_status"></div>');c(b,a);d.unbind("keyup.maxLength").bind("keyup.maxLength",function(){c(b,a)})}else $("#"+b).removeClass("maxLength").unbind("keyup.maxLength").next("div.maxLength_status").remove()},apply:function(b,a){var c=i18n.characters_left||"characters left";b=$("#"+b);var d=b.val().length;d>=a?(b.addClass("maxLength"),b.val(b.val().substr(0,a))):b.removeClass("maxLength");
a-=d;0>a&&(a=0);b.next("div.maxLength_status").html(a+" "+c)}};
var S3SetNavigateAwayConfirm=function(b,a){"implicit"!==a&&(window.onbeforeunload=function(){return i18n.unsaved_changes})},S3ClearNavigateAwayConfirm=function(){window.onbeforeunload=function(){}},S3EnableNavigateAwayConfirm=function(){$(document).ready(function(){0<$("[class=error]").length&&S3SetNavigateAwayConfirm();var b=$("form:not(.filter-form,.pt-form)");$("input, textarea",b).on("keypress",S3SetNavigateAwayConfirm);$("select",b).change(S3SetNavigateAwayConfirm);b.submit(S3ClearNavigateAwayConfirm)})};
(function(b){function a(a){this.xhr=null;var c=b.extend({},b.ajaxS3Settings,a);this.options=c;this.successCallback=a.success;this.errorCallback=a.error;c.success=null;c.error=null;this.message=a.message;this.tryCount=0;this.retryLimit=c.retryLimit;this.alerts=[];this.ignoreStatus=c.ignoreStatus||[]}b.ajaxS3Settings={timeout:1E4,retryLimit:5,dataType:"json",async:!0,type:"GET"};a.prototype.onSuccess=function(a){var b=this.AjaxS3;b&&(b.tryCount=0,b.xhr=null,S3.hideAlerts(b.alerts),a&&a.message&&S3.showAlert(a.message,
"success"),(b=b.successCallback)&&b.apply(this,arguments))};a.prototype.onFailure=function(a,b){var c=this.AjaxS3;if(c){var d=a.status,h=a.readyState;h=!d&&0===h;if("abort"==b||h){if(c.tryCount=0,c.xhr=null,h)return}else if("timeout"==b){c.tryCount++;d=c.tryCount;h=c.message;if(d<=c.retryLimit){h=i18n.ajax_get+" "+(h?h:i18n.ajax_fmd)+"... "+i18n.ajax_rtr+" "+d;c.alerts.push(S3.showAlert(h,"warning"));c.send();return}c.xhr=null;h=i18n.ajax_wht+" "+d+" "+i18n.ajax_gvn;S3.showAlert(h,"error")}else 500==
d?S3.showAlert(i18n.ajax_500,"error"):-1==c.ignoreStatus.indexOf(d)&&((d=a.responseJSON)&&d.message?S3.showAlert(d.message,"error"):S3.showAlert(i18n.ajax_dwn,"error"));(c=c.errorCallback)&&c.apply(this,arguments)}};a.prototype.start=function(){if(null===this.xhr){var a=this.message;a&&(a=i18n.ajax_get+" "+(a?a:i18n.ajax_fmd)+"...",this.alerts.push(S3.showAlert(a,"info")));this.send();return this}};a.prototype.send=function(){var a=this.options;a.AjaxS3=this;this.xhr=b.ajax(a).done(function(){this.AjaxS3.onSuccess.apply(this,
arguments)}).fail(function(){this.AjaxS3.onFailure.apply(this,arguments)})};a.prototype.abort=function(){this.xhr&&(this.xhr.abort(),this.xhr=null)};b.ajaxS3=function(b){return(new a(b)).start()};b.getS3=function(a,d,e,f,h,g){b.isFunction(d)&&(g=h,h=f,f=e,e=d,d=null);return b.ajaxS3({type:"GET",url:a,async:!g,data:d,dataType:f,message:h,success:e})};b.getJSONS3=function(a,d,e,f,h){b.isFunction(d)&&(h=f,f=e,e=d,d=null);h||(h=!1);return b.getS3(a,d,e,"json",f,h)}})($);
S3.showAlert=function(b,a,c){a||(a="success");var d=$("#alert-space");b=$('<div class="alert alert-'+a+'">'+b+'<button type="button" class="close" data-dismiss="alert">\u00d7</button></div>');d.append(b).undelegate(".s3").delegate(".alert","click.s3",function(){$(this).fadeOut("slow").remove();c&&c();return!1});return b};S3.hideAlerts=function(b){"string"==typeof b?$(".alert-"+b).remove():b?b.forEach(function(a){a.remove()}):$("#alert-space").empty()};
S3.fieldError=function(b,a){$(b).after('<div class="error" style="display: block;">'+a+"</div>")};S3.unmask=function(b,a){var c=b+"_"+a+"_unmask";b=b+"_"+a;a=$("#"+c).text();a==i18n.password_view?(a=i18n.password_mask,$("#"+b).attr("type","text")):(a=i18n.password_view,$("#"+b).attr("type","password"));$("#"+c).text(a)};
var s3_viewMap=function(b,a,c,d,e){var f=S3.Ap.concat("/gis/display_feature/")+b,h=$("#map"),g=$("#iframe-map"),k=document.location.pathname.split("/");void 0===d&&(d=k[2]);void 0===e&&(e=k[3]);f+="?c="+d+"&f="+e;6<k.length&&$.isNumeric(k[6])?f+="&r="+k[6]:4<k.length&&$.isNumeric(k[4])&&(f+="&r="+k[4]);0==h.length||"True"==c?S3.openPopup(f+"&popup=1",!0):(d=function(){var a=$("#close-iframe-map");g.is(":visible")?a.css({display:""}):a.css({display:"none"})},c=function(){$("#iframe-map").slideUp("medium");
$("#close-iframe-map").css({display:"none"})},0==g.length?(b=$("<iframe id='iframe-map' data-feature='"+b+"' style='border-style:none' width='100%' height='"+a+"' src='"+f+"' />"),a=$("<a class='button tiny' id='close-iframe-map'>"+i18n.close_map+"</a>"),a.bind("click",c),h.slideDown("medium"),h.append(b),h.append($('<div style="margin-bottom:10px" />').append(a))):g.attr("data-feature")==b?g.slideToggle("medium",d):(g.attr({src:f,"data-feature":b}),g.slideDown("medium",d)))},s3_viewMapMulti=function(b,
a,c,d){b=S3.Ap.concat("/gis/display_feature//?module=")+b+"&resource="+a+"&instance="+c+"&jresource="+d;var e=$("#map").html();b='<iframe width="640" height="480" src="'+b+'"></iframe>';a=$('<a href="#">'+i18n.close_map+"</a>");a.bind("click",function(a){$("#map").html(e);a.preventDefault()});$("#map").html(b);$("#map").append($("<div style='margin-bottom:10px' />").append(a))};S3.popupWin=null;
S3.openPopup=function(b,a){if(!S3.popupWin||S3.popupWin.closed){var c="width=640, height=480";!0===a&&(c+=",left="+(screen.width-640)/2+",top="+(screen.height-480)/2);S3.popupWin=window.open(b,"popupWin",c)}else S3.popupWin.focus()};
(function(){var b=function(a){if("string"==typeof a)var b='[name="'+a+'"]';else{var c=a.prefix?a.prefix:"default";a.alias&&(c+=a.alias);var d=a.inlineType||"sub",e=a.inlineRows;void 0===e&&(e=!0);"sub"==d?(a=a.name,b=e?'[name^="'+c+'"][name*="_i_'+a+'_edit_"]':'[name="'+c+"-"+a+'"]'):"link"==d&&(b='[name="link_'+c+'"]')}return b},a=function(a,b){a.siblings("."+b+"-throbber").length||a.after('<div class="'+b+'-throbber throbber"/>')},c=function(a,b){a=a.siblings("."+b+"-throbber");a.length&&a.remove()},
d=function(a,b,c){$("a#"+a+"_add").each(function(){var a=this.search,d=[],e=!1;a&&a.substring(1).split("&").forEach(function(a){decodeURIComponent(a.split("=")[0])!=b&&d.push(a)});void 0!==c&&null!==c&&(e=encodeURIComponent(b)+"="+encodeURIComponent(c),d.push(e),e=!0);a=d.length?"?"+d.join("&"):"";a=this.protocol+"//"+this.host+this.pathname+a+this.hash;a=$(this).attr("href",a);e?a.parent().show():a.parent().hide()})},e=function(a,b){var c=[],d=0;if(0===a.length)((a=b.showEmptyField)||void 0===a)&&
c.push('<option value="">'+(b.msgNoRecords||"-")+"</option>");else{var e=b.fncPrep,f=null;if(e)try{f=e(a)}catch(r){}e=b.lookupField||"id";for(var g=b.fncRepresent,h,k,t,v=0;v<a.length;v++)h=a[v],k=h[e],0===v&&(d=k),t=g?g(h,f):h.name,h=h._tooltip?' title="'+h._tooltip+'"':"",c.push("<option"+h+' value="'+k+'">'+t+"</option>");b.optional&&(d=0,c.unshift('<option value=""></option>'))}return{options:c.join(""),defaultValue:d}},f=function(b,f,h,l,n){var g=!1;if(1<b.length)if("checkbox"==b.first().attr("type")){if(b.first().closest(".checkboxes-widget-s3")){s3_debug("filterOptionsS3 error: checkboxes-widget-s3 not supported, skipping");
return}}else g=!0;g&&l.getWidgetHTML&&(s3_debug("filterOptionsS3 warning: getWidgetHTML=true not suitable for multiple target widgets (e.g. inline rows)"),b=b.first(),g=!1);g=g?b.first():b;var k=g.data("update-request");if(k)try{k.abort()}catch(r){}var m=l.lookupResource;if(""===h||null===h||void 0===h)b.val("").prop("disabled",!0),b.multiselect("instance")&&b.multiselect("refresh").multiselect("disable"),b.change(),d(m,f);else{if(l.lookupURL)k=l.lookupURL,h&&(k=k.concat(h));else if(k=S3.Ap.concat("/",
l.lookupPrefix,"/",m,".json"),h){var z=m+"."+f+"="+h;k=-1!=k.indexOf("?")?k.concat("&"+z):k.concat("?"+z)}if(z=l.tooltip)z="tooltip="+z,k=-1!=k.indexOf("?")?k.concat("&"+z):k.concat("?"+z);if((z=l.represent)||"undefined"==typeof z)k=-1!=k.indexOf("?")?k.concat("&represent=1"):k.concat("?represent=1");z=null;if(l.getWidgetHTML){z=l.targetWidget||b.attr("name");var t=$('[name = "'+z+'"]');z=!0;var v=!1;if(z=t.hasClass("groupedopts-widget")?t.groupedopts("visible"):t.data("visible")||t.is(":visible"))v=
!0,t.data("visible",!0),t.hasClass("groupedopts-widget")?t.groupedopts("hide"):t.hide(),a(t,m);z=$.ajaxS3({url:k,dataType:"html",success:function(a){var b=t;if(""!==a){var e=!1,g=!1;b.hasClass("groupedopts-widget")?e=!0:b.hasClass("multiselect-widget")&&(g=!0);var k;(e||g)&&"select"==b.prop("tagName").toLowerCase()&&(k=b.val());b.html(a).change().prop("disabled",!1);if(e||g){if(k){a=[];g=0;for(var l=k.length,r;g<l;g++)r=k[g],b.find("option[value="+r+"]").length&&a.push(r);b.val(a).change()}e?b.groupedopts("refresh"):
b.multiselect("refresh")}}else b.prop("disabled",!0);t=b;v&&(t.hasClass("groupedopts-widget")?t.find("option").length&&t.groupedopts("show"):t.show());c(t,m);d(m,f,h);n||S3ClearNavigateAwayConfirm()}})}else b.each(function(){var b=$(this);(b.hasClass("groupedopts-widget")?b.groupedopts("visible"):b.data("visible")||b.is(":visible"))?(b.data("visible",!0),b.hasClass("groupedopts-widget")?b.groupedopts("hide"):b.hide(),a(b,m)):b.data("visible",!1)}),z=$.ajaxS3({url:k,dataType:"json",success:function(a){var g=
e(a,l),k=0===a.length?!0:!1;b.each(function(){var a=$(this);a:if(a.hasClass("checkboxes-widget-s3"))s3_debug("filterOptionsS3 error: checkboxes-widget-s3 not supported, updateOptions aborted"),a=void 0;else{var b=g.options,d=g.defaultValue,e=[];if(!k){var f;if(a.hasClass("checkboxes-widget-s3")){a=void 0;break a}else{(f=a.val())||(f=a.prop("value"));$.isArray(f)||(f=[f]);for(var h=0,l=f.length,r;h<l;h++)(r=f[h])&&$(b).filter("option[value="+r+"]").length&&e.push(r)}e.length&&(d=e)}"INPUT"==a.prop("tagName")&&
(e=$("<select/>").addClass(a.attr("class")).attr("id",a.attr("id")).attr("name",a.attr("name")).data("visible",a.data("visible")).hide(),a.replaceWith(e),a=e);e=""===b;a.html(b).val(d).change().prop("disabled",e);a.hasClass("groupedopts-widget")?a.groupedopts("refresh"):a.hasClass("multiselect-widget")&&(a.multiselect("refresh"),e?a.multiselect("disable"):a.multiselect("enable"))}a.data("visible")&&(a.hasClass("groupedopts-widget")?k||a.groupedopts("show"):a.show());c(a,m)});d(m,f,h);n||S3ClearNavigateAwayConfirm()}});
g.data("update-request",z)}},h=function(a){var b="";if("checkbox"==a.attr("type")){var c=a.closest(".checkboxes-widget-s3");c&&(a=c)}if(a.hasClass("checkboxes-widget-s3"))b=[],a.find("input:checked").each(function(){b.push($(this).val())});else if(a.hasClass("s3-hierarchy-input")){if(b="",c=a.val())c=JSON.parse(c),c.constructor===Array?c.length&&(b=c[0]):c&&(b=c)}else 1==a.length&&(b=a.val());return[a,b]};$.filterOptionsS3=function(a){var c=a.trigger;c=a.event?a.event:"string"==typeof c?c:c.name;
var d=a.lookupKey||c,e=b(a.trigger),g=b(a.target);if(g){var q=$(g);if(q.length){var p=q.closest("form");if(e&&(q=p.find(e),q.length)){$(e).each(function(){var b=$(this);var c=b.closest(".inline-form");if(!c.length||!c.hasClass("empty-row")&&"none"!=c.css("display"))c="row"==a.scope?b.closest(".edit-row.inline-form,.add-row.inline-form"):p,b=h(b),c=c.find(g),f(c,d,b[1],a,!1)});var u="triggerUpdate."+c;p.undelegate(e,"change.s3options").delegate(e,"change.s3options",function(){var a=h($(this));p.trigger(u,
a)});p.on(u,function(b,c,e){b=("row"==a.scope?c.closest(".edit-row.inline-form,.add-row.inline-form"):p).find(g);f(b,d,e,a,!0)})}}}}})(jQuery);(function(){$.cancelButtonS3=function(b){var a=$(".s3-cancel");if(a.length){var c=document.referrer;if(c&&c.split("?")[0].split("#")[0]!=document.URL.split("?")[0].split("#")[0]){var d=document.createElement("a");d.href=c;d.host==window.location.host&&0===d.pathname.lastIndexOf(S3.Ap,0)?a.attr("href",c):b?a.attr("href",b):a.hide()}else b?a.attr("href",b):a.hide()}}})(jQuery);
S3.slider=function(b,a,c,d,e){var f=$("#"+b),h="#"+b+"_slider";$(h).slider({min:a,max:c,step:d,value:e,slide:function(a,b){f.val(b.value)},change:function(){if(null==e){e=(a+c)/2;var b=e%d;0!=b&&(e=b<d/2?e-b:e+b);$(h).slider("option","value",e);$(h+" .ui-slider-handle").show();f.show().next().remove()}}});null==e&&($(h+" .ui-slider-handle").hide(),f.hide().after("<p>"+i18n.slider_help+"</p>"));f.closest("form").submit(function(){f.prop("disabled",!1);return!0})};
S3.range_slider=function(b,a,c,d,e,f,h){var g=$("#"+b),k=$("#"+a),m=$("#"+c);g.slider({range:!0,min:d,max:e,step:f,values:h,slide:function(a,b){k.val(b.values[0]);m.val(b.values[1]).closest("form").trigger("optionChanged")}});k.on("change.slider",function(){var a=k.val();""==a&&(a=d);g.slider("values",0,a)});m.on("change.slider",function(){var a=m.val();""==a&&(a=e);g.slider("values",1,a)})};
S3.reloadWithQueryStringVars=function(b){var a=location.search?location.search.substring(1).split("&"):[],c={},d=(location.search?location.href.replace(location.search,""):location.href)+"?";if(0<a.length)for(var e=0;e<a.length;e++){var f=a[e].split("=");c[f[0]]=f[1]}if(b)for(var h in b)c[h]=b[h];if(c){for(var g in c)d+=g+"="+c[g]+"&";d=d.substring(0,d.length-1);window.location.href=d}else window.location.href=location.href};
(function(){var b=function(){$(".mark-deduplicate").click(function(){var a=$("#markDuplicateURL").attr("href");a&&$.ajaxS3({type:"POST",url:a,data:{},dataType:"JSON",success:function(){$(".mark-deduplicate, .unmark-deduplicate, .deduplicate").toggleClass("hide")}})});$(".unmark-deduplicate").click(function(){var a=$("#markDuplicateURL").attr("href");a&&$.ajaxS3({type:"POST",url:a+"?remove=1",data:{},dataType:"JSON",success:function(){$(".mark-deduplicate, .unmark-deduplicate, .deduplicate").toggleClass("hide")}})});
$(".swap-button").click(function(){var a=this.id.slice(5),b=$("#original_"+a),e=b.attr("id"),f=b.attr("name"),h=b.parent().closest("td.mwidget");a=$("#duplicate_"+a);var g=a.attr("id"),k=a.attr("name"),m=a.parent().closest("td.mwidget");b.attr("id","swap_original_id");b.attr("name","swap_original_name");$("#dummy"+e).attr("id","dummy_swap_original_id");a.attr("id","swap_duplicate_id");a.attr("name","swap_duplicate_name");$("#dummy"+g).attr("id","dummy_swap_duplicate_id");h.before('<td id="swap_original_placeholder"></td>');
h=h.detach();m.before('<td id="swap_duplicate_placeholder"></td>');m=m.detach();$("#swap_original_placeholder").after(m);$("#swap_original_placeholder").remove();$("#swap_duplicate_placeholder").after(h);$("#swap_duplicate_placeholder").remove();b.attr("id",g);b.attr("name",k);$("#dummy_swap_original_id").attr("id","dummy"+g);a.attr("id",e);a.attr("name",f);$("#dummy_swap_duplicate").attr("id","dummy"+e)})},a=function(){var a=$(".aside");if(a.length){var b=$("#menu_modules");b.length||(b=$("#navbar-inner"),
b.length||(b=$("#header")));var e=$("#menu_options");b.height()+e.height()+10<$(window).height()?(a.css("position","fixed"),$("#content").css("min-height",e.height())):a.css("position","static")}};$(document).ready(function(){$(".alert-error").hide().slideDown("slow");$(".alert-error").click(function(){$(this).fadeOut("slow");return!1});$(".alert-warning").hide().slideDown("slow");$(".alert-warning").click(function(){$(this).fadeOut("slow");return!1});$(".alert-info").hide().slideDown("slow");$(".alert-info").click(function(){$(this).fadeOut("slow");
return!1});$(".alert-success").hide().slideDown("slow");$(".alert-success").click(function(){$(this).fadeOut("slow");return!1});$("input[type='checkbox'].delete").click(function(){this.checked&&!confirm(i18n.delete_confirmation)&&(this.checked=!1)});var c=$("form .error[id]").eq(0).attr("id");if(void 0!=c){c=c.replace("__error","");c=$("[name="+c+"]").attr("id");c=$("[for="+c+"]");try{window.scrollTo(0,c.offset().top),S3.FocusOnFirstField=!1}catch(e){}}S3.interactive&&($(document).on("click","a.delete-btn",
function(a){if(confirm(i18n.delete_confirmation))return!0;a.preventDefault();return!1}),0!=S3.FocusOnFirstField&&$("input:text:visible:first").focus());$("input.int_amount").keyup(function(){this.value=this.value.reverse().replace(/[^0-9\-,]|\-(?=.)/g,"").reverse()});$("input.float_amount").keyup(function(){this.value=this.value.reverse().replace(/[^0-9\-\.,]|[\-](?=.)|[\.](?=[0-9]*[\.])/g,"").reverse()});$('input[name="first_name"]').focusout(function(){this.value=this.value.charAt(0).toLocaleUpperCase()+
this.value.substring(1)});S3.rtl&&($(".phone-widget").each(function(){var a=this.value;a&&"\u200e"!=a.charAt(0)&&(this.value="\u200e"+a)}),$(".phone-widget").focusout(function(){var a=this.value;a&&("\u200e"!=a.charAt(0)?"+"==a.charAt(a.length-1)?this.value="\u200e+"+a.substr(0,a.length-2):this.value="\u200e"+a:"+"==a.charAt(a.length-1)&&(this.value="\u200e+"+a.substr(1,a.length-2)))}));$("#show-add-btn").click(function(){$("#show-add-btn").hide(10,function(){$("#list-add").slideDown("medium");$(".select-widget").selectmenu("refresh")})});
$("textarea.resizable:not(.textarea-processed)").each(function(){function a(a){d.height(Math.max(32,k+a.pageY)+"px");return!1}function b(){$(document).unbind("mousemove",a).unbind("mouseup",b);d.css("opacity",1)}var c=$(this);if(c.is("textarea.teaser:not(.teaser-processed)"))return!1;var d=c.addClass("textarea-processed"),k=null;c.wrap('<div class="resizable-textarea"><span></span></div>').parent().append($('<div class="grippie"></div>').mousedown(function(c){k=d.height()-c.pageY;d.css("opacity",
.25);$(document).mousemove(a).mouseup(b);return!1}));var m=$("div.grippie",c.parent())[0];m.style.marginRight=m.offsetWidth-c[0].offsetWidth+"px";return!0});$("#modulenav .hoverable").hover(function(){$(this).addClass("hovered")},function(){$(this).removeClass("hovered")});$("#modulenav li").hover(function(){var a=$(this).width(),b=$("ul",this).width();null!==b&&b<a&&$("ul",this).css({width:a.toString()+"px"});$("ul",this).css("display","block")},function(){$("ul",this).css("display","none")});S3.redraw();
"undefined"!=typeof $.fn.popover&&$("body").popover({selector:".s3-popover",trigger:"hover",placement:"left"});a();$(window).bind("resize",a);b();c=$("form");if(c.length){c.append("<input type='hidden' value='"+(new Date).getTimezoneOffset()+"' name='_utc_offset'/>");try{var d=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){}d&&c.append("<input type='hidden' value='"+d+"' name='_timezone'/>")}0<$("#socialmedia_share").length&&(d=document.location.href,$("#socialmedia_share").append("<div class='socialmedia_element'><script src='//platform.linkedin.com/in.js'>\x3c/script><script type='IN/Share' data-counter='right'>\x3c/script></div>"),
$("#socialmedia_share").append("<div class='socialmedia_element'><a href='https://twitter.com/share' class='twitter-share-button' data-count='none' data-hashtags='sahana-eden'>Tweet</a><script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src='//platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','twitter-wjs');\x3c/script></div>"),$("#socialmedia_share").append("<div class='socialmedia_element'><div id='fb-root'></div><script>(function(d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = '//connect.facebook.net/en_US/all.js#xfbml=1'; fjs.parentNode.insertBefore(js, fjs); }(document, 'script', 'facebook-jssdk'));\x3c/script> <div class='fb-like' data-send='false' data-layout='button_count' data-show-faces='true' data-href='"+
d+"'></div></div>"));$(".form-toggle").click(function(){var a=$(this),b=$(this).data("hidden");b=b&&"False"!=b;a.data("hidden",b?!1:!0).siblings().slideToggle("medium",function(){a.children("span").each(function(){$(this).text(b?$(this).data("off"):$(this).data("on")).siblings().toggle()})})});$("#menu-options-toggle,#list-filter-toggle").on("click",function(a){a.stopPropagation();var b=$(this);a=b.data("status");var c="menu-options-toggle"==this.id?$("#menu-options"):$("#list-filter");"off"==a?c.hide().removeClass("hide-for-small").slideDown(400,
function(){b.data("status","on").text(b.data("on"))}):c.slideUp(400,function(){c.addClass("hide-for-small").show();b.data("status","off").text(b.data("off"))})});$(".s3-download-button").on("click",function(a){a.preventDefault();a.stopPropagation();if(a=$(this).data("url")){var b=document.getElementById("s3-download");null==b&&(b=document.createElement("iframe"),b.id="s3-download",b.style.visibility="hidden",document.body.appendChild(b));$("#s3-download").off("load").on("load",function(){var a=$(this);
try{var b=JSON.parse(this.contentDocument.body.textContent).message}catch(k){a.dialog({title:"Download failed",width:500,height:300,close:function(){a.attr("src","").remove()}}).css({visibility:"visible",width:"100%"});return}alert(b)});b.src=a;return!1}})})})();
$.fn.collapsible=function(b){b=$.extend({defaulthide:!0,symbolhide:"-",symbolshow:"+",imagehide:null,imageshow:null,xoffset:"-15",yoffset:"0"},b);var a=$.meta?$.extend({},b,$$.data()):b;b=$(this);a.imageshow&&(a.symbolshow='<img src="'+a.imageshow+'" class="jc-show" border="0">');a.imagehide&&(a.symbolhide='<img src="'+a.imagehide+'" class="jc-hide" border="0">');var c=a.symbolshow;$("li",b).each(function(b){0<$(">ul, >ol",this).size()&&(a.defaulthide?$(">ul, >ol",this).hide():c=a.symbolhide,$(this).prepend('<a href="" class="jcollapsible" style="position:absolute;outline:0;left:'+
a.xoffset+"px;top:"+a.yoffset+'px;">'+c+"</a>").css("position","relative"))});$(".jcollapsible",b).click(function(){var b=$(this).parent();$(">ul, >ol",b).slideToggle("fast");$(this).html($(this).html()==a.symbolshow?a.symbolhide:a.symbolshow);return!1})};
(function(b){b.cluetip={version:"1.2.5",template:'<div><div class="cluetip-outer"><h3 class="cluetip-title ui-widget-header ui-cluetip-header"></h3><div class="cluetip-inner ui-widget-content ui-cluetip-content"></div></div><div class="cluetip-extra"></div><div class="cluetip-arrows ui-state-default"></div></div>',setup:{insertionType:"appendTo",insertionElement:"body"},defaults:{multiple:!1,width:275,height:"auto",cluezIndex:97,positionBy:"auto",topOffset:15,leftOffset:15,local:!1,localPrefix:null,
localIdSuffix:null,hideLocal:!0,attribute:"rel",titleAttribute:"title",splitTitle:"",escapeTitle:!1,showTitle:!0,cluetipClass:"default",hoverClass:"",waitImage:!0,cursor:"help",arrows:!1,dropShadow:!0,dropShadowSteps:6,sticky:!1,mouseOutClose:!1,activation:"hover",clickThrough:!0,tracking:!1,delayedClose:0,closePosition:"top",closeText:"Close",truncate:0,fx:{open:"show",openSpeed:""},hoverIntent:{sensitivity:3,interval:50,timeout:0},onActivate:function(a){return!0},onShow:function(a,b){},onHide:function(a,
b){},ajaxCache:!0,ajaxProcess:function(a){return a=a.replace(/<(script|style|title)[^<]+<\/(script|style|title)>/gm,"").replace(/<(link|meta)[^>]+>/g,"")},ajaxSettings:{dataType:"html"},debug:!1}};var a,c={},d=0,e=0;b.fn.attrProp=b.fn.prop||b.fn.attr;b.fn.cluetip=function(f,h){function g(a,c){var d=a||"";c=c||"";"object"==typeof c?b.each(c,function(a,b){d+="-"+a+"-"+b}):"string"==typeof c&&(d+=c);return d}function k(a,c,d){d="";c=c.dropShadow&&c.dropShadowSteps?+c.dropShadowSteps:0;if(b.support.boxShadow)return c&&
(d="1px 1px "+c+"px rgba(0,0,0,0.5)"),a.css(b.support.boxShadow,d),!1;d=a.find(".cluetip-drop-shadow");if(c==d.length)return d;d.remove();d=[];for(var e=0;e<c;)d[e++]='<div style="top:'+e+"px;left:"+e+'px;"></div>';return d=b(d.join("")).css({position:"absolute",backgroundColor:"#000",zIndex:v-1,opacity:.1}).addClass("cluetip-drop-shadow").prependTo(a)}var m,l;"object"==typeof f&&(h=f,f=null);if("destroy"==f){var n=this.data("cluetip");n&&(b(n.selector).remove(),b.removeData(this,"title"),b.removeData(this,
"cluetip"));b(document).unbind(".cluetip");return this.unbind(".cluetip")}h=b.extend(!0,{},b.cluetip.defaults,h||{});d++;n=b.cluetip.backCompat||!h.multiple?"cluetip":"cluetip-"+d;var q="#"+n,p=b.cluetip.backCompat?"#":".",u=b.cluetip.setup.insertionType,z=b.cluetip.setup.insertionElement||"body";u=/appendTo|prependTo|insertBefore|insertAfter/.test(u)?u:"appendTo";var t=b(q);if(!t.length){t=b(b.cluetip.template)[u](z).attr("id",n).css({position:"absolute",display:"none"});var v=+h.cluezIndex;var r=
t.find(p+"cluetip-outer").css({position:"relative",zIndex:v});var w=t.find(p+"cluetip-inner");var B=t.find(p+"cluetip-title")}a=b("#cluetip-waitimage");a.length||(a=b("<div></div>").attr("id","cluetip-waitimage").css({position:"absolute"}));a.insertBefore(t).hide();var A=(parseInt(t.css("paddingLeft"),10)||0)+(parseInt(t.css("paddingRight"),10)||0);this.each(function(d){function n(){return!1}function u(a,b){var c=a.status;b.beforeSend(a.xhr,b);if("error"==c)b[c](a.xhr,a.textStatus);else if("success"==
c)b[c](a.data,a.textStatus,a.xhr);b.complete(a.xhr,b.textStatus)}var z=this,y=b(this),x=b.extend(!0,{},h,b.metadata?y.metadata():b.meta?y.data():y.data("cluetip")||{}),Y=!1,aa=!1,fa=0,N=x[x.attribute]||("href"==x.attribute?y.attr(x.attribute):y.attrProp(x.attribute)||y.attr(x.attribute)),ba=x.cluetipClass;v=+x.cluezIndex;y.data("cluetip",{title:z.title,zIndex:v,selector:q});if(!N&&!x.splitTitle&&!f)return!0;x.local&&x.localPrefix&&(N=x.localPrefix+N);x.local&&x.hideLocal&&N&&b(N+":first").hide();
var L=parseInt(x.topOffset,10),V=parseInt(x.leftOffset,10),W,R,D=isNaN(parseInt(x.height,10))?"auto":/\D/g.test(x.height)?x.height:x.height+"px",K,F,E,O,S,X=parseInt(x.width,10)||275,P=X+A+x.dropShadowSteps,Q=this.offsetWidth,M,I,J,Z,T="title"!=x.attribute?y.attrProp(x.titleAttribute)||"":"";if(x.splitTitle){var ca=T.split(x.splitTitle);T=x.showTitle||""===ca[0]?ca.shift():""}x.escapeTitle&&(T=T.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;"));var ha=function(k){if(!1===x.onActivate.call(z,
k))return!1;aa=!0;t=b(q).css({position:"absolute"});r=t.find(p+"cluetip-outer");w=t.find(p+"cluetip-inner");B=t.find(p+"cluetip-title");m=t.find(p+"cluetip-arrows");t.removeClass().css({width:X});N==y.attr("href")&&y.css("cursor",x.cursor);x.hoverClass&&y.addClass(x.hoverClass);F=y.offset().top;M=y.offset().left;Q=y.innerWidth();k.type==focus?(J=M+Q/2+V,t.css({left:I}),O=F+L):(J=k.pageX,O=k.pageY);"area"!=z.tagName.toLowerCase()&&(K=b(document).scrollTop(),Z=b(window).width());if("fixed"==x.positionBy)I=
Q+M+V,t.css({left:I});else{I=Q>M&&M>P||M+Q+P+V>Z?M-P-V:Q+M+V;if("area"==z.tagName.toLowerCase()||"mouse"==x.positionBy||Q+P>Z)J+20+P>Z?(t.addClass("cluetip-"+ba),I=0<=J-P-V?J-P-V-parseInt(t.css("marginLeft"),10)+parseInt(w.css("marginRight"),10):J-P/2):I=J+V;var l=0>I?k.pageY+L:k.pageY;if(0>I||"bottomTop"==x.positionBy)I=J+P/2>Z?Z/2-P/2:Math.max(J-P/2,0)}m.css({zIndex:y.data("cluetip").zIndex+1});t.css({left:I,zIndex:y.data("cluetip").zIndex});R=b(window).height();if(f)"function"==typeof f&&(f=f.call(z)),
w.html(f),da(l);else if(ca){k=ca.length;w.html(k?ca[0]:"");if(1<k)for(var n=1;n<k;n++)w.append('<div class="split-body">'+ca[n]+"</div>");da(l)}else if(x.local||0===N.indexOf("#"))x.local&&(k=b(N+(/^#\S+$/.test(N)?"":":eq("+d+")")).clone(!0).show(),x.localIdSuffix&&k.attr("id",k[0].id+x.localIdSuffix),w.html(k),da(l));else if(/\.(jpe?g|tiff?|gif|png)(?:\?.*)?$/i.test(N))w.html('<img src="'+N+'" alt="'+T+'" />'),da(l);else{var A=x.ajaxSettings.beforeSend,G=x.ajaxSettings.error,H=x.ajaxSettings.success,
C=x.ajaxSettings.complete;var v=g(N,x.ajaxSettings.data);k=b.extend(!0,{},x.ajaxSettings,{cache:x.ajaxCache,url:N,beforeSend:function(b,c){A&&A.call(z,b,t,w,c);r.children().empty();x.waitImage&&a.css({top:O+20,left:J+20,zIndex:y.data("cluetip").zIndex-1}).show()},error:function(a,b){h.ajaxCache&&!c[v]&&(c[v]={status:"error",textStatus:b,xhr:a});aa&&(G?G.call(z,a,b,t,w):w.html("<i>sorry, the contents could not be loaded</i>"))},success:function(a,b,d){h.ajaxCache&&!c[v]&&(c[v]={status:"success",data:a,
textStatus:b,xhr:d});Y=x.ajaxProcess.call(z,a);"object"==typeof Y&&null!==Y&&(T=Y.title,Y=Y.content);aa&&(H&&H.call(z,a,b,t,w),w.html(Y))},complete:function(c,d){C&&C.call(z,c,d,t,w);var f=w[0].getElementsByTagName("img");e=f.length;c=0;for(d=f.length;c<d;c++)f[c].complete&&e--;e&&!b.browser.opera?b(f).bind("load.ct error.ct",function(){e--;0===e&&(a.hide(),b(f).unbind(".ct"),aa&&da(l))}):(a.hide(),aa&&da(l))}});c[v]?u(c[v],k):b.ajax(k)}},da=function(a){var c=T||x.showTitle&&"&nbsp;";var d="";var e=
"";t.addClass("cluetip-"+ba);if(x.truncate){var f=w.text().slice(0,x.truncate)+"...";w.html(f)}c?B.show().html(c):B.hide();x.sticky&&(c=b('<div class="cluetip-close"><a href="#">'+x.closeText+"</a></div>"),"bottom"==x.closePosition?c.appendTo(w):"title"==x.closePosition?c.prependTo(B):c.prependTo(w),c.bind("click.cluetip",function(){ea();return!1}),x.mouseOutClose?t.bind("mouseleave.cluetip",function(){ea()}):t.unbind("mouseleave.cluetip"));r.css({zIndex:y.data("cluetip").zIndex,overflow:"auto"==
D?"visible":"auto",height:D});W="auto"==D?Math.max(t.outerHeight(),t.height()):parseInt(D,10);E=F;S=K+R;"fixed"==x.positionBy?E=F-x.dropShadowSteps+L:I<J&&Math.max(I,0)+P>J||"bottomTop"==x.positionBy?F+W+L>S&&O-K>W+L?(E=O-W-L,e="top"):(E=O+L,e="bottom"):E=F+W+L>S?W>=R?K:S-W-L:"block"==y.css("display")||"area"==z.tagName.toLowerCase()||"mouse"==x.positionBy?a-L:F-x.dropShadowSteps;""===e&&(e=I<M?"left":"right");c=" clue-"+e+"-"+ba+" cluetip-"+ba;"rounded"==ba&&(c+=" ui-corner-all");t.css({top:E+"px"}).attrProp({className:"cluetip ui-widget ui-widget-content ui-cluetip"+
c});x.arrows?(/(left|right)/.test(e)&&(e=t.height()-m.height(),d=0<=I&&0<a?F-E-x.dropShadowSteps:0,d=(e>d?d:e)+"px"),m.css({top:d}).show()):m.hide();(l=k(t,x))&&l.length&&l.hide().css({height:W,width:X,zIndex:y.data("cluetip").zIndex-1}).show();t.hide()[x.fx.open](x.fx.openSpeed||0);b.fn.bgiframe&&t.bgiframe();0<x.delayedClose&&(fa=setTimeout(ea,x.delayedClose));x.onShow.call(z,t,w)},ia=function(b){aa=!1;a.hide();if(!x.sticky||/click|toggle/.test(x.activation))ea(),clearTimeout(fa);x.hoverClass&&
y.removeClass(x.hoverClass)},ea=function(a){a=a&&a.data("cluetip")?a:y;var c=a.data("cluetip")&&a.data("cluetip").selector,d=b(c||"div.cluetip"),e=d.find(p+"cluetip-inner"),f=d.find(p+"cluetip-arrows");d.hide().removeClass();x.onHide.call(a[0],d,e);c&&(a.removeClass("cluetip-clicked"),a.css("cursor",""));c&&T&&a.attrProp(x.titleAttribute,T);x.arrows&&f.css({top:""})};b(document).unbind("hideCluetip.cluetip").bind("hideCluetip.cluetip",function(a){ea(b(a.target))});if(/click|toggle/.test(x.activation))y.bind("click.cluetip",
function(a){t.is(":hidden")||!y.is(".cluetip-clicked")?(ha(a),b(".cluetip-clicked").removeClass("cluetip-clicked"),y.addClass("cluetip-clicked")):ia(a);return!1});else if("focus"==x.activation)y.bind("focus.cluetip",function(a){y.attrProp("title","");ha(a)}),y.bind("blur.cluetip",function(a){y.attrProp("title",y.data("cluetip").title);ia(a)});else{y[x.clickThrough?"unbind":"bind"]("click.cluetip",n);var ja=function(a){if(x.tracking){var b=I-a.pageX,c=E?E-a.pageY:F-a.pageY;y.bind("mousemove.cluetip",
function(a){t.css({left:a.pageX+b,top:a.pageY+c})})}};b.fn.hoverIntent&&x.hoverIntent?y.hoverIntent({sensitivity:x.hoverIntent.sensitivity,interval:x.hoverIntent.interval,over:function(a){ha(a);ja(a)},timeout:x.hoverIntent.timeout,out:function(a){ia(a);y.unbind("mousemove.cluetip")}}):y.bind("mouseenter.cluetip",function(a){ha(a);ja(a)}).bind("mouseleave.cluetip",function(a){ia(a);y.unbind("mousemove.cluetip")});y.bind("mouseover.cluetip",function(a){y.attrProp("title","")}).bind("mouseleave.cluetip",
function(a){y.attrProp("title",y.data("cluetip").title)})}});return this};(function(){b.support=b.support||{};for(var a=document.createElement("div").style,c=["boxShadow"],d=["moz","Moz","webkit","o"],e=0,m=c.length;e<m;e++){var l=c[e],n=l.charAt(0).toUpperCase()+l.slice(1);if("undefined"!==typeof a[l])b.support[l]=l;else for(var q=0,p=d.length;q<p;q++)if("undefined"!==typeof a[d[q]+n]){b.support[l]=d[q]+n;break}}})();b.fn.cluetip.defaults=b.cluetip.defaults})(jQuery);
(function(b){b.fn.editable=function(a,c){if("disable"==a)b(this).data("disabled.editable",!0);else if("enable"==a)b(this).data("disabled.editable",!1);else if("destroy"==a)b(this).unbind(b(this).data("event.editable")).removeData("disabled.editable").removeData("event.editable");else{var d=b.extend({},b.fn.editable.defaults,{target:a},c),e=b.editable.types[d.type].plugin||function(){},f=b.editable.types[d.type].submit||function(){},h=b.editable.types[d.type].buttons||b.editable.types.defaults.buttons,
g=b.editable.types[d.type].content||b.editable.types.defaults.content,k=b.editable.types[d.type].element||b.editable.types.defaults.element,m=b.editable.types[d.type].reset||b.editable.types.defaults.reset,l=d.callback||function(){},n=d.onedit||function(){},q=d.onsubmit||function(){},p=d.onreset||function(){},u=d.onerror||m;d.tooltip&&b(this).attr("title",d.tooltip);d.autowidth="auto"==d.width;d.autoheight="auto"==d.height;return this.each(function(){var a=this,c=b(a).width(),v=b(a).height();b(this).data("event.editable",
d.event);b.trim(b(this).html())||b(this).html(d.placeholder);b(this).bind(d.event,function(r){if(!0!==b(this).data("disabled.editable")&&!a.editing&&!1!==n.apply(this,[d,a])){r.preventDefault();r.stopPropagation();d.tooltip&&b(a).removeAttr("title");0==b(a).width()?(d.width=c,d.height=v):("none"!=d.width&&(d.width=d.autowidth?b(a).width():d.width),"none"!=d.height&&(d.height=d.autoheight?b(a).height():d.height));b(this).html().toLowerCase().replace(/(;|")/g,"")==d.placeholder.toLowerCase().replace(/(;|")/g,
"")&&b(this).html("");a.editing=!0;a.revert=b(a).html();b(a).html("");var p=b("<form />");d.cssclass&&("inherit"==d.cssclass?p.attr("class",b(a).attr("class")):p.attr("class",d.cssclass));d.style&&("inherit"==d.style?(p.attr("style",b(a).attr("style")),p.css("display",b(a).css("display"))):p.attr("style",d.style));var B=k.apply(p,[d,a]);if(d.loadurl){var A=setTimeout(function(){B.disabled=!0;g.apply(p,[d.loadtext,d,a])},100);r={};r[d.id]=a.id;b.isFunction(d.loaddata)?b.extend(r,d.loaddata.apply(a,
[a.revert,d])):b.extend(r,d.loaddata);b.ajax({type:d.loadtype,url:d.loadurl,data:r,async:!1,success:function(a){window.clearTimeout(A);y=a;B.disabled=!1}})}else if(d.data){var y=d.data;b.isFunction(d.data)&&(y=d.data.apply(a,[a.revert,d]))}else y=a.revert;g.apply(p,[y,d,a]);B.attr("name",d.name);h.apply(p,[d,a]);b(a).append(p);e.apply(p,[d,a]);b(":input:visible:enabled:first",p).focus();d.select&&B.select();B.keydown(function(b){27==b.keyCode&&(b.preventDefault(),m.apply(p,[d,a]))});"cancel"==d.onblur?
B.blur(function(b){A=setTimeout(function(){m.apply(p,[d,a])},500)}):"submit"==d.onblur?B.blur(function(a){A=setTimeout(function(){p.submit()},200)}):b.isFunction(d.onblur)?B.blur(function(b){d.onblur.apply(a,[B.val(),d])}):B.blur(function(a){});p.submit(function(c){A&&clearTimeout(A);c.preventDefault();if(!1!==q.apply(p,[d,a])&&!1!==f.apply(p,[d,a]))if(b.isFunction(d.target))c=d.target.apply(a,[B.val(),d]),b(a).html(c),a.editing=!1,l.apply(a,[a.innerHTML,d]),b.trim(b(a).html())||b(a).html(d.placeholder);
else{c={};c[d.name]=B.val();c[d.id]=a.id;b.isFunction(d.submitdata)?b.extend(c,d.submitdata.apply(a,[a.revert,d])):b.extend(c,d.submitdata);"PUT"==d.method&&(c._method="put");b(a).html(d.indicator);var e={type:"POST",data:c,dataType:"html",url:d.target,success:function(c,f){"html"==e.dataType&&b(a).html(c);a.editing=!1;l.apply(a,[c,d]);b.trim(b(a).html())||b(a).html(d.placeholder)},error:function(b,c,e){u.apply(p,[d,a,b])}};b.extend(e,d.ajaxoptions);b.ajax(e)}b(a).attr("title",d.tooltip);return!1})}});
this.reset=function(c){this.editing&&!1!==p.apply(c,[d,a])&&(b(a).html(a.revert),a.editing=!1,b.trim(b(a).html())||b(a).html(d.placeholder),d.tooltip&&b(a).attr("title",d.tooltip))}})}};b.editable={types:{defaults:{element:function(a,c){a=b('<input type="hidden"></input>');b(this).append(a);return a},content:function(a,c,d){b(":input:first",this).val(a)},reset:function(a,b){b.reset(this)},buttons:function(a,c){var d=this;if(a.submit){if(a.submit.match(/>$/))var e=b(a.submit).click(function(){"submit"!=
e.attr("type")&&d.submit()});else e=b('<button type="submit" />'),e.html(a.submit);b(this).append(e)}if(a.cancel){if(a.cancel.match(/>$/))var f=b(a.cancel);else f=b('<button type="cancel" />'),f.html(a.cancel);b(this).append(f);b(f).click(function(e){(b.isFunction(b.editable.types[a.type].reset)?b.editable.types[a.type].reset:b.editable.types.defaults.reset).apply(d,[a,c]);return!1})}}},text:{element:function(a,c){c=b('<input type="text" />');"none"!=a.width&&c.width(a.width);"none"!=a.height&&c.height(a.height);
c.attr("autocomplete","off");b(this).append(c);return c}},textarea:{element:function(a,c){c=b("<textarea />");a.rows?c.attr("rows",a.rows):"none"!=a.height&&c.height(a.height);a.cols?c.attr("cols",a.cols):"none"!=a.width&&c.width(a.width);b(this).append(c);return c}},select:{element:function(a,c){a=b("<select />");b(this).append(a);return a},content:function(a,c,d){var e=String==a.constructor?JSON.parse(a):a;a=[];for(f in e)e.hasOwnProperty(f)&&"selected"!=f&&a.push({val:f,repr:e[f]});a.sort(function(a,
b){return a.repr>b.repr});for(c=0;c<a.length;c++){var f=a[c];b("select",this).append(b("<option />").val(f.val).append(f.repr))}b("select",this).children().each(function(){b(this).val()!=e.selected&&b(this).text()!=b.trim(d.revert)||b(this).prop("selected",!0)})}}},addInputType:function(a,c){b.editable.types[a]=c}};b.fn.editable.defaults={name:"value",id:"id",type:"text",width:"auto",height:"auto",event:"click.editable",onblur:"cancel",loadtype:"GET",loadtext:"Loading...",placeholder:"Click to edit",
loaddata:{},submitdata:{},ajaxoptions:{}}})(jQuery);jQuery.fn.labelOver=function(b){return $(this).each(function(){var a=jQuery(this),c=a.attr("for");if(c){var d=jQuery("#"+c);this.hide=function(){a.css({textIndent:-1E4})};this.show=function(){""==d.val()&&a.css({textIndent:0})};d.focus(this.hide);d.blur(this.show);a.addClass(b).click(function(){d.focus()});""!=d.val()&&this.hide()}})};
(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):b(jQuery)})(function(b){function a(a){return"undefined"===typeof a}function c(a,b){return a.replace(h,function(a,c){return b[c]})}function d(b,c){if(a(c.startValue)||a(c.endValue))throw Error("startValue and endValue is need");if(a(c.translateSelectLabel))throw Error(" RangePicker: translateSelectLabel is need");this.__init(b,c)}function e(a){this.__init(a)}function f(a){this.__init(a)}var h=/<%=\s*(\w+)\s*%>/g;d.prototype={constructor:d,
__defaultOptions:{type:"single"},__template:"<div class='range-picker-wrapper'><div class='range-picker'><span class='not-select-process'></span><span class='label range-label'><%= startValue %></span><span class='label range-label end-label'><%= endValue %></span></div></div>",__init:function(a,c){this.__$containerElement=a;c=b.extend({},this.__defaultOptions,c);this.refresh(c)},refresh:function(c){a(this.__selectCursors)||(1<this.__selectCursors.length&&this.__selectCursors[1].getJQueryElement().remove(),
this.__selectCursors[0].getJQueryElement().remove(),delete this.__selectCursors,this.__processBar.getJQueryElement().remove(),delete this.__processBar);this.__options=b.extend({},this.__options,c);this.__render();this.__$rangepickerElement=this.__$containerElement.find(".range-picker");this.__addWidget();this.__setContainerToWrapperWidget();this.__setCursorInitialPosition();this.__updateProcessBarView()},__render:function(){var a=c(this.__template,{startValue:this.__options.startValue,endValue:this.__options.endValue});
this.__$containerElement.html(a)},__addWidget:function(){var a=b.proxy(this.__handleLabelPositionChange,this);this.__selectCursors=[];this.__selectCursors.push(new e({positionChange:a}));"double"===this.__options.type&&this.__selectCursors.push(new e({positionChange:a}));this.__processBar=new f;this.__$rangepickerElement.append(this.__processBar.getJQueryElement());for(a=0;a<this.__selectCursors.length;a++)this.__$rangepickerElement.append(this.__selectCursors[a].getJQueryElement());this.__setWidgetInitialValue()},
__setWidgetInitialValue:function(){var b=this.__$rangepickerElement.width();this.__selectCursors[0].render(this.__options.translateSelectLabel(b,b));a(this.__selectCursors[1])||this.__selectCursors[1].render(this.__options.translateSelectLabel(0,b))},__setCursorInitialPosition:function(){var b=this.__$rangepickerElement.width(),c=this.__selectCursors;c[0].updateArrowPosition(b);c[0].setTotalWidth(b);a(c[1])||(c[1].updateArrowPosition(0),c[1].setTotalWidth(b))},__setContainerToWrapperWidget:function(){var b=
this.__$containerElement.find(".range-picker-wrapper"),c=this.__selectCursors,d=this.__$rangepickerElement.width(),e=-c[0].getJQueryElement().position().top;!a(c[1])&&-c[1].getJQueryElement().position().top>e&&(e=-c[1].getJQueryElement().position().top);b.css("paddingTop",e+"px");var f=c[0].getJQueryElement();e=f.outerWidth()/2;c[0].render(this.__options.translateSelectLabel(0,d));f=f.outerWidth()/2;c[0].render(this.__options.translateSelectLabel(d,d));b.css({paddingLeft:f+"px",paddingRight:e+"px"})},
__handleLabelPositionChange:function(a){this.__updateView(a.left);this.__$containerElement.trigger("update")},__updateView:function(){this.__updateCursorView();this.__updateProcessBarView()},__updateCursorView:function(){for(var a=0,b;a<this.__selectCursors.length;a++)b=this.__selectCursors[a].getArrowPosition(),b=this.__options.translateSelectLabel(b.left,this.__$rangepickerElement.width()),this.__selectCursors[a].render(b)},__updateProcessBarView:function(){var a=this.__getCursorPosition();a={left:a.start,
right:this.__$rangepickerElement.width()-a.end};this.__processBar.updatePosition(a)},__getCursorPosition:function(){var b={start:0,startLabel:""},c=this.__selectCursors[0].getArrowPosition();b.end=c.left;b.endLabel=c.positionLabel;a(this.__selectCursors[1])||(c=this.__selectCursors[1].getArrowPosition(),c.left>b.end?(b.start=b.end,b.startLabel=b.endLabel,b.end=c.left,b.endLabel=c.positionLabel):(b.start=c.left,b.startLabel=c.positionLabel));return b},__formatPositionValue:function(a,b){var c=this.__$rangepickerElement.width();
a=a.replace(/\s+/,"");return"%"===a[a.length-1]?c*parseInt(a,10)/100:b+parseInt(a,10)},getSelectValue:function(){var a=this.__getCursorPosition();a.totalWidth=this.__$rangepickerElement.width();return a},updatePosition:function(b,c){var d=this.__selectCursors;d[0].updateArrowPosition(this.__formatPositionValue(b,d[0].getArrowPosition().left));a(d[1])||a(c)||d[1].updateArrowPosition(this.__formatPositionValue(c,d[1].getArrowPosition().left));this.__updateView()}};e.prototype={constructor:e,__defaultOptions:{positionChange:b.loop},
__template:"<span class='label select-label'></span>",__init:function(a){this.__options=b.extend({},this.__defaultOptions,a);this.__$element=b(this.__template);this.__bindDragEventHandler()},__bindDragEventHandler:function(){var a=this;this.__$element.on("mousedown",function(a){this.__rangepicker={isMouseDown:!0,mouseStartX:a.clientX,previousMoveDistance:0};b(this).css("zIndex",1E3)}).on("mouseup",function(){this.__rangepicker=null;b(this).css("zIndex",1)}).on("mousemove",function(b){this.__rangepicker&&
this.__rangepicker.isMouseDown&&a.__handleDragEvent(b.clientX,this.__rangepicker)}).on("mouseout",function(){b(this).css("zIndex",1);this.__rangepicker=null})},__handleDragEvent:function(a,b){var c=a-b.mouseStartX-b.previousMoveDistance;b.previousMoveDistance=a-b.mouseStartX;a=this.__calculatePosition(c);this.updateArrowPosition(a);this.__options.positionChange(this.getArrowPosition(),this.__$element)},__calculatePosition:function(a){a=this.__arrowPosition+a;a>this.__totalWidth?a=this.__totalWidth:
0>a&&(a=0);return a},__updatePosition:function(a){for(var b in a)a.hasOwnProperty(b)&&this.__$element.css(b,a[b]+"px")},render:function(a){this.__$element.text(a)},updateArrowPosition:function(a){this.__arrowPosition=a;this.__updatePosition({left:a-this.__$element.outerWidth()/2})},getJQueryElement:function(){return this.__$element},getArrowPosition:function(){return{left:this.__arrowPosition,positionLabel:this.__$element.text()}},setTotalWidth:function(a){this.__totalWidth=a}};f.prototype={constructor:f,
__template:"<span class='process'></span>",__init:function(){this.__$element=b(this.__template)},updatePosition:function(a){for(var b in a)a.hasOwnProperty(b)&&this.__$element.css(b,a[b]+"px")},getJQueryElement:function(){return this.__$element}};b.fn.rangepicker=function(a){return new d(this,a)}});
(function(){S3.autocomplete={};S3.autocomplete.normal=function(a,b,e,f,h,g,k,m,l){var c="dummy_"+f,d=$("#"+c);if(d.length){b=S3.Ap.concat("/",b,"/",e,"/search_ac.json?field=",a);h&&(b+="&"+h);g&&(b+="&link="+g);var p=$("#"+f);p.hide();if(f=p.val())var u={value:f,label:d.val()};p.data("existing",u);p.data("url",b);var z=$("#"+c+"_throbber");void 0==m&&(m=800);void 0==l&&(l=2);d.val();d.autocomplete({delay:m,minLength:l,source:function(b,c){$.ajax({url:p.data("url"),data:{term:b.term}}).done(function(b){if(0==
b.length){p.val("").change();var d={id:0};d[a]=i18n.no_matching_records}else d={id:0},d[a]=i18n.none_of_the_above;b.push(d);c(b)})},search:function(a,b){z.removeClass("hide").show();return!0},response:function(a,b,c){z.hide();return c},focus:function(a,b){return!1},select:function(b,c){b=c.item;b.id?(d.val(b[a]),p.val(b.id).change(),u={value:b.id,label:b[a]}):(d.val(""),p.val("").change());k&&eval(k);return!1}}).data("ui-autocomplete")._renderItem=function(b,c){var d=c.label?c.label:c[a];return $("<li>").data("item.autocomplete",
c).append("<a>"+d+"</a>").appendTo(b)};d.blur(function(){u&&u.label!=d.val()&&p.val("").change()})}};S3.autocomplete.generic=function(a,b,e,f,h){var c="dummy_"+b,d=$("#"+c);if(d.length){var m=$("#"+b);m.hide();if(b=m.val())var l={value:b,name:d.val()};m.data("existing",l);m.data("url",a);var n=$("#"+c+"_throbber");void 0==f&&(f=800);void 0==h&&(h=2);d.autocomplete({delay:f,minLength:h,source:function(a,b){$.ajax({url:m.data("url"),data:{term:a.term}}).done(function(a){0==a.length?(m.val("").change(),
a.push({id:0,value:"",label:i18n.no_matching_records})):a.push({id:0,value:"",label:i18n.none_of_the_above});b(a)})},search:function(a,b){n.removeClass("hide").show();return!0},response:function(a,b,c){n.hide();return c},focus:function(a,b){return!1},select:function(a,b){a=b.item;(b=a.id)?(d.val(a.name),m.val(b).change(),l={value:a.id,name:a.name}):(d.val(""),m.val("").change());e&&eval(e);return!1}}).data("ui-autocomplete")._renderItem=function(a,b){if(b.label)var c=b.label;else b.matchString?(c=
b.matchString+"<b>"+b.nextString+"</b>",b.context&&(c+=" - "+b.context)):c=b.name;return $("<li>").data("item.autocomplete",b).append("<a>"+c+"</a>").appendTo(a)};d.blur(function(){l&&l.name!=d.val()&&m.val("").change()})}};S3.autocomplete.location=function(a,b,e,f,h){var c="dummy_"+a,d=$("#"+c);if(d.length){var m=S3.Ap.concat("/gis/location/search_ac.json"),l=$("#"+a);l.hide();if(a=l.val())var n={value:a,name:d.val()};l.data("existing",n);l.data("url",m);var q=$("#"+c+"_throbber");b&&(m+="?level="+
b);void 0==f&&(f=800);void 0==e&&(e=2);d.autocomplete({delay:f,minLength:e,source:function(a,b){$.ajax({url:l.data("url"),data:{term:a.term}}).done(function(a){0==a.length?(l.val("").change(),a.push({id:0,value:"",label:i18n.no_matching_records})):a.push({id:0,value:"",label:i18n.none_of_the_above});b(a)})},search:function(a,b){q.removeClass("hide").show();return!0},response:function(a,b,c){q.hide();return c},focus:function(a,b){return!1},select:function(a,b){a=b.item;a.id?(d.val(b.item.name),l.val(a.id).change(),
n={value:a.id,name:b.item.name}):(d.val(""),l.val("").change());h&&eval(h);return!1}}).data("ui-autocomplete")._renderItem=function(a,b){if(void 0!=b.label)var c=b.label;else c=b.name?b.match_type?b.next_string?b.match_string+"<b>"+b.next_string+"</b>":b.match_string:b.name:"",b.addr&&(c=c?c+(", "+b.addr):b.addr),b.L5&&(c=c?c+(", "+b.L5):b.L5),b.L4&&(c=c?c+(", "+b.L4):b.L4),b.L3&&(c=c?c+(", "+b.L3):b.L3),b.L2&&(c=c?c+(", "+b.L2):b.L2),b.L1&&(c=c?c+(", "+b.L1):b.L1),b.L0&&(c=c?c+(", "+b.L0):b.L0);
return $("<li>").data("item.autocomplete",b).append("<a>"+c+"</a>").appendTo(a)};d.blur(function(){n&&n.name!=d.val()&&l.val("").change()})}};var b=function(b){return void 0!=b.label?b.label:b.org||b.job?a(b):b.name};S3.autocomplete.person=function(a,d,e,f,h,g,k){var c="dummy_"+e,l=$("#"+c);if(l.length){a=S3.Ap.concat("/",a,"/",d,"/search_ac.json");f&&(a+="?"+f);var n=$("#"+e);n.hide();if(e=n.val())var q={value:e,name:l.val()};n.data("existing",q);n.data("url",a);var p=$("#"+c+"_throbber");void 0==
g&&(g=800);void 0==k&&(k=2);l.autocomplete({delay:g,minLength:k,source:function(a,b){$.ajax({url:n.data("url"),data:{term:a.term}}).done(function(a){0==a.length?(n.val("").change(),a.push({id:0,value:"",label:i18n.no_matching_records})):a.push({id:0,value:"",label:i18n.none_of_the_above});b(a)})},search:function(a,b){p.removeClass("hide").show();return!0},response:function(a,b,c){p.hide();return c},focus:function(a,b){return!1},select:function(a,c){a=c.item;a.id?(c=b(a),l.val(c),n.val(a.id).change(),
q={value:a.id,name:c}):(l.val(""),n.val("").change());h&&eval(h);return!1}}).data("ui-autocomplete")._renderItem=function(a,c){var d=b(c);return $("<li>").data("item.autocomplete",c).append("<a>"+d+"</a>").appendTo(a)};l.blur(function(){q&&q.name!=l.val()&&n.val("").change()})}};S3.autocomplete.pentity=function(a,b,e,f,h,g,k){var c="dummy_"+e,d=$("#"+c);if(d.length){var n=S3.Ap.concat("/",a,"/",b,"/search_ac.json"),q=$("#"+e);q.hide();if(a=q.val())var p={value:a,name:d.val()};q.data("existing",p);
q.data("url",n);var u=$("#"+c+"_throbber");void 0==h&&(h=800);void 0==g&&(g=2);d.autocomplete({delay:h,minLength:g,source:function(a,b){n=q.data("url");k&&(n+="?types="+k);$.ajax({url:n,data:{term:a.term}}).done(function(a){0==a.length?(q.val("").change(),a.push({id:0,value:"",label:i18n.no_matching_records})):a.push({id:0,value:"",label:i18n.none_of_the_above});b(a)})},search:function(a,b){u.removeClass("hide").show();return!0},response:function(a,b,c){u.hide();return c},focus:function(a,b){return!1},
select:function(a,b){a=b.item;a.id?(d.val(a.name),q.val(a.id).change(),p={value:a.id,name:a.name}):(d.val(""),q.val("").change());f&&eval(f);return!1}}).data("ui-autocomplete")._renderItem=function(a,b){var c=b.label?b.label:b.name;return $("<li>").data("item.autocomplete",b).append("<a>"+c+"</a>").appendTo(a)};d.blur(function(){p&&p.name!=d.val()&&q.val("").change()})}};var a=function(a){if(void 0!=a.label)return a.label;var b=a.name,c=a.org;a=a.job;if(c||a)a?(b+=" ("+a,c&&(b+=", "+c),b+=")"):b+=
" ("+c+")";return b};S3.autocomplete.hrm=function(c,d,e,f,h){var g="dummy_"+d,k=$("#"+g);if(k.length){c="staff"==c?S3.Ap.concat("/hrm/hr_search/search_ac?group=staff"):"volunteer"==c?S3.Ap.concat("/vol/hr_search/search_ac"):"deploy"==c?S3.Ap.concat("/deploy/hr_search/search_ac"):S3.Ap.concat("/hrm/hr_search/search_ac");var m=$("#"+d);m.hide();if(d=m.val())var l={value:d,name:k.val()};m.data("existing",l);m.data("url",c);var n=$("#"+g+"_throbber");void 0==f&&(f=800);void 0==h&&(h=2);k.autocomplete({delay:f,
minLength:h,source:function(a,b){$.ajax({url:m.data("url"),data:{term:a.term}}).done(function(a){0==a.length?(m.val("").change(),a.push({id:0,value:"",label:i18n.no_matching_records})):a.push({id:0,value:"",label:i18n.none_of_the_above});b(a)})},search:function(a,b){n.removeClass("hide").show();return!0},response:function(a,b,c){n.hide();return c},focus:function(a,b){return!1},select:function(a,c){a=c.item;a.id?(c=b(a),k.val(c),m.val(a.id).change(),l={value:a.id,name:c}):(k.val(""),m.val("").change());
e&&eval(e);return!1}}).data("ui-autocomplete")._renderItem=function(b,c){var d=a(c);return $("<li>").data("item.autocomplete",c).append("<a>"+d+"</a>").appendTo(b)};k.blur(function(){l&&l.name!=k.val()&&m.val("").change()})}};S3.autocomplete.org=function(a,b,e,f){var c="dummy_"+a,d=$("#"+c);if(d.length){var k=S3.Ap.concat("/org/organisation/search_ac.json"),m=$("#"+a);m.hide();if(a=m.val())var l={value:a,name:d.val()};m.data("existing",l);m.data("url",k);var n=$("#"+c+"_throbber");void 0==e&&(e=800);
void 0==f&&(f=2);d.autocomplete({delay:e,minLength:f,source:function(a,b){$.ajax({url:m.data("url"),data:{term:a.term}}).done(function(a){0==a.length?(m.val("").change(),a.push({id:0,value:"",label:i18n.no_matching_records})):a.push({id:0,value:"",label:i18n.none_of_the_above});b(a)})},search:function(a,b){n.removeClass("hide").show();return!0},response:function(a,b,c){n.hide();return c},focus:function(a,b){return!1},select:function(a,c){a=c.item;a.id?(d.val(a.name),m.val(a.id).change(),l={value:a.id,
name:a.name}):(d.val(""),m.val("").change());b&&eval(b);return!1}}).data("ui-autocomplete")._renderItem=function(a,b){if(void 0!=b.label)var c=b.label;else b.matchString?"acronym"==b.match?(c=b.name,b.parent&&(c=b.parent+" > "+c),c+=" - "+b.matchString+"<b>"+b.nextString+"</b>"):(c=b.matchString+"<b>"+b.nextString+"</b>",b.parent?c=b.parent+" > "+c:b.acronym&&(c+=" - "+b.acronym)):(c=b.name,b.parent?c=b.parent+" > "+b.name:b.acronym&&(c+=" ("+b.acronym+")"));return $("<li>").data("item.autocomplete",
b).append("<a>"+c+"</a>").appendTo(a)};d.blur(function(){l&&l.name!=d.val()&&m.val("").change()})}};S3.autocomplete.site=function(a,b,e,f){var c="dummy_"+a,d=$("#"+c);if(d.length){var k=S3.Ap.concat("/org/site/search_ac.json"),m=$("#"+a);m.hide();if(a=m.val())var l={value:a,name:d.val()};m.data("existing",l);m.data("url",k);var n=$("#"+c+"_throbber");void 0==e&&(e=800);void 0==f&&(f=2);d.autocomplete({delay:e,minLength:f,source:function(a,b){$.ajax({url:m.data("url"),data:{term:a.term}}).done(function(a){0==
a.length?(m.val("").change(),a.push({id:0,value:"",label:i18n.no_matching_records})):a.push({id:0,value:"",label:i18n.none_of_the_above});b(a)})},search:function(a,b){n.removeClass("hide").show();return!0},response:function(a,b,c){n.hide();return c},focus:function(a,b){return!1},select:function(a,c){a=c.item;a.id?(d.val(a.name),m.val(a.id).change(),l={value:a.id,name:a.name}):(d.val(""),m.val("").change());b&&eval(b);return!1}}).data("ui-autocomplete")._renderItem=function(a,b){if(void 0!=b.label)var c=
b.label;else if(b.match_type)if(c="<b>"+b.match_string+"</b>",b.pre_string&&(c=b.pre_string+c),b.next_string&&(c+=b.next_string),"name"==b.match_type){var d=b.addr,e=b.L4||b.L3||b.L2||b.L1;if(d||e)d?(c+=" ("+d,e&&(c+=", "+e),c+=")"):c+=" ("+e+")";var f=b.org;d=b.instance_type;if(f||d)d?(c+=" ("+S3.org_site_types[d],f&&(c+=", "+f),c+=")"):c+=" ("+f+")"}else if("addr"==b.match_type){if(c=b.name+" ("+c,c=(e=b.L4||b.L3||b.L2||b.L1)?c+(", "+e+")"):c+")",f=b.org,d=b.instance_type,f||d)d?(c+=" ("+S3.org_site_types[d],
f&&(c+=", "+f),c+=")"):c+=" ("+f+")"}else if("org"==b.match_type){f=b.name;d=b.addr;e=b.L4||b.L3||b.L2||b.L1;if(d||e)d?(f+=" ("+d,e&&(f+=", "+e),f+=")"):f+=" ("+e+")";c=(d=b.instance_type)?f+" ("+S3.org_site_types[d]+", "+c+")":f+" ("+c+")"}else{if(f=b.name,c=(d=b.addr)?f+" ("+d+", "+c+")":f+" ("+c+")",f=b.org,d=b.instance_type,f||d)d?(c+=" ("+S3.org_site_types[d],f&&(c+=", "+f),c+=")"):c+=" ("+f+")"}else c=b.name;return $("<li>").data("item.autocomplete",b).append("<a>"+c+"</a>").appendTo(a)};d.blur(function(){l&&
l.name!=d.val()&&m.val("").change()})}}})();$(document).ready(function(){$("input.date").datepicker({changeMonth:!0,changeYear:!0,showOn:"both",buttonText:"",dateFormat:"yy-mm-dd",isRTL:S3.rtl});$("input.time").fgtimepicker({hourText:i18n.hour,minuteText:i18n.minute,defaultTime:""})});
(function(b){b.widget("s3.end_date_interval",{options:{show_clear_button:!0},_create:function(){var a=this.options;this.namespace=".enddateinterval";this.start_element=b(a.start_date_selector);this.default_interval=a.interval;this.start_date_prev=this.start_element.datepicker("getDate")},_init:function(){var a,c,d,e;var f=this.options;var h=this;var g=this.start_element;var k=b(this.element);var m=this.interval;var l=this.default_interval;k.datepicker("option",{yearRange:"c-100:c+100",showButtonPanel:!0}).one("click",
function(){b(this).focus()});if(f.show_clear_button){var n=b('<button id="end_date_clear" class="btn date-clear-btn" type="button">'+i18n.btn_clear+"</button>").click(function(){k.val("")});k.next().after(n)}k.unbind(h.namespace).on("click"+h.namespace,function(){a=g.datepicker("getDate");null!=a&&h._inputclick()});var q=k.datepicker("getDate");null==q&&(f.default_explicit&&(h.interval=l,h._end_date_automate(h.interval)),g.change(function(){m=h.interval;q=k.datepicker("getDate");if(null!=q){var a=
h.start_date_prev;c=a.getMonth()+1;d=a.getFullYear();e=a.getDate();a=new Date(d,c,e);h._add_months(a,m-1);q=k.datepicker("getDate");h._equal_date(q,a)&&h._end_date_automate(m)}}))},_end_date_automate:function(a){var c=this.start_element;var d=b(this.element);var e=c.datepicker("getDate");var f=e.getMonth()+1;var h=e.getFullYear();e=e.getDate();e=new Date(h,f,e);this._add_months(e,a-1);d.datepicker("setDate",e);this.start_date_prev=c.datepicker("getDate")},_inputclick:function(){var a=this.namespace;
var c=b(this.element);var d=this.default_interval;var e=this;null==c.datepicker("getDate")&&(e.interval=d,e._end_date_automate(d));d=b(".ui-datepicker-buttonpane");b(".ui-datepicker-current").hide();b(".ui-datepicker-close").hide();b("<h5>"+i18n.interval+"</h5>").appendTo(d);c=b('<a class="ui-datepicker-current ui-state-default ui-priority-primary" type="button">'+i18n.btn_1_label+"</a>");c.unbind(a).bind("click"+a,function(){e.interval=6;e._end_date_automate(e.interval)});c.appendTo(d);c=b('<a class="ui-datepicker-current ui-state-default ui-priority-primary" type="button">'+
i18n.btn_2_label+"</a>");c.unbind(a).bind("click"+a,function(){e.interval=12;e._end_date_automate(e.interval)});c.appendTo(d);c=b('<a class="ui-datepicker-current ui-state-default ui-priority-primary" type="button">'+i18n.btn_3_label+"</a>");c.unbind(a).bind("click"+a,function(){e.interval=24;e._end_date_automate(e.interval)});c.appendTo(d);c=b('<a class="ui-datepicker-current ui-state-default ui-priority-primary" type="button">'+i18n.btn_4_label+"</a>");c.unbind(a).bind("click"+a,function(){e.interval=
60;e._end_date_automate(e.interval)});c.appendTo(d);b(".ui-datepicker-buttonpane a").css("margin",".3em");b(".ui-datepicker-buttonpane a").css("font-size","1rem");b(".ui-datepicker-buttonpane").css("text-align","center")},_equal_date:function(a,b){return a.getFullYear()===b.getFullYear()&&a.getMonth()===b.getMonth()&&a.getDate()===b.getDate()},_is_leap_year:function(a){return 0===a%4&&0!==a%100||0===a%400},_get_days_in_month:function(a,c){b(this.element);return[31,this._is_leap_year(a)?29:28,31,30,
31,30,31,31,30,31,30,31][c]},_get_days_in_month_big:function(a){b(this.element);return this._get_days_in_month(a.getFullYear(),a.getMonth())},_add_months:function(a,c){b(this.element);var d=a.getDate();a.setDate(1);a.setMonth(a.getMonth()+c);a.setDate(Math.min(d,this._get_days_in_month_big(a)));return a}})})(jQuery);S3.search={};
(function(){var b=function(a,b){if("GET"==a.type){a.type="POST";var c=function(a){var b=a[0];return"$filter"==a||"_"!=b&&(-1!=a.search(/\./)||"("==b&&-1!=a.search(/\)/))},d=a.url.split("#"),e=d[0],f=null,h=null;1<d.length&&(f=d[1]);d=e.split("?");e=d[0];1<d.length&&(h=d[1]);var g=a.data,k={};d={};var l,r,m,n,w=function(a,b,c){if(Array.isArray(c))for(m=0,l=c.length;m<l;m++)w(a,b,c[m]);else a.hasOwnProperty(b)?Array.isArray(a[b])?a[b].push(c):a[b]=[a[b],c]:a[b]=c};if(g){var q=0;for(r=g.length;q<r;q++){var p=
g[q];w(d,p.name,p.value)}}if(h)for(n in g=S3.queryString.parse(h),g)h=g[n],c(n)?w(k,n,h):w(d,n,h);a.data="ajax"==b?JSON.stringify(k):k;a.processData=!1;b=e+"?$search="+b;(c=S3.queryString.stringify(d))&&(b+="&"+c);null!==f&&(b+="#"+f);a.url=b}};S3.search.searchRewriteAjaxOptions=b;var a={timeout:1E4,retryLimit:5,dataType:"json",contentType:"application/json; charset=utf-8",processData:!1,async:!0,type:"POST"};$.searchS3=function(c){c=$.extend({},a,c);b(c,"ajax");return $.ajaxS3(c)};$.searchDownloadS3=
function(c,d){var e=$.extend({},a,{url:c});c=document.createElement("form");e.type="GET";b(e,"form");c.action=e.url;c.method="POST";c.target=d||"_self";c.enctype="multipart/form-data";if(d=e.data)for(var f in d)e=document.createElement("textarea"),e.name=f,e.value=JSON.stringify(d[f]),c.appendChild(e);c.style.display="none";document.body.appendChild(c);c.submit()};var c={},d=function(a){return a?(a=a.replace(/"/,'\\"'),-1!=a.search(/,/)&&(a='"'+a+'"'),a):a},e=function(a){if(!a)return a;for(var b=
[],c=!1,d=0,e=0;e<a.length;e++){var f=a[e];b[d]=b[d]||"";'"'==f?c=!c:","!=f||c?b[d]+=f:("NONE"==b[d]&&(b[d]=null),++d)}return b},f=function(a){void 0===a&&(a=$("body").find("form.filter-form").first());a.data("noAutoSubmit",1);a.find(".text-filter").val("");a.find(".options-filter, .location-filter").each(function(){var a=$(this);if("select"==this.tagName.toLowerCase())a.val(""),a.hasClass("groupedopts-filter-widget")&&a.groupedopts("instance")?a.groupedopts("refresh"):a.hasClass("multiselect-filter-widget")&&
a.multiselect("instance")&&a.multiselect("refresh");else{var b=a.attr("id");$("input[name='"+b+"']:checked").each(function(){$(this).click()})}a.hasClass("location-filter")&&z(this)});a.find(".map-filter").each(function(){var a=$(this);a.val("");a=a.attr("id");a=S3.gis.maps[a+"-map"].s3.polygonButton;"drawpolygonclear-off"==a.getIconClass()&&a.items[0].btnEl.dom.click()});a.find(".range-filter-input").val("").trigger("change.slider");a.find(".date-filter-input").each(function(){var a=$(this);a.calendarWidget("clear");
a=a.attr("id");$("#"+a.slice(0,-3)).find(".range-picker").each(function(){$(this).trigger("clear")})});a.find(".hierarchy-filter").each(function(){var a=$(this);a.hasClass("s3-cascade-select")?a.cascadeSelect("reset"):a.hierarchicalopts("reset")});a.find(".age-filter-input").val("");a.find(".filter-manager-widget").each(function(){var a=$(this);void 0!==a.filtermanager&&a.filtermanager("clear")});a.data("noAutoSubmit",0);a.trigger("optionChanged")},h=/__(?!link\.)([a-z_]+)$/,g=function(a){"undefined"==
typeof a&&(a=$("body").find("form.filter-form").first());var b,c,e=[],f,g,k,l,m,n;a.find(".text-filter:visible").each(function(){f=$(this);c=f.attr("id");g=$("#"+c+"-data").val();if(k=f.val().trim()){l=k.split(" ");var a=f.data("match"),h=[];for(b=0;b<l.length;b++)if(m=$.trim(l[b]),""!==m){var n=d("*"+m+"*");"any"==a?h.push(n):e.push([g,n])}"any"==a&&e.push([g,h.join(",")])}else e.push([g,null])});a.find(".s3-groupedopts-widget:visible").prev(".options-filter.groupedopts-filter-widget").add(a.find(".ui-multiselect:visible").prev(".options-filter.multiselect-filter-widget")).add(a.find(".options-filter:visible,.options-filter.multiselect-filter-widget.active")).each(function(){f=
$(this);c=f.attr("id");g=$("#"+c+"-data").val();n=$("input:radio[name='"+c+"_filter']:checked").val();switch(n){case "any":g=g.replace(/__contains$|__belongs$/,"__anyof");break;case "all":g=g.replace(/__anyof$|__belongs$/,"__contains")}if("select"==this.tagName.toLowerCase()){if(k="",l=f.val())for(l instanceof Array||(l=l.split(",")),b=0;b<l.length;b++){var a=d(l[b]);k=""===k?a:k+","+a}}else k="",$("input[name='"+c+"']:checked").each(function(){k=""===k?d($(this).val()):k+","+d($(this).val())});""===
k||"*"==k?e.push([g,null]):e.push([g,k])});a.find(".map-filter").each(function(){f=$(this);c=f.attr("id");g=$("#"+c+"-data").val();(k=f.val())?e.push([g,k]):e.push([g,null])});a.find(".range-filter-input:visible").each(function(){f=$(this);c=f.attr("id");g=$("#"+c+"-data").val();(k=f.val())?e.push([g,k]):e.push([g,null])});a.find(".date-filter-input:visible").each(function(){f=$(this);c=f.attr("id");g=$("#"+c+"-data").val();k=f.val();n=c.split("-").pop();if(f.hasClass("datetimepicker"))var a=function(a){return a.getFullYear()+
"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2)+"T"+("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2)+":"+("0"+a.getSeconds()).slice(-2)};else{var b="";f.hasClass("hide-time")&&(b="le"==n?"T23:59:59":"T00:00:00");a=function(a){return a.getFullYear()+"-"+("0"+(a.getMonth()+1)).slice(-2)+"-"+("0"+a.getDate()).slice(-2)+b}}var d=!1;"le"==n&&(d=!0);if(f.hasClass("negative")){if(d){var l=!1;d=c.slice(0,-3);var m=$("#"+d+"-ge");var r=m.val();if(r){l=!0;m=m.calendarWidget("getJSDate",
!1);var q=a(m);var p=$("#"+d+"-ge-data").val();p=p.replace(h,"")}if(k){l=!0;m=f.calendarWidget("getJSDate",!0);var A=a(m);var w=g.replace(h,"")}l&&(a="("+$("#"+d+"-negative").val()+" eq NONE)",r&&(a+=" or ("+p+' lt "'+q+'")'),k&&(a+=" or ("+w+' gt "'+A+'")'),A=$("#"+d+"-filterby"),A.length&&(A=A.val(),d=$("#"+d+"-filter_opts").val(),a+=" or ("+A+' belongs "'+d+'")'),e.push(["$filter",a]))}}else k?(m=f.calendarWidget("getJSDate",d),A=a(m),d&&f.hasClass("end_date")?(d=g.replace(h,""),e.push(["$filter",
"("+d+" "+n+' "'+A+'") or ('+d+" eq None)"])):e.push([g,A])):e.push([g,null])});a.find(".s3-groupedopts-widget:visible").prev(".location-filter.groupedopts-filter-widget").add(a.find(".ui-multiselect:visible").prev(".location-filter.multiselect-filter-widget").add(a.find(".location-filter:visible,.location-filter.multiselect-filter-widget.active"))).each(function(){f=$(this);c=f.attr("id");g=$("#"+c+"-data").val();k="";if("select"==this.tagName.toLowerCase()){if(l=$(this).val(),l)for(b=0;b<l.length;b++){var a=
d(l[b]);k=""===k?a:k+","+a}}else $("input[name='"+c+"']:checked").each(function(){k=""===k?d($(this).val()):k+","+d($(this).val())});""===k?e.push([g,null]):e.push([g,k])});a.find(".hierarchy-filter:visible").each(function(){f=$(this);c=f.attr("id");g=$("#"+c+"-data").val();k="";if(l=f.hasClass("s3-cascade-select")?f.cascadeSelect("get"):f.hierarchicalopts("get"))for(b=0;b<l.length;b++)k=""===k?k+l[b]:k+","+l[b];""===k?e.push([g,null]):e.push([g,k])});a.find(".age-filter-input:visible").each(function(){f=
$(this);c=f.attr("id");g=$("#"+c+"-data").val();k=f.val();var a=k-0;if(k&&!isNaN(a)){var b=g.match(h);b&&"gt"==b[1]&&(a+=1);b=new Date;b.setYear(b.getFullYear()-a);b=b.getFullYear()+"-"+("0"+(b.getMonth()+1)).slice(-2)+"-"+("0"+b.getDate()).slice(-2);e.push([g,b])}else e.push([g,null])});$(".value-filter:visible",a).each(function(){f=$(this);c=f.attr("id");g=$("#"+c+"-data").val();f.prop("checked")?e.push([g,"None"]):e.push([g,null])});return e};S3.search.getCurrentFilters=g;S3.search.setCurrentFilters=
function(a,b){void 0===a&&(a=$("body").find("form.filter-form").first());a.data("noAutoSubmit",1);var c,d={},f,g,k;var l=0;for(f=b.length;l<f;l++){var m=b[l];var n=m[0];var r="string"==typeof m[1]?e(m[1]):m[1];d.hasOwnProperty(n)?d[n]=d[n].concat(r):d[n]=r}a.find(".text-filter").each(function(){g=$(this);c=g.attr("id");n=$("#"+c+"-data").val();if(d.hasOwnProperty(n)){g.is(":visible")||g.hasClass("active")||v(a);r=d[n];k="";if(r){var b;l=0;for(f=r.length;l<f;l++)if(b=r[l])0<l&&(k+=" "),"*"==b[0]&&
(b=b.slice(1)),"*"==b.slice(-1)&&(b=b.slice(0,-1)),k+=b}g.val(k)}});a.find(".options-filter").each(function(){g=$(this);c=g.attr("id");n=$("#"+c+"-data").val();var b=$('input:radio[name="'+c+'_filter"]:checked').val();if(this.tagName&&"select"==this.tagName.toLowerCase()){var e=!1,f=n.replace(h,"");if(d.hasOwnProperty(f+"__eq"))r=d[f+"__eq"],e=!0;else if(d.hasOwnProperty(f))r=d[f],e=!0;else if(d.hasOwnProperty(n))r=d[n],e=!0;else if("any"==b||"all"==b)d.hasOwnProperty(f+"__anyof")?(r=d[f+"__anyof"],
e=!0,$('input:radio[name="'+c+'_filter"][value="any"]').prop("checked",!0)):d.hasOwnProperty(f+"__contains")&&(r=d[f+"__contains"],e=!0,$('input:radio[name="'+c+'_filter"][value="all"]').prop("checked",!0));e&&(g.is(":visible")||g.hasClass("active")||v(a),g.val(r),g.hasClass("groupedopts-filter-widget")&&g.groupedopts("instance")?g.groupedopts("refresh"):g.hasClass("multiselect-filter-widget")&&g.multiselect("instance")&&g.multiselect("refresh"))}});a.find(".map-filter").each(function(){g=$(this);
c=g.attr("id");n=$("#"+c+"-data").val();if(d.hasOwnProperty(n))if(g.is(":visible")||g.hasClass("active")||v(a),r=d[n],r){g.val(r[0]);var b=c+"-map";S3.gis.maps[b].s3.polygonButtonLoaded()}else g.val(""),b=c+"-map",S3.gis.maps[b].s3.layerRefreshed()});a.find(".range-filter-input").each(function(){g=$(this);c=g.attr("id");n=$("#"+c+"-data").val();d.hasOwnProperty(n)&&(g.is(":visible")||g.hasClass("active")||v(a),(r=d[n])?g.val(r[0]):g.val(""))});a.find(".date-filter-input").each(function(){var b=$(this),
c=$("#"+b.attr("id")+"-data").val(),e=c.replace(h,""),f=!1;d.hasOwnProperty(c)?f=d[c]:d.hasOwnProperty(e)&&(f=d[e]);!1!==f&&(b.is(":visible")||b.hasClass("active")||v(a),f?(c=f[0].replace(" ","T"),b.calendarWidget("setJSDate",new Date(c))):b.calendarWidget("clear"),b.trigger("change"))});a.find(".location-filter").each(function(){g=$(this);c=g.attr("id");n=$("#"+c+"-data").val();var b=$('input:radio[name="'+c+'_filter"]:checked').val();if(this.tagName&&"select"==this.tagName.toLowerCase()){var e=
!1;if(d.hasOwnProperty(n))r=d[n],e=!0;else if("any"==b||"all"==b)b=n.replace(h,""),d.hasOwnProperty(b+"__anyof")?(r=d[b+"__anyof"],e=!0,$('input:radio[name="'+c+'_filter"][value="any"]').prop("checked",!0)):d.hasOwnProperty(b+"__contains")&&(r=d[b+"__contains"],e=!0,$('input:radio[name="'+c+'_filter"][value="all"]').prop("checked",!0));e&&(g.is(":visible")||g.hasClass("active")||v(a),g.val(r),g.hasClass("groupedopts-filter-widget")&&g.groupedopts("instance")?g.groupedopts("refresh"):g.hasClass("multiselect-filter-widget")&&
g.multiselect("instance")&&g.multiselect("refresh"),z(this))}});a.find(".hierarchy-filter:visible").each(function(){g=$(this);c=g.attr("id");n=$("#"+c+"-data").val();d.hasOwnProperty(n)&&(g.is(":visible")||g.hasClass("active")||v(a),r=d[n],g.hasClass("s3-cascade-select")?g.cascadeSelect("set",r):g.hierarchicalopts("set",r))});a.data("noAutoSubmit",0);a.trigger("optionChanged")};var k=function(a,b){void 0===b&&(b=g());a=a.split("?");var c={},d={},e,f=[];b=b.filter(function(a){return"$filter"==a[0]?
(f.push(a),!1):!0});f.length&&b.push(f.reduce(function(a,b){return["$filter","("+a[1]+") and ("+b[1]+")"]}));var h=0;for(e=b.length;h<e;h++){var k=b[h];var l=k[0];k=k[1];null===k?c.hasOwnProperty(l)||(d[l]=!0):(d.hasOwnProperty(l)&&(d[l]=!1),c[l]=!0)}var m=[];if(1!=S3.search.stripFilters&&1<a.length){var n=a[1].split("&");h=0;for(e=n.length;h<e;h++)k=n[h].split("="),1<k.length&&(l=decodeURIComponent(k[0]),d[l]||c[l]||m.push(n[h]))}h=0;for(e=b.length;h<e;h++)k=b[h],l=k[0],k=k[1],c[l]&&m.push(l+"="+
encodeURIComponent(k));b=m.join("&");a=a[0];b&&(a=a+"?"+b);return a};S3.search.filterURL=k;S3.search.ajaxUpdateOptions=function(a,b){var c=$(a);a=c.find("input.filter-ajax-url");a.length&&(a=$(a[0]).val());$.ajax({url:a,dataType:"json"}).done(function(a){c.data("noAutoSubmit",1);for(var d in a){var e=$("#"+d);if(e.length){var f=a[d];if(e.hasClass("options-filter")){if("select"==e[0].tagName.toLowerCase()){var g=e.siblings(".no-options-available");if(f.hasOwnProperty("empty"))e.html(""),e.hasClass("multiselect-filter-widget")&&
e.multiselect("instance")?(e.multiselect("refresh"),e.multiselect("instance").button.hide()):e.hasClass("groupedopts-filter-widget")&&e.groupedopts("instance")?e.groupedopts("refresh"):e.hide(),g.length&&(g.html(f.empty),g.removeClass("hide").show());else{var h=e.val(),k=[],l="",m;if(f.hasOwnProperty("groups")){var n=0;for(m=f.groups.length;n<m;n++){var r=f.groups[n];r.label&&(l+='<optgroup label="'+r.label+'">');for(var q=0,p=r.items.length;q<p;q++){var w=r.items[q];var A=w[0].toString();h&&0<=$.inArray(A,
h)&&k.push(A);l+='<option value="'+A+'"';(A=w[3])&&(l+=' title="'+A+'"');w=w[1];l+=">"+w+"</option>"}r.label&&(l+="</optgroup>")}}else for(n=0,m=f.length;n<m;n++)w=f[n],A=w[0],A=null===A?"None":A.toString(),w=w[1],h&&0<=$.inArray(A,h)&&k.push(A),l+='<option value="'+A+'">'+w+"</option>";e.html(l);k&&e.val(k);g.length&&g.hide();e.hasClass("groupedopts-filter-widget")&&e.groupedopts("instance")?e.groupedopts("refresh"):e.hasClass("multiselect-filter-widget")&&e.multiselect("instance")?(e.multiselect("refresh"),
e.multiselect("instance").button.show()):e.removeClass("hide").show()}}}else e.hasClass("date-filter")&&(g=f.min,h=f.max,$("#"+d+"-ge").calendarWidget("instance").option("minDateTime",g).option("maxDateTime",h).refresh(),$("#"+d+"-le").calendarWidget("instance").option("minDateTime",g).option("maxDateTime",h).refresh(),e.find(".range-picker").trigger("resize",[g,h,f.ts]))}}c.data("noAutoSubmit",0);b&&b.apply()}).fail(function(a,b,c){console.log("UNAUTHORIZED"==c?i18n.gis_requires_login:a.responseText)})};
var m=function(a,b){$("#"+a[0].id).closest(".dt-wrapper").find(".dt-export").each(function(){var a=$(this),c=a.data("url");c&&a.data("url",k(c,b))})},l=function(a){var b=$("#"+a).find('input.filter-submit-url[type="hidden"]').first().val(),d=c[a],e;c[a]={};for(e in d){var f=$("#"+e);var h=f.is(":visible")?!0:!1;var l=d[e];f=l.needs_reload;if(h){if(f){var n=g($("#"+a));b=k(b,n);window.location.href=b}}else c[a][e]=l}for(e in d)f=$("#"+e),f.is(":visible")&&(l=d[e],f=$("#"+e),f.hasClass("dataTable")?
(a=f.dataTable(),l=l.ajaxurl,a.fnReloadAjax(l),m(a,n),$("#"+a[0].id+"_dataTable_filterURL").val(l)):f.hasClass("dl")?f.datalist("ajaxReload",l.queries):f.hasClass("map_wrapper")?S3.gis.refreshLayer("search_results",l.queries):f.hasClass("gi-container")?f.groupedItems("reload",null,l.queries):f.hasClass("pt-container")?f.pivottable("reload",null,l.queries):f.hasClass("tp-container")?f.timeplot("reload",null,l.queries):f.hasClass("s3-organizer")&&f.organizer("reload"))};S3.search.filterFormAutoSubmit=
function(a,b){a=$("#"+a);if(a.length&&b)a.on("optionChanged",function(){var a=$(this);if(!a.data("noAutoSubmit")){var c=a.data("autoSubmitTimeout");c&&clearTimeout(c);c=setTimeout(function(){t(a)},b);a.data("autoSubmitTimeout",c)}})};var n=function(){var a=new jQuery.Deferred;setTimeout(function B(){void 0!=S3.gis.maps?a.resolve("loaded"):"pending"===a.state()&&(a.notify("waiting for JS to load..."),setTimeout(B,500))},1);return a.promise()},q=function(a,b,d){void 0===d&&(d=g($("#"+a)));c.hasOwnProperty(a)||
(c[a]={});if(!c[a].hasOwnProperty(b)){var e=$("#"+b);if(e.hasClass("dl")||e.hasClass("gi-container")||e.hasClass("pt-container")||e.hasClass("tp-container")||e.hasClass("map_wrapper")||e.hasClass("s3-organizer"))var f=null;else if(e.hasClass("dataTable")){if(e=$("input#"+b+"_configurations"),e.length)if(f=JSON.parse($(e).val()).ajaxUrl,"undefined"!=typeof f)f=k(f,d);else return}else return;c[a][b]={needs_reload:!1,ajaxurl:f,queries:d}}};S3.search.setup_hidden_widget=q;var p=function(a){a=$(a);if(a.hasClass("responsive"))(a=
a.DataTable())&&a.responsive&&a.responsive.recalc();else if(a.hasClass("doublescroll"))try{a.dataTableS3("doubleScroll")}catch(w){}},u=function(a,b){var c=b.find(".map_wrapper"),d=c.length;d?$.when(n()).then(function(){for(var b=S3.gis,e=0;e<d;e++){var f=c[e].attributes.id.value;void 0===b.maps[f]&&b.show_map(f,b.options[f])}l(a)},function(a){s3_debug(a)},function(a){s3_debug(a)}):l(a);b.find("table.dataTable.display").each(function(){p(this)})};S3.search.unhide_section=u;S3.search.summary_tabs=function(a,
b,c){if(c)for(var d=g($("#"+a)),e=c.split(","),f=0,h=e.length;f<h;f++)c=e[f],q(a,c,d);void 0!=b?($("#summary-tabs").tabs({active:b,activate:function(b,c){b=$(c.newPanel);b.removeClass("hide");if(c.newTab.length){var d=$(c.newTab).index();c=$("#"+a).find('input.filter-submit-url[type="hidden"]');if(c.length){c=c.first();var e=$(c).val(),f=e.split("?"),g=[];if(1<f.length){e=f[1].split("&");for(var h,k,l=0;l<e.length;l++)h=e[l].split("="),1<h.length&&(k=decodeURIComponent(h[0]),"t"!=k&&g.push(h[0]+"="+
h[1]));g.push("t="+d);d=g.join("&");f=f[0];d&&(f=f+"?"+d)}else f=e+"?t="+d;$(c).val(f)}}u(a,b)}}).css({visibility:"visible"}),$('.ui-tabs-panel[aria-hidden="false"]').first().removeClass("hide").find("table.dataTable.display").each(function(){p(this)})):$("#summary-tabs").css({visibility:"visible"}).find("table.dataTable.display").each(function(){p(this)})};S3.search.summary_maps=function(a){for(var b=$("#summary-common, #summary-sections").find(".map_wrapper"),c=0;c<b.length;c++){var d=b[c];if(!d.hidden){var e=
S3.gis;d=d.attributes.id.value;if(void 0===e.maps[d]){var f=e.options[d];void 0!=f&&(e.show_map(d,f),d=g($("#"+a)),e.refreshLayer("search_results",d))}}}};S3.search.s3map=function(a){var b=S3.gis;void 0===a&&(a="default_map");b.show_map(a,b.options[a]);a=g();b.refreshLayer("search_results",a)};var z=function(a){var b=a.name,c=b.slice(0,-1),d=parseInt(b.slice(-1)),e=$("#"+b);if(e.val()){var f=d+1,g=c+f,h=$("#"+g);h.length||(f=d+2,g=c+f,h=$("#"+g));if(h.length){var k=g.replace(/-/g,"_");S3[k]();h.next(".ui-multiselect").show();
k=S3.location_filter_hierarchy;if(void 0!=S3.location_name_l10n){h=!0;var l=S3.location_name_l10n}else h=!1;a.options1=[];a.options2=[];a.options3=[];a.options4=[];a.options5=[];for(b=d;0<=b&&!k.hasOwnProperty("L"+b);b--);var m=function(b){var d,e;for(d in b)if(b.hasOwnProperty(d)){d&&"null"!=d&&a["options"+f].push(d);var h=b[d];if("object"===typeof h&&(g=f+1,$("#"+c+g).length||(g=f+2),$("#"+c+g).length))for(e in h)h.hasOwnProperty(e)&&e&&"null"!=e&&a["options"+g].push(e)}},n=function(a,b){var e,
f,g=$("#"+c+b).val();for(f in a)if(a.hasOwnProperty(f))if(null===g)if(b===d)m(a[f]);else{var h=b+1;$("#"+c+h).length||h++;n(a[f],h)}else for(e in g)g[e]===f&&(b===d?m(a[f]):(h=b+1,$("#"+c+h).length||h++,n(a[f],h)))};n(k["L"+b],b);for(k=f;5>=k;k++){var q=$("#"+c+k);if(q.length){var p=a["options"+k];p.sort();var r="";for(var u in p)if(p.hasOwnProperty(u)){b=p[u];var t=h?l[b]||b:b;r+='<option value="'+b+'">'+t+"</option>"}q.html(r);if(q.hasClass("groupedopts-filter-widget")&&q.groupedopts("instance"))try{q.groupedopts("refresh")}catch(W){}else q.hasClass("multiselect-filter-widget")&&
q.multiselect("instance")&&q.multiselect("refresh");k===f&&(q.next("button").removeClass("hidden").show(),b=e.next(".ui-multiselect").next(".location-filter").next(".ui-multiselect"),b.length&&(b=b.next(".location-filter").next(".ui-multiselect"),b.length&&(b.hide(),b=b.next(".location-filter").next(".ui-multiselect"),b.length&&(b.hide(),b=b.next(".location-filter").next(".ui-multiselect"),b.length&&(b.hide(),b=b.next(".location-filter").next(".ui-multiselect"),b.length&&b.hide())))))}}}}else{for(k=
d+1;5>=k;k++)if(q=$("#"+c+k),q.length)if(q.html(""),q.hasClass("groupedopts-filter-widget")&&q.groupedopts("instance"))try{q.groupedopts("refresh")}catch(W){}else q.hasClass("multiselect-filter-widget")&&q.multiselect("instance")&&q.multiselect("refresh");b=e.next(".ui-multiselect").next(".location-filter").next(".ui-multiselect");b.length&&(b.hide(),b=b.next(".location-filter").next(".ui-multiselect"),b.length&&(b.hide(),b=b.next(".location-filter").next(".ui-multiselect"),b.length&&(b.hide(),b=
b.next(".location-filter").next(".ui-multiselect"),b.length&&(b.hide(),b=b.next(".location-filter").next(".ui-multiselect"),b.length&&b.hide()))))}},t=function(a){S3.hideAlerts("warning");var b=a.attr("id"),d=a.find('input.filter-submit-url[type="hidden"]').val(),e=g(a);if(a.hasClass("filter-ajax")){a=a.find('input.filter-submit-target[type="hidden"]').val();c[b]={};a=a.split(" ");var f={},h;for(h=0;h<a.length;h++){var l=a[h];var n=$("#"+l);var q=n.is(":visible")?!0:!1;var p=!1;var r=null;n.hasClass("dataTable")?
(p=$("input#"+a[h]+"_configurations"),p.length&&(r=JSON.parse($(p).val()),r=r.ajaxUrl,r="undefined"!=typeof r?k(r,e):null),r?(f[a[h]]=r,p=!1):p=!0):n.hasClass("dl")||n.hasClass("map_wrapper")||n.hasClass("cms_content")||n.hasClass("gi-container")||n.hasClass("pt-container")||n.hasClass("tp-container")||n.hasClass("s3-target")||n.hasClass("s3-organizer")?p=!1:q?(d=k(d,e),window.location.href=d):p=!0;q||(c[b][l]={needs_reload:p,ajaxurl:r,queries:e})}for(h=0;h<a.length;h++)l=a[h],n=$("#"+l),n.is(":visible")&&
(n.hasClass("dataTable")?(b=n.dataTable(),l=f[l],b.fnReloadAjax(l),m(b,e),$("#"+b[0].id+"_dataTable_filterURL").val(l)):n.hasClass("dl")?n.datalist("ajaxReload",e):n.hasClass("map_wrapper")?S3.gis.refreshLayer("search_results",e):n.hasClass("gi-container")?n.groupedItems("reload",null,e):n.hasClass("pt-container")?n.pivottable("reload",null,e):n.hasClass("tp-container")?n.timeplot("reload",null,e):n.hasClass("s3-target")?n.s3Target("reload",k(d,e)):n.hasClass("s3-organizer")&&n.organizer("reload"))}else d=
k(d,e),window.location.href=d},v=function(a){a=$(a);var b;a.find(".advanced").each(function(){var a=$(this);a.hasClass("hide")?(a.removeClass("hide").show().find(".multiselect-filter-widget,.groupedopts-filter-widget").each(function(){var a=$(this);a.addClass("active");a.hasClass("groupedopts-filter-widget")&&a.groupedopts("instance")?a.groupedopts("refresh"):a.hasClass("multiselect-filter-widget")&&a.multiselect("instance")&&a.multiselect("refresh")}),b=!0):(a.addClass("hide").hide().find(".multiselect-filter-widget,.groupedopts-filter-widget").removeClass("active"),
b=!1)});a=$(a.find(".filter-advanced-label"));b?a.text(a.data("off")).siblings().toggle():a.text(a.data("on")).siblings().toggle()};$(document).ready(function(){$(".groupedopts-filter-widget:visible,.multiselect-filter-widget:visible").addClass("active");$(".filter-clear").click(function(){var a=$(this).closest(".filter-form");f(a)});$(".show-filter-manager").click(function(){$(".filter-manager-row").removeClass("hide").show();$(".show-filter-manager").hide()});$(".filter-submit").click(function(){t($(this).closest(".filter-form"))});
$(".filter-form").on("dataChanged",function(a,b,c){b&&(a=$(this).find("input.filter-submit-target").val())&&(a=a.split(" "),a.length&&-1!=$.inArray(b+"",a)&&S3.search.ajaxUpdateOptions(this,c));return!1});$(".filter-advanced").on("click",function(){v($(this).closest("form"))});$(".location-filter").on("change",function(){z(this)});$(".text-filter, .range-filter-input").on("input.autosubmit",function(){$(this).closest("form").trigger("optionChanged")});$(".options-filter, .location-filter, .date-filter-input, .age-filter-input, .map-filter, .value-filter").on("change.autosubmit",
function(){$(this).closest("form").trigger("optionChanged")});$('.s3-options-filter-anyall input[type="radio"]').on("change.autosubmit",function(){$(this).closest("form").trigger("optionChanged")});$(".hierarchy-filter").on("select.s3hierarchy",function(){$(this).closest("form").trigger("optionChanged")});$(".map-filter").each(function(){var a=$(this);$.when(n()).then(function(){var b=a.attr("id"),c=$("#"+b),d,e=S3.gis,f=e.maps[b+"-map"],g=f.s3;g.pointPlaced=function(a){var b={internalProjection:f.getProjectionObject(),
externalProjection:e.proj4326};d=(new OpenLayers.Format.WKT(b)).write(a);c.val('"'+d+'"').trigger("change")};g.polygonButtonOff=function(){c.val("").trigger("change")};g.layerRefreshed=function(){var a=g.polygonButton;a&&"drawpolygonclear-off"==a.getIconClass()&&(g.lastDraftFeature?g.lastDraftFeature.destroy():1<g.draftLayer.features.length&&g.draftLayer.features[0].destroy(),a.control.deactivate(),a.items[0].pressed=!0)};g.polygonButtonLoaded=function(){if(d=c.val()){g.polygonButton.items[0].btnEl.dom.click();
var a=OpenLayers.Geometry.fromWKT(d);a.transform(e.proj4326,f.getProjectionObject());a=new OpenLayers.Feature.Vector(a,{},null);var b=g.draftLayer;b.addFeatures([a]);g.lastDraftFeature=a;f.zoomToExtent(b.getDataExtent())}};g.polygonButtonLoaded()},function(a){s3_debug(a)},function(a){s3_debug(a)})});$(".date-filter").find(".range-picker").each(function(){function a(){for(var a,b,c=[],e=d.data("ts"),f=0;f<e.length;f++)a=e[f],b=moment(a[0]),c.push({x:b,y:a[1]});d.data("slots",c);return[{values:c,key:"",
color:"#3b6596",area:!0}]}function b(){Q=O.val();M=S.val();g=new Date(d.data("min"));h=new Date(d.data("max"));R=h-g;Q?(I=moment(Q,e),D=I-g,Q=D/R*100+"%"):Q="0%";M?(J=moment(M,e),D=J-g,M=D/R*100+"%"):M="100%";F.updatePosition(M,Q)}function c(a){var b=z[a].x;try{var c=z[a+1].x}catch(ea){c=moment(d.data("max"))}var f=Z;Z+=4E3;f=setTimeout(function(){var f=c;d.data("slot",a);O.val(b.format(e));S.val(f.format(e));O.trigger("change")},f);T.push(f)}var d=$(this),e=d.data("fmt"),f=d.data("min");if(f)var g=
moment(f);else g=moment().subtract(5,"minutes"),d.data("min",g.format());f=d.data("max");if(f)var h=moment(f);else h=moment().subtract(5,"minutes"),d.data("max",h.format());var k=d.parent().attr("id"),l=g.format("YYYY"),m=moment(g);f="";for(var n=[{year:l,months:[]}],q=0,p;h>m||m.format("M")===h.format("M");)p=m.format("YYYY"),p!=l&&(n.push({year:p,months:[]}),l=p,q++),n[q].months.push(m.format("MMM YYYY")),m.add(1,"month");for(q=0;q<n.length;q++){l=n[q];m=l.months;l=l.year;f+='<optgroup label="'+
l+'">';for(l=0;l<m.length;l++)f+='<option value="'+m[l]+'">'+m[l]+"</option>";f+="</optgroup>"}d.before('<div class="range-coarse"><div class="range-coarse-start"><label for="'+k+'-cs">From:</label><select id="'+k+'-cs">'+f+'</select></div><div class="range-coarse-end"><label for="'+k+'-ce">to:</label><select id="'+k+'-ce">'+f+"</select></div></div>");f=$("#"+k+"-cs");n=$("#"+k+"-ce");f.val(g.format("MMM YYYY"));n.val(h.format("MMM YYYY"));a();d.before('<a class="button secondary tiny play"><i class="fa fa-play"></i> Play</a><a class="button secondary tiny hide pause"><i class="fa fa-pause"></i> Pause</a><a class="button secondary tiny hide stop"><i class="fa fa-stop"></i> Stop</a>');
var u=$("#"+k+" .play"),t=$("#"+k+" .pause"),v=$("#"+k+" .stop"),z=d.data("slots");3>z.length&&u.hide();var R,D,K,F=d.rangepicker({type:"double",startValue:g.format(e),endValue:h.format(e),translateSelectLabel:function(a,b){g=new Date(d.data("min"));h=new Date(d.data("max"));R=h-g;D=a/b*R;K=new Date(+g+parseInt(D));return moment(K).format(e)}});d.before('<div id="'+k+'-chart"><svg></svg></div>');var E=function(a){a=a.point;return'<div class="pt-tooltip"><div class="pt-tooltip-label" style="color:'+
a.color+'">'+a.x.format(e)+'</div><div class="pt-tooltip-text">'+a.y+"</div></div>"};F.graph=function(){nv.addGraph(function(){var b=nv.models.lineChart().margin({left:0,right:0}).showLegend(!1).showYAxis(!1).showXAxis(!1);b.tooltip.contentGenerator(E);var c=a();d3.select("#"+k+"-chart svg").datum(c).call(b);nv.utils.windowResize(function(){b.update()});return b})};F.graph();var O=$("#"+k+"-ge"),S=$("#"+k+"-le"),X,P,Q,M,I,J;d.on("update",function(){X=F.getSelectValue();P=X.totalWidth;Q=X.start;M=
X.end;g=new Date(d.data("min"));h=new Date(d.data("max"));R=h-g;D=Q/P*R;I=new Date(+g+parseInt(D));O.val(moment(I).format(e));D=M/P*R;J=new Date(+g+parseInt(D));S.val(moment(J).format(e));d.closest("form").trigger("optionChanged")});f.on("change",function(){g=moment($(this).val(),"MMM YYYY");d.data("min",g.format());I=g.format(e);F.refresh({startValue:I});O.val(I);d.closest("form").trigger("optionChanged")});n.on("change",function(){h=moment($(this).val(),"MMM YYYY").endOf("month");d.data("max",h.format());
J=h.format(e);F.refresh({endValue:J});S.val(J);d.closest("form").trigger("optionChanged")});O.on("change",function(){b()});S.on("change",function(){b()});d.on("clear",function(){F.updatePosition("100%","0%")});d.on("resize",function(a,b,c,f){d.data("min",b);d.data("max",c);F.refresh({startValue:moment(b).format(e),endValue:moment(c).format(e)});d.data("ts",f);F.graph();z=d.data("slots");2<z.length?u.show():u.hide()});var Z=0,T=[];d.data("slot",0);u.on("click",function(){var a=d.data("slot");u.hide();
t.removeClass("hide").show();v.removeClass("hide").show();z=d.data("slots");for(a;a<z.length;a++)c(a)});t.on("click",function(){for(var a=0;a<T.length;a++)clearTimeout(T.pop());Z=0;t.hide();u.show()});v.on("click",function(){for(var a=0;a<T.length;a++)clearTimeout(T.pop());d.data("slot",0);Z=0;t.hide();v.hide();u.show()})});$(".text-filter").keypress(function(a){return 13==a.which?(a.preventDefault(),!1):!0})})})();
(function(b,a){var c=0;b.widget("s3.filtermanager",{options:{filters:{},ajaxURL:null,readOnly:!1,explicitLoad:!1,allowCreate:!0,allowUpdate:!0,allowDelete:!0,createTooltip:null,loadTooltip:null,saveTooltip:null,deleteTooltip:null,selectHint:"Saved filters...",emptyHint:"No saved filters",titleHint:"Enter a title",confirmUpdate:null,confirmDelete:null,createText:null,loadText:null,saveText:null,deleteText:null,buttonClass:"action-btn"},_create:function(){this.id=c++},_init:function(){this.refresh()},
_destroy:function(){},refresh:function(){var a=this.id,c=this.element.val(""),f=this.options;this._unbindEvents();var h=f.buttonClass;this.create_btn&&this.create_btn.remove();this.create_btn=f.createText?b('<a class="fm-create '+h+'" id="fm-create-'+a+'">'+f.createText+"</a>"):b('<div class="fm-create" id="fm-create-'+a+'">');f.createTooltip&&this.create_btn.attr("title",f.createTooltip);this.load_btn&&this.load_btn.remove();this.load_btn=f.loadText?b('<a class="fm-load '+h+'" id="fm-load-'+a+'">'+
f.loadText+"</a>"):b('<div class="fm-load" id="fm-load-'+a+'">');f.loadTooltip&&this.load_btn.attr("title",f.loadTooltip);this.save_btn&&this.save_btn.remove();this.save_btn=f.saveText?b('<a class="fm-save '+h+'" id="fm-save-'+a+'">'+f.saveText+"</a>"):b('<div class="fm-save" id="fm-save-'+a+'">');f.saveTooltip&&this.save_btn.attr("title",f.saveTooltip);this.delete_btn&&this.delete_btn.remove();this.delete_btn=f.deleteText?b('<a class="fm-delete '+h+'" id="fm-delete-'+a+'">'+f.deleteText+"</a>"):
b('<div class="fm-delete" id="fm-delete-'+a+'">');f.deleteTooltip&&this.delete_btn.attr("title",f.deleteTooltip);this.throbber&&this.throbber.remove();this.throbber=b('<div class="inline-throbber" id="fm-throbber-'+a+'">').css({"float":"left"});this.accept_btn&&this.accept_btn.remove();this.accept_btn=b('<div class="fm-accept" id="fm-accept-'+a+'">');this.cancel_btn&&this.cancel_btn.remove();this.cancel_btn=b('<div class="fm-cancel" id="fm-cancel-'+a+'">');b(c).after(this.load_btn.hide(),this.create_btn.hide(),
this.save_btn.hide(),this.delete_btn.hide(),this.throbber.hide(),this.accept_btn.hide(),this.cancel_btn.hide());this._cancel();this._bindEvents()},_newFilter:function(){var a=this.element.hide(),c=this;this._hideCRUDButtons();this.accept_btn.show();this.cancel_btn.show();var f=this.options.titleHint,h=b('<input type="text" id="fm-title-input-'+this.id+'">').val(f).css({color:"grey","float":"left"}).focusin(function(){b(this).hasClass("changed")||b(this).css({color:"black"}).val("")}).change(function(){b(this).addClass("changed")}).focusout(function(){""===
b(this).val()&&b(this).removeClass("changed").css({color:"grey"}).val(f)}).keypress(function(a){13==a.which&&(a.preventDefault(),a=b(this),a.val()&&a.addClass("changed"),c._accept())});this.input=h;b(a).after(h)},_accept:function(){var a=this.element,c=this,f=this.input.val();if(b(this.input).hasClass("changed")&&f){b(this.input).removeClass("changed");this.accept_btn.hide();this.cancel_btn.hide();this.throbber.show();var h={title:f,query:S3.search.getCurrentFilters(b(a).closest("form")),url:this._getFilterURL()};
b.ajaxS3({url:this.options.ajaxURL,type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(h),success:function(d){if(d=d.created){c.options.filters[d]=h.query;var e=b('<option value="'+d+'">'+h.title+"</option>");b(a).append(e).val(d).change().prop("disabled",!1)}c._cancel()},error:function(){c._cancel()}})}},_save:function(){var a=this.element,c=this,f=this.options,h=b(a).val();if(h&&(!f.confirmUpdate||confirm(f.confirmUpdate))){this._hideCRUDButtons();this.throbber.show();
var g={id:h,query:S3.search.getCurrentFilters(b(a).closest("form")),url:this._getFilterURL()};b.ajaxS3({url:this.options.ajaxURL,type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(g),success:function(){c.options.filters[h]=g.query;c._cancel()},error:function(){c._cancel()}})}},_delete:function(){var a=b(this.element),c=this.options,f=a.val();if(f&&(!c.confirmDelete||confirm(c.confirmDelete))){this._hideCRUDButtons();this.throbber.show();c={id:f};var h=""+
this.options.ajaxURL;h=-1!=h.search(/.*\?.*/)?h+"&delete=1":h+"?delete=1";var g=this;b.ajaxS3({url:h,type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(c),success:function(){a.val("").find("option[value="+f+"]").remove();delete g.options.filters[f];g._cancel()},error:function(){g._cancel()}})}},_cancel:function(){this.throbber.hide();this.input&&(this.input.remove(),this.input=null);this.accept_btn.hide();this.cancel_btn.hide();var a=this.element.show(),
c=this.options,f=b(a).find("option");1==f.length&&f.first().hasClass("filter-manager-prompt")?(b(a).prop("disabled",!0),b(a).find("option.filter-manager-prompt").text(c.emptyHint)):(b(a).prop("disabled",!1),b(a).find("option.filter-manager-prompt").text(c.selectHint));this._showCRUDButtons()},_load:function(){var a=this.element,c=this.options.filters,f=b(a).val();f&&c.hasOwnProperty(f)&&S3.search.setCurrentFilters(b(a).closest("form"),c[f])},clear:function(){b(this.element).val("");this._cancel()},
_showCRUDButtons:function(){var a=this.options;this._hideCRUDButtons();!a.readOnly&&a.allowCreate&&this.create_btn.show();b(this.element).val()&&(a.explicitLoad&&this.load_btn.show(),a.readOnly||(a.allowUpdate&&this.save_btn.show(),a.allowDelete&&this.delete_btn.show()))},_hideCRUDButtons:function(){this.create_btn.hide();this.load_btn.hide();this.delete_btn.hide();this.save_btn.hide()},_getFilterURL:function(){var a=b(this.element).closest("form").find('input.filter-submit-url[type="hidden"]');return a.length?
a.first().val():document.URL},_bindEvents:function(){var a=this;this.create_btn.click(function(){a._newFilter()});this.accept_btn.click(function(){a._accept()});this.cancel_btn.click(function(){a._cancel()});this.element.change(function(){a._showCRUDButtons();a.options.explicitLoad||a._load()});this.options.explicitLoad&&this.load_btn.click(function(){a._load()});this.save_btn.click(function(){a._save()});this.delete_btn.click(function(){a._delete()})},_unbindEvents:function(){this.create_btn&&this.create_btn.unbind("click");
this.accept_btn&&this.accept_btn.unbind("click");this.cancel_btn&&this.cancel_btn.unbind("click");this.load_btn&&this.options.explicitLoad&&this.load_btn.unbind("click");this.save_btn&&this.save_btn.unbind("click");this.delete_btn&&this.delete_btn.unbind("click");this.element.unbind("change")}})})(jQuery);S3.supply={};S3.supply.fncPrepItem=function(b){for(var a=0;a<b.length;a++)if(1==b[a].quantity)return b[a].name;return""};
S3.supply.fncRepresentItem=function(b,a){return 1==b.quantity?b.name:b.name+" ("+b.quantity+" x "+a+")"};
$(document).ready(function(){var b=function(){var a=$("#inv_recv_type").val();void 0!=a&&(11==a?($('[id^="inv_recv_from_site_id__row"]').show(),$('[id^="inv_recv_organisation_id__row"]').hide()):32<=a?($('[id^="inv_recv_from_site_id__row"]').hide(),$('[id^="inv_recv_organisation_id__row"]').show()):($('[id^="inv_recv_from_site_id__row"]').hide(),$('[id^="inv_recv_organisation_id__row"]').hide()))};$("#inv_track_item_item_pack_id").change(function(){try{S3.JSONRequest[$(this).attr("id")].abort()}catch(c){}$("#TotalQuantity").remove();
if(0<$('[name="inv_item_id"]').length)id=$('[name="inv_item_id"]').val();else if(0<$('[name="send_inv_item_id"]').length)id=$('[name="send_inv_item_id"]').val();else return;var a=S3.Ap.concat("/inv/inv_item_quantity.json/"+id);0===$("#inv_quantity_throbber").length&&$('[name="quantity"]').after('<div id="inv_quantity_throbber" class="throbber"/>');S3.JSONRequest[$(this).attr("id")]=$.getJSON(a,function(a){var b=a.iquantity;a=a.pquantity;var c=$('[name="item_pack_id"] option:selected').text(),f=/\(([0-9]*)\sx/.exec(c);
TotalQuantity='<span id="TotalQuantity"> / '+(b*a/(null===f?1:f[1])).toFixed(2)+" "+c+" ("+i18n.in_inv+")</span>";$("#inv_quantity_throbber").remove();$('[name="quantity"]').after(TotalQuantity)})});b();$("#inv_recv_type").change(b);$(document).on("click",".quantity.ajax_more",function(a){a.preventDefault();a=$(this);if(a.hasClass("collapsed")){if(a.hasClass("fulfil")){var b="inv";var d="recv"}else a.hasClass("transit")?(d="send",b="inv"):a.hasClass("commit")&&(d="commit",b="req");a.after('<div class="ajax_throbber quantity_req_ajax_throbber"/>').removeClass("collapsed").addClass("expanded");
var e=$(".action-btn",a.parent().parent().parent()).attr("href");e=/req_item\/(\d*).*/i.exec(e)[1];e=S3.Ap.concat("/",b,"/",d,"_item_json.json/",e);$.ajax({url:e,dataType:"json",context:a}).done(function(a){RecvTable='<table class="recv_table">';for(i=0;i<a.length;i++)RecvTable+="<tr><td>",0===i?RecvTable+=a[0].id:(RecvURL=S3.Ap.concat("/",b,"/",d,"/",a[i].id,"/track_item"),RecvTable+="<a href='"+RecvURL+"'>",null!==a[i].date?(RecvTable+=a[i].date.substring(0,10)+" - ",RecvTable+=a[i].name+"</a>"):
RecvTable+=" - </a>"),RecvTable+="</td><td>"+a[i].quantity+"</td></tr>";RecvTable+="</table>";$(".quantity_req_ajax_throbber",this.parent()).remove();this.parent().after(RecvTable)})}else a.removeClass("expanded").addClass("collapsed"),$(".recv_table",a.parent().parent()).remove()})});
(function(b,a){var c=0;b.widget("s3.groupedopts",{options:{columns:3,emptyText:"No options available",orientation:"columns",sort:!0,table:!0,comment:""},_create:function(){var b=this.element.hide();this.id=c;c+=1;b.attr("multiple")!==a?this.multiple=!0:this.multiple=!1;this.menu=null},_init:function(){this.refresh()},_destroy:function(){this.menu.remove();this.element.show()},refresh:function(){var a=this.element,c=this.options;this.index=0;this.name="s3-groupedopts-"+this.id;this.menu&&this.menu.remove();
this.selected=a.val();var f=a.find("optgroup");if(a.find("option").length)if(f.length)for(this.grouped=!0,this.menu=b('<div class="s3-groupedopts-widget"/>'),c=0;c<f.length;c++)this._renderGroup(f[c]);else this.grouped=!1,this.menu=c.table?b('<table class="s3-groupedopts-widget"/>'):b('<div class="s3-groupedopts-widget"/>'),f=a.find("option"),this._renderRows(f,this.menu);else this.grouped=!0,this.menu=b('<div class="s3-groupedopts-widget"><span class="no-options-available">'+c.emptyText+"</span></div>");
a.after(this.menu);this._bindEvents()},hide:function(){this.menu.hide()},show:function(){this.menu.show()},visible:function(){return this.menu.is(":visible")},_renderGroup:function(a){var c=b(a).attr("label");a=b(a).find("option");a.length&&(c=b('<div class="s3-groupedopts-label">'+c+"</div>"),this.menu.append(c),c=this.options.table?b('<table class="s3-groupedopts-widget">'):b('<div class="s3-groupedopts-widget">'),this._renderRows(a,c),b(c).hide(),this.menu.append(c))},_renderRows:function(a,c){var d=
this.options,e=d.columns,g=b.makeArray(a);d.sort&&g.sort(function(a,c){return b(a).text()<b(c).text()?-1:1});a=[];var k,m;if("columns"==d.orientation){var l=Math.ceil(g.length/e);for(k=0;k<e;k++)for(m=0;m<l;m++)g.length&&(a.length<m+1&&a.push([]),a[m].push(g.shift()))}else for(;g.length;){m=[];for(k=0;k<e&&g.length;k++)m.push(g.shift());a.push(m)}d=d.table;for(k=0;k<a.length;k++){e=d?b("<tr/>"):b('<div class="s3-groupedopts-row"/>');for(m=0;m<a[k].length;m++)this._renderItem(a[k][m],e,d);c.append(e)}},
_renderItem:function(a,c,f){var d=this.options.comment,e=this.multiple,k=b(a),m="s3-groupedopts-option-"+this.id+"-"+this.index,l=e?"checkbox":"radio";this.index+=1;a=k.val();var n=k.html(),q=k.attr("title");k=this.selected;var p='<label for="'+m+'"';q&&""!==q&&(p+=' title="'+q+'"');e||a==k||(p+=' class="inactive"');p+=">"+n+"</label>";m=b('<input type="'+l+'" id="'+m+'" name="'+this.name+'" class="s3-groupedopts-option" value="'+a+'"/>');0<=(e?b.inArray(a,k):a==k?1:-1)&&b(m).prop("checked",!0);f=
f?b("<td>").append(m).append(b(p)):b('<div class="s3-groupedopts-item">').append(m).append(b(p));d&&(_.templateSettings={interpolate:/\{(.+?)\}/g},d=_.template(d)({v:a}),f.append(b(d)));c.append(f)},_bindEvents:function(){var a=this;a.menu.find(".s3-groupedopts-option").click(function(){var c=b(this),d=c.val(),h=a.element,g=a.multiple,k=h.val();null===k&&g&&(k=[]);g?(g=b.inArray(d,k),c.is(":checked")?0>g&&k.push(d):0<=g&&k.splice(g,1)):c.is(":checked")&&(k=d,a.menu.find(".s3-groupedopts-option").each(function(){c=
b(this);c.is(":checked")?c.next().removeClass("inactive"):c.next().addClass("inactive")}));this.selected=k;h.val(k).change()});a.menu.find("label[title]").cluetip({splitTitle:"|",showTitle:!1});a.menu.find(".s3-groupedopts-label").click(function(){var a=b(this);a.next("table").toggle();a.toggleClass("expanded")})}})})(jQuery);
(function(b,a){var c=0;b.widget("s3.inlinecomponent",{options:{implicitCancelEdit:"ask",confirmCancelEdit:"Discard changes?"},_create:function(){this.id=c;c+=1;this.eventNamespace=".inlinecomponent"},_init:function(){var a=b(this.element);this.formname=a.attr("id").split("-").pop();this.input=b("#"+a.attr("field"));a=this._layout;b.inlineComponentLayout&&(a=b.inlineComponentLayout);this._renderReadRow=a.renderReadRow;this._appendReadRow=a.appendReadRow;this._appendError=a.appendError;this._updateColumn=
a.updateColumn;this.refresh()},_destroy:function(){b.Widget.prototype.destroy.call(this)},refresh:function(){this._unbindEvents();this._openSingleRowSubforms();this._enforceRequired();this.labelRow=b("#sub-"+this.formname+" .label-row:not(.static)");b(this.element).find(".inline-open-add").length||b("#add-row-"+this.formname+" .inline-dsc").hide();this._showHeaders();this._bindEvents()},_openSingleRowSubforms:function(){var a=b(this.element),c=this;a.find(".inline-form.read-row.single").each(function(){var a=
b(this).attr("id").split("-").pop();c._editRow(a)});a.find(".inline-form.add-row.single").each(function(){var a=b(this),d=!1;a.find('input[type!="hidden"], select, textarea').each(function(){var a=b(this);"none"!=a.css("display")&&a.val()&&"checkbox"!=a.attr("type")&&(d=!0)});d&&(c._markChanged(a),c._catchSubmit())})},_enforceRequired:function(){var a=this;b(this.element).find(".inline-form.add-row.required").each(function(){a._markChanged(this);a._catchSubmit()})},_layout:{renderReadRow:function(a,
c,f){for(var d="",e=0,k=f.length;e<k;e++)d+="<td>"+f[e]+"</td>";d=0!==b("#edt-"+a+"-none").length?d+('<td><div><div id="edt-'+a+"-"+c+'" class="inline-edt"></div></div></td>'):d+"<td></td>";d=0!==b("#rmv-"+a+"-none").length?d+('<td><div><div id="rmv-'+a+"-"+c+'" class="inline-rmv"></div></div></td>'):d+"<td></td>";a="read-row-"+a+"-"+c;c=b("#"+a);c.length||(c=b('<tr id="'+a+'" class="read-row">'));c.empty().html(d);return c},appendReadRow:function(a,c){b("#sub-"+a+" > table.embeddedComponent > tbody").append(c)},
appendError:function(a,c,f,h){var d=a+"_error";h='<div class="error">'+h+"</div>";var e=function(a){a=b(a+"> td");for(var c=0,d,e=a.len,f;d<e;d++)c=(f=a[d].attr("colspan"))?c+parseInt(f):c+1;return c},m=function(){return"none"==c?"#add-row-"+a:"#edit-row-"+a};null===f?(f=m(),h=b('<tr><td colspan="'+e(f)+'">'+h+"</td></tr>")):(f="#sub_"+a+"_"+a+"_i_"+f+"_edit_"+c,b(f).is('[type="hidden"]')&&(f=m(),h='<tr><td colspan="'+e(f)+'">'+h+"</td></tr>"),h=b(h));h.addClass(d).hide().insertAfter(f)},updateColumn:function(a,
c,f){b(a).find("td").eq(c).html(f)}},_markChanged:function(a){a=b(a).closest(".inline-form");a.addClass("changed");a.hasClass("add-row")&&a.find(".inline-dsc").show()},_deserialize:function(){var a=this.input,b=JSON.parse(a.val());a.data("data",b);return b},_serialize:function(){var a=this.input,b=JSON.stringify(a.data("data"));a.val(b);return b},_displayErrors:function(){b("."+this.formname+"_error").show()},_removeErrors:function(){b("."+this.formname+"_error").remove()},_disableAddRow:function(){var a=
b("#add-row-"+this.formname);a.find("input, select, textarea").prop("disabled",!0);a.find(".inline-add, .action-lnk").hide()},_enableAddRow:function(){var a=b("#add-row-"+this.formname);a.find("input, select, textarea").prop("disabled",!1);a.find(".inline-add, .action-lnk").removeClass("hide").show()},_showHeaders:function(){var a=this.labelRow;a&&a.length&&(b("#sub-"+this.formname+" .read-row:visible").length?a.show():a.hide())},_catchSubmit:function(){var a=b(this.element).closest("form"),c=this.eventNamespace+
this.id,f=this,h=a.data("pendingValidations");h||(h={},a.data("pendingValidations",h),a.off("submit"+c).on("submit"+c,function(b){b.preventDefault();f.submitInProgress||(a.find('input[type="submit"]').prop("disabled",!0),f.submitInProgress=!0,a.trigger("validateInline"),f._deferredSubmit(a))}));h[c]||(h[c]=b.Deferred(),a.off("validateInline"+c).on("validateInline"+c,function(){f._validateAll()}))},_deferredSubmit:function(a){var c=a.data("pendingValidations"),d=[],h;for(h in c)d.push(c[h]);var g=
this.eventNamespace+this.id,k=this;b.when.apply(null,d).then(function(){k.submitInProgress=!1;a.off(g).submit()},function(){k.submitInProgress=!1;a.find('input[type="submit"]').prop("disabled",!1)})},_collectData:function(a,c,f){var d=this.formname,e=a.data,k={},m=null;if("none"==c)var l=b("#add-row-"+d);else{l=b("#edit-row-"+d);var n=l.data("rowindex");"undefined"!=typeof n&&(m=e[n])}if(l.length&&(e=new b.Event("validate"),l.triggerHandler(e),e.isDefaultPrevented()))return null;null!==m&&(l=m._id,
"undefined"!=typeof l&&(k._id=l));e=a.fields;for(n=0;n<e.length;n++){var q=e[n].name;l="#sub_"+d+"_"+d+"_i_"+q+"_edit_"+c;var p=b(l);if(p.length)if(l=p.val(),"file"==p.attr("type")){l||!m||b("#"+d+"_i_"+q+"_edit_"+c+"__delete").prop("checked")||(l=m[q].value);p.clone().insertAfter(p);var u=b("#add-"+d+"-none").length||"none"!=c?f||c:"0";u="upload_"+d+"_"+q+"_"+u;b("#"+u).remove();var z=p.closest("form");p.css({display:"none"}).attr("id",u).attr("name",u).appendTo(z);l.match(/fakepath/)&&(l=l.replace(/(c:\\)*fakepath\\/i,
""))}else"checkbox"==p.attr("type")?l=p.prop("checked"):p.hasClass("s3-hierarchy-input")?l=l?JSON.parse(l):null:(p=p.attr("class"),"generic-widget"==p&&(p=parseInt(l,10),isNaN(p)||l!=""+p||(l=p)));else l=null!==m?m[q].value:a.defaults&&"undefined"!=typeof a.defaults[q]?a.defaults[q].value:"";k[q]=l}if(b("#read-row-"+d+"-"+c).hasClass("single")){c=!0;for(q in k)if("_id"!=q&&""!==k[q]){c=!1;break}c?b("#edit-row-"+d).hasClass("required")?(this._appendError(d,"0",q,i18n.enter_value),k._error=!0):k._delete=
!0:delete k._error}else{f=!1;if(b("#add-row-"+d).hasClass("required")||b("#edit-row-"+d).hasClass("required"))f=!0;if(f){delete k._error;f=!0;for(q in k)"_id"!=q&&""!==k[q]&&(f=!1);f&&(f="none","none"!=c&&(f="0"),b("#add-"+d+"-"+c).length?b("#read-row-"+d+"-0").length||(this._appendError(d,f,q,i18n.enter_value),k._error=!0):(this._appendError(d,f,q,i18n.enter_value),k._error=!0))}}a=a.defaults;for(q in a)k.hasOwnProperty(q)||(l=a[q].value,k[q]=l);return k},_validate:function(a,c,f){var d=this.formname,
e=b.Deferred();if(f._error)return this._displayErrors(),e.reject();var k=a.resource,m=a.component;a=S3.Ap.concat("/"+a.controller+"/"+a["function"]+"/validate.json");null!==k&&"undefined"!=typeof k?(a+="?resource="+k,k="&"):k="?";null!==m&&"undefined"!=typeof m&&(a+=k+"component="+m);f=JSON.stringify(f);var l=this;b.ajaxS3({type:"POST",url:a,data:f,dataType:"json",contentType:"application/json; charset=utf-8",success:function(a){var b=!1;a?a.hasOwnProperty("_error")&&(b=!0,l._appendError(d,c,null,
a._error)):(b=!0,l._appendError(d,c,null,"validation failed"));var f;for(f in a){var g=a[f];if(g.hasOwnProperty("_error")){var h=g._error;"invalid field"==h?g.text=g.value:(b=!0,l._appendError(d,c,f,h))}}b?(l._displayErrors(),e.reject()):e.resolve(a)}});return e.promise()},_updateUploadWidget:function(a,c){var d=a.val();a=a.closest(".s3-upload-widget");var e=a.data("base");var g=e?e.concat("/",c):S3.Ap.concat("/default/download",c);a.find(".s3-upload-link").each(function(){var a=b(this),e=a.find("a");
c&&!d?(e.attr("href",g),a.removeClass("hide").show()):(e.removeAttr("href"),a.hide())});var k=!1;c&&(e=c.substr(c.lastIndexOf(".")+1).toLowerCase(),-1!=["gif","png","jpg","jpeg","bmp"].indexOf(e)&&(k=!0));a.find(".s3-upload-preview").each(function(){var a=b(this),c=a.find("img");k&&!d?(c.attr("src",g),a.removeClass("hide").show()):(c.attr("src",""),a.hide())})},_ensureSelectable:function(a,b){(b?b.constructor===Array?b:[b]:[]).forEach(function(b){a.find('option[value="'+b+'"]').length||a.append('<option value="'+
b+'">-</option>')})},_editRow:function(a){var c=this.options,d=this.formname,h=d+"-"+a;this._removeErrors();var g=this._deserialize(),k=g.data[a];if(!k._readonly){var m=b("#edit-row-"+d),l=m.data("rowindex");if(l&&m.hasClass("changed")){var n=!1;switch(c.implicitCancelEdit){case "refuse":break;case "submit":var q=this;this._updateRow(l).then(function(){q._editRow(a)});break;case "cancel":n=!0;break;default:confirm(c.confirmCancelEdit)&&(n=!0)}if(!n)return}b("#sub-"+d+" .read-row").removeClass("hide").show();
"imageimage"!=d&&b("#read-row-"+h).hide();c=g.fields;for(g=0;g<c.length;g++){n=c[g].name;l=k[n].value;var p="#sub_"+d+"_"+d+"_i_"+n+"_edit_0";var u=b("select"+p);u.length&&this._ensureSelectable(u,l);p=b(p);if(p.length)if("file"==p.attr("type")){u=b("#upload_"+d+"_"+n+"_"+a);if(u.length){var z=p.attr("id"),t=p.attr("name");p.replaceWith(u);u.attr("id",z).attr("name",t).css({display:""});p=u}this._updateUploadWidget(p,l);b("#"+d+"_i_"+n+"_edit_0__delete").prop("checked",!1)}else"checkbox"==p.attr("type")?
p.prop("checked",l):(p.val(l),p.hasClass("multiselect-widget")&&p.multiselect("instance")?p.multiselect("refresh"):p.hasClass("groupedopts-widget")&&p.groupedopts("instance")?p.groupedopts("refresh"):p.hasClass("location-selector")&&p.locationselector("instance")?p.locationselector("refresh"):p.hasClass("s3-hierarchy-input")?(n=p.parent(),n.hierarchicalopts("instance")&&(l?(l=JSON.parse(l),l.constructor!==Array&&(l=[l]),n.hierarchicalopts("set",l)):n.hierarchicalopts("reset"))):S3.rtl&&p.hasClass("phone-widget")?
l&&"\u200e"!=l.charAt(0)&&p.val("\u200e"+l):(p="#dummy_sub_"+d+"_"+d+"_i_"+n+"_edit_0",l=k[n].text,b(p).val(l)));else this._updateColumn(b("#edit-row-"+d),g,k[n].text)}m.data("rowindex",a).insertAfter("#read-row-"+h).removeClass("hide").show();b('select:not(".lx-select")',m).change();this._disableAddRow();this._showHeaders()}},_cancelEdit:function(a){var c=this.formname;a=c+"-"+a;this._removeErrors();b("#edit-row-"+c).hide().data("rowindex",null).removeClass("changed");b("#read-row-"+a).removeClass("hide").show();
this._enableAddRow();this._showHeaders()},_resetAddRow:function(){var a=this,c=this._deserialize(),f=this.formname,h="sub_"+f+"_"+f+"_i_";this._removeErrors();c=c.fields;for(var g,k,m,l,n=function(){a._markChanged(this);a._catchSubmit()},q=c.length;q--;)g=c[q].name,g=h+g,k=b("#"+g+"_edit_default"),l=b("#"+g+"_edit_none"),"file"==l.attr("type")?(m=k.clone(),m.attr("id",l.attr("id")).attr("name",l.attr("name")).change(n),l.replaceWith(m)):(m=k.val(),l.val(m).change(),"checkbox"==l.attr("type")?l.prop("checked",
k.prop("checked")):l.hasClass("multiselect-widget")&&l.multiselect("instance")?l.multiselect("refresh"):l.hasClass("groupedopts-widget")&&l.groupedopts("instance")?l.groupedopts("refresh"):l.hasClass("location-selector")&&l.locationselector("instance")?l.locationselector("refresh"):l.hasClass("s3-hierarchy-input")&&(l=l.parent(),l.hierarchicalopts("instance")&&(m?(m=JSON.parse(m),m.constructor!==Array&&(m=[m]),l.hierarchicalopts("set",m)):l.hierarchicalopts("reset")))),m=b("#dummy_"+g+"_edit_default").val(),
b("#dummy_"+g+"_edit_none").val(m);f=b("#add-row-"+f);f.removeClass("changed");h=b(this.element).find(".inline-open-add");h.length?(f.hide(),h.show()):f.find(".inline-dsc").hide()},_addRow:function(){var a=this.formname,c=b("#add-"+a+"-none"),f;if(f=c.length?!0:!1){c.hide();var h=b("#throbber-"+a+"-none").removeClass("hide").show();this._removeErrors()}var g=this._deserialize(),k=this._collectData(g,"none");if(null===k)return f&&(h.hide(),c.removeClass("hide").show()),b.Deferred().reject();var m;
if(b("#add-row-"+a).hasClass("required")){var l=!0;for(m in k)"_id"!=m&&""!==k[m]&&(l=!1);if(l&&b("#add-"+a+"-none").length&&b("#read-row-"+a+"-0").length)return h.hide(),c.removeClass("hide").show(),b.Deferred().resolve()}var n=this;return this._validate(g,"none",k).then(function(d){if(null!==d){d._changed=!0;var e=g.data.push(d)-1;d._index=e;n._serialize();if(f){for(var k=[],l=g.fields,m,q,r,w=0,B=l.length;w<B;w++)m=l[w].name,q=b("#upload_"+a+"_"+m+"_none"),q.length&&(r="upload_"+a+"_"+m+"_"+e,
b("#"+r).remove(),q.attr({id:r,name:r})),k.push(d[m].text);n._resetAddRow();d=n._renderReadRow(a,e,k);n._appendReadRow(a,d);n._showHeaders()}}f&&(h.hide(),c.removeClass("hide").show())},function(){f&&(h.hide(),c.removeClass("hide").show())})},_updateRow:function(a){var c=this.formname,d=b("#rdy-"+c+"-0"),h;if(h=d.length?!0:!1){d.hide();var g=b("#throbber-"+c+"-0").removeClass("hide").show();this._removeErrors()}var k=this._deserialize(),m=this._collectData(k,"0",a);if(null===m)return h&&(g.hide(),
d.removeClass("hide").show()),b.Deferred().reject();if(m._delete)return k.data[a]._delete=!0,this._serialize(),b.Deferred().resolve();var l=this;return this._validate(k,"0",m).then(function(e){if(null!==e&&(e._id=k.data[a]._id,e._changed=!0,e._index=a,k.data[a]=e,l._serialize(),h)){var f=[],m=k.fields,n,z=function(){l._markChanged(l);l._catchSubmit()};for(n=0;n<m.length;n++){var t=m[n].name;f.push(e[t].text);var v=b("#sub_"+c+"_"+c+"_i_"+t+"_edit_default");var r=b("#sub_"+c+"_"+c+"_i_"+t+"_edit_0");
"file"==r.attr("type")?(v=v.clone(),v.attr("id",r.attr("id")).attr("name",r.attr("name")).change(z),r.replaceWith(v)):(v=v.val(),r.val(v));v=b("#dummy_sub_"+c+"_"+c+"_i_"+t+"_edit_default").val();b("#dummy_sub_"+c+"_"+c+"_i_"+t+"_edit_0").val(v)}e=b("#edit-row-"+c);e.removeClass("changed");f=l._renderReadRow(c,a,f);e.hide().data("rowindex",null);f.removeClass("hide").show();l._enableAddRow();l._showHeaders()}h&&(g.hide(),d.removeClass("hide").show())},function(){h&&(g.hide(),d.removeClass("hide").show())})},
_removeRow:function(a){var c=this.formname,d=c+"-"+a;if(!confirm(i18n.delete_confirmation))return!1;this._deserialize().data[a]._delete=!0;this._serialize();b("#read-row-"+d).remove();this._showHeaders();b('input[name^="upload_'+c+'_"][name$="_'+a+'"]').remove();a=b("#edit-row-"+c);a.hasClass("required")&&!b("#read-row-"+c+"-0").length&&(b("#add-row-"+c).addClass("required"),a.removeClass("required"),this._catchSubmit());return!0},_validateAll:function(){var a=this,c=[];b(a.element).find(".inline-form.changed, .inline-form.required").each(function(){var d=
b(this),e=!0;if(d.hasClass("required")||d.hasClass("edit-row"))e=!1;else for(var f=d.find("input, select, textarea"),g,h,p=f.length;p--;){g=b(f[p]);if(g.is('[type="hidden"]')){if(!g.data("input"))continue}else if(!g.is(":visible"))continue;if("SELECT"==g.prop("tagName")&&!d.hasClass("single")&&(h=g.attr("id").split("_"),h.pop(),h.push("default"),h=b("#"+h.join("_")),h.length&&h.val()==g.val()))continue;if("checkbox"!=g.attr("type")&&g.val()||g.prop("checked")){e=!1;break}}e||(d.hasClass("add-row")?
c.push(a._addRow()):c.push(a._updateRow(d.data("rowindex"))))});var f=b(this.element).closest("form"),h=f.data("pendingValidations"),g=this.eventNamespace+this.id;b.when.apply(null,c).then(function(){h[g]&&(h[g].resolve(),delete h[g]);f.off("validateInline"+g)},function(){h[g]&&(h[g].reject(),h[g]=b.Deferred())})},_bindEvents:function(){var a=b(this.element),c=this.eventNamespace,f=this;a.on("click"+c,".read-row",function(a){var c=a.target;if(!c||"A"!=c.tagName||!c.href)return c=b(this).attr("id").split("-").pop(),
a.preventDefault(),f._editRow(c),!1}).on("click"+c,".inline-add",function(){f._addRow();return!1}).on("click"+c,".inline-dsc",function(){f._resetAddRow();return!1}).on("click"+c,".inline-cnc",function(){var a=b(this).attr("id").split("-");a.pop();a=a.pop();a=b("#edit-row-"+a).data("rowindex");f._cancelEdit(a);return!1}).on("click"+c,".inline-rdy",function(){var a=b(this).attr("id").split("-");a.pop();a=a.pop();a=b("#edit-row-"+a).data("rowindex");f._updateRow(a);return!1}).on("click"+c,".inline-edt",
function(){var a=b(this).attr("id").split("-").pop();f._editRow(a);return!1}).on("click"+c,".inline-rmv",function(){var a=b(this).attr("id").split("-").pop();f._removeRow(a);return!1}).on("click"+c,".error",function(){b(this).fadeOut("medium",function(){b(this).remove()});return!1});a.find(".add-row,.edit-row").each(function(){var a=b(this);a.find("div.map_wrapper").on("change"+c,function(){f._markChanged(this);f._catchSubmit()});a.find('input[type="text"],input[type="file"],textarea').on("input"+
c,function(){f._markChanged(this);f._catchSubmit()});a.find('input[type="file"]').on("change"+c,function(){f._markChanged(this);f._catchSubmit()});a.find("input.s3-calendar-widget").on("change"+c,function(){f._markChanged(this);f._catchSubmit()});a.find('input[type!="text"][type!="file"],select').on("focusin"+c,function(){b(this).one("change"+c,function(){f._markChanged(this);f._catchSubmit()}).one("focusout",function(){b(this).off("change"+c)})});a.find("select.multiselect-widget").on("multiselectopen"+
c,function(){b(this).off("change"+c).one("change"+c,function(){f._markChanged(this);f._catchSubmit()})});a.find("input.s3-hierarchy-input").on("change"+c,function(){f._markChanged(this);f._catchSubmit()});a.find("input").on("keypress"+c,function(a){return 13==a.which?(a.preventDefault(),!1):!0})});a.find(".add-row").each(function(){b(this).find("input").on("keyup"+c,function(a){switch(a.which){case 13:f._addRow()}})});a.find(".edit-row").each(function(){b(this).find("input").on("keyup"+c,function(a){var c=
b(this).closest(".edit-row").data("rowindex");switch(a.which){case 13:f._updateRow(c);break;case 27:f._cancelEdit(c)}})});a.find(".inline-open-add").on("click"+c,function(a){a.preventDefault();b("#add-row-"+f.formname).removeClass("hide").show();b(this).hide()});return!0},_unbindEvents:function(){var a=b(this.element),c=this.eventNamespace;a.find(".inline-locationselector-widget").off(c);a.find(".add-row,.edit-row").each(function(){b(this).find("input,textarea,select").off(c)});a.find(".inline-open-add").off(c);
a.off(c);return!0}})})(jQuery);$(document).ready(function(){$(".inline-component").inlinecomponent(S3.inlineComponentsOpts||{})});
(function(b){"function"===typeof define&&define.amd?define(["jquery","../version","../keycode","../unique-id","../widget"],b):b(jQuery)})(function(b){return b.widget("ui.accordion",{version:"1.12.1",options:{active:0,animate:{},classes:{"ui-accordion-header":"ui-corner-top","ui-accordion-header-collapsed":"ui-corner-all","ui-accordion-content":"ui-corner-bottom"},collapsible:!1,event:"click",header:"> li > :first-child, > :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",
header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},hideProps:{borderTopWidth:"hide",borderBottomWidth:"hide",paddingTop:"hide",paddingBottom:"hide",height:"hide"},showProps:{borderTopWidth:"show",borderBottomWidth:"show",paddingTop:"show",paddingBottom:"show",height:"show"},_create:function(){var a=this.options;this.prevShow=this.prevHide=b();this._addClass("ui-accordion","ui-widget ui-helper-reset");this.element.attr("role","tablist");a.collapsible||!1!==a.active&&null!=a.active||
(a.active=0);this._processPanels();0>a.active&&(a.active+=this.headers.length);this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():b()}},_createIcons:function(){var a=this.options.icons;if(a){var c=b("<span>");this._addClass(c,"ui-accordion-header-icon","ui-icon "+a.header);c.prependTo(this.headers);c=this.active.children(".ui-accordion-header-icon");this._removeClass(c,a.header)._addClass(c,null,a.activeHeader)._addClass(this.headers,
"ui-accordion-icons")}},_destroyIcons:function(){this._removeClass(this.headers,"ui-accordion-icons");this.headers.children(".ui-accordion-header-icon").remove()},_destroy:function(){this.element.removeAttr("role");this.headers.removeAttr("role aria-expanded aria-selected aria-controls tabIndex").removeUniqueId();this._destroyIcons();var a=this.headers.next().css("display","").removeAttr("role aria-hidden aria-labelledby").removeUniqueId();"content"!==this.options.heightStyle&&a.css("height","")},
_setOption:function(a,b){"active"===a?this._activate(b):("event"===a&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(b)),this._super(a,b),"collapsible"!==a||b||!1!==this.options.active||this._activate(0),"icons"===a&&(this._destroyIcons(),b&&this._createIcons()))},_setOptionDisabled:function(a){this._super(a);this.element.attr("aria-disabled",a);this._toggleClass(null,"ui-state-disabled",!!a);this._toggleClass(this.headers.add(this.headers.next()),null,"ui-state-disabled",
!!a)},_keydown:function(a){if(!a.altKey&&!a.ctrlKey){var c=b.ui.keyCode,d=this.headers.length,e=this.headers.index(a.target),f=!1;switch(a.keyCode){case c.RIGHT:case c.DOWN:f=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:f=this.headers[(e-1+d)%d];break;case c.SPACE:case c.ENTER:this._eventHandler(a);break;case c.HOME:f=this.headers[0];break;case c.END:f=this.headers[d-1]}f&&(b(a.target).attr("tabIndex",-1),b(f).attr("tabIndex",0),b(f).trigger("focus"),a.preventDefault())}},_panelKeyDown:function(a){a.keyCode===
b.ui.keyCode.UP&&a.ctrlKey&&b(a.currentTarget).prev().trigger("focus")},refresh:function(){var a=this.options;this._processPanels();!1===a.active&&!0===a.collapsible||!this.headers.length?(a.active=!1,this.active=b()):!1===a.active?this._activate(0):this.active.length&&!b.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(a.active=!1,this.active=b()):this._activate(Math.max(0,a.active-1)):a.active=this.headers.index(this.active);this._destroyIcons();
this._refresh()},_processPanels:function(){var a=this.headers,b=this.panels;this.headers=this.element.find(this.options.header);this._addClass(this.headers,"ui-accordion-header ui-accordion-header-collapsed","ui-state-default");this.panels=this.headers.next().filter(":not(.ui-accordion-content-active)").hide();this._addClass(this.panels,"ui-accordion-content","ui-helper-reset ui-widget-content");b&&(this._off(a.not(this.headers)),this._off(b.not(this.panels)))},_refresh:function(){var a=this.options,
c=a.heightStyle,d=this.element.parent();this.active=this._findActive(a.active);this._addClass(this.active,"ui-accordion-header-active","ui-state-active")._removeClass(this.active,"ui-accordion-header-collapsed");this._addClass(this.active.next(),"ui-accordion-content-active");this.active.next().show();this.headers.attr("role","tab").each(function(){var a=b(this),c=a.uniqueId().attr("id"),d=a.next(),e=d.uniqueId().attr("id");a.attr("aria-controls",e);d.attr("aria-labelledby",c)}).next().attr("role",
"tabpanel");this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide();this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._createIcons();this._setupEvents(a.event);if("fill"===c){var e=d.height();this.element.siblings(":visible").each(function(){var a=b(this),c=a.css("position");"absolute"!==c&&
"fixed"!==c&&(e-=a.outerHeight(!0))});this.headers.each(function(){e-=b(this).outerHeight(!0)});this.headers.next().each(function(){b(this).height(Math.max(0,e-b(this).innerHeight()+b(this).height()))}).css("overflow","auto")}else"auto"===c&&(e=0,this.headers.next().each(function(){var a=b(this).is(":visible");a||b(this).show();e=Math.max(e,b(this).css("height","").height());a||b(this).hide()}).height(e))},_activate:function(a){a=this._findActive(a)[0];a!==this.active[0]&&(a=a||this.active[0],this._eventHandler({target:a,
currentTarget:a,preventDefault:b.noop}))},_findActive:function(a){return"number"===typeof a?this.headers.eq(a):b()},_setupEvents:function(a){var c={keydown:"_keydown"};a&&b.each(a.split(" "),function(a,b){c[b]="_eventHandler"});this._off(this.headers.add(this.headers.next()));this._on(this.headers,c);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers)},_eventHandler:function(a){var c,d=this.options,e=this.active,f=b(a.currentTarget),
h=(c=f[0]===e[0])&&d.collapsible,g=h?b():f.next(),k=e.next();g={oldHeader:e,oldPanel:k,newHeader:h?b():f,newPanel:g};a.preventDefault();c&&!d.collapsible||!1===this._trigger("beforeActivate",a,g)||(d.active=h?!1:this.headers.index(f),this.active=c?b():f,this._toggle(g),this._removeClass(e,"ui-accordion-header-active","ui-state-active"),d.icons&&(a=e.children(".ui-accordion-header-icon"),this._removeClass(a,null,d.icons.activeHeader)._addClass(a,null,d.icons.header)),c||(this._removeClass(f,"ui-accordion-header-collapsed")._addClass(f,
"ui-accordion-header-active","ui-state-active"),d.icons&&(c=f.children(".ui-accordion-header-icon"),this._removeClass(c,null,d.icons.header)._addClass(c,null,d.icons.activeHeader)),this._addClass(f.next(),"ui-accordion-content-active")))},_toggle:function(a){var c=a.newPanel,d=this.prevShow.length?this.prevShow:a.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0);this.prevShow=c;this.prevHide=d;this.options.animate?this._animate(c,d,a):(d.hide(),c.show(),this._toggleComplete(a));d.attr({"aria-hidden":"true"});
d.prev().attr({"aria-selected":"false","aria-expanded":"false"});c.length&&d.length?d.prev().attr({tabIndex:-1,"aria-expanded":"false"}):c.length&&this.headers.filter(function(){return 0===parseInt(b(this).attr("tabIndex"),10)}).attr("tabIndex",-1);c.attr("aria-hidden","false").prev().attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0})},_animate:function(a,b,d){var c,f,h=this,g=0,k=a.css("box-sizing"),m=a.length&&(!b.length||a.index()<b.index()),l=this.options.animate||{};m=m&&l.down||
l;var n=function(){h._toggleComplete(d)};"number"===typeof m&&(f=m);"string"===typeof m&&(c=m);c=c||m.easing||l.easing;f=f||m.duration||l.duration;if(!b.length)return a.animate(this.showProps,f,c,n);if(!a.length)return b.animate(this.hideProps,f,c,n);var q=a.show().outerHeight();b.animate(this.hideProps,{duration:f,easing:c,step:function(a,b){b.now=Math.round(a)}});a.hide().animate(this.showProps,{duration:f,easing:c,complete:n,step:function(a,c){c.now=Math.round(a);"height"!==c.prop?"content-box"===
k&&(g+=c.now):"content"!==h.options.heightStyle&&(c.now=Math.round(q-b.outerHeight()-g),g=0)}})},_toggleComplete:function(a){var b=a.oldPanel,d=b.prev();this._removeClass(b,"ui-accordion-content-active");this._removeClass(d,"ui-accordion-header-active")._addClass(d,"ui-accordion-header-collapsed");b.length&&(b.parent()[0].className=b.parent()[0].className);this._trigger("activate",null,a)}})});
(function(b){"function"===typeof define&&define.amd?define("jquery ./mouse ../data ../ie ../scroll-parent ../version ../widget".split(" "),b):b(jQuery)})(function(b){return b.widget("ui.sortable",b.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,
scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(a,b,d){return a>=b&&a<b+d},_isFloating:function(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))},_create:function(){this.containerCache={};this._addClass("ui-sortable");this.refresh();this.offset=this.element.offset();
this._mouseInit();this._setHandleClassName();this.ready=!0},_setOption:function(a,b){this._super(a,b);"handle"===a&&this._setHandleClassName()},_setHandleClassName:function(){var a=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle");b.each(this.items,function(){a._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var a=this.items.length-1;0<=a;a--)this.items[a].item.removeData(this.widgetName+
"-item");return this},_mouseCapture:function(a,c){var d=null,e=!1,f=this;if(this.reverting||this.options.disabled||"static"===this.options.type)return!1;this._refreshItems(a);b(a.target).parents().each(function(){if(b.data(this,f.widgetName+"-item")===f)return d=b(this),!1});b.data(a.target,f.widgetName+"-item")===f&&(d=b(a.target));if(!d||this.options.handle&&!c&&(b(this.options.handle,d).find("*").addBack().each(function(){this===a.target&&(e=!0)}),!e))return!1;this.currentItem=d;this._removeCurrentsFromItems();
return!0},_mouseStart:function(a,c,d){c=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(a);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};b.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});
this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!==this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();c.containment&&this._setContainment();if(c.cursor&&"auto"!==c.cursor){var e=this.document.find("body");
this.storedCursor=e.css("cursor");e.css("cursor",c.cursor);this.storedStylesheet=b("<style>*{ cursor: "+c.cursor+" !important; }</style>").appendTo(e)}c.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",c.opacity));c.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",c.zIndex));this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());
this._trigger("start",a,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!d)for(d=this.containers.length-1;0<=d;d--)this.containers[d]._trigger("activate",a,this._uiHash(this));b.ui.ddmanager&&(b.ui.ddmanager.current=this);b.ui.ddmanager&&!c.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,a);this.dragging=!0;this._addClass(this.helper,"ui-sortable-helper");this._mouseDrag(a);return!0},_mouseDrag:function(a){var c;var d=this.options;var e=!1;this.position=this._generatePosition(a);
this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-a.pageY<d.scrollSensitivity?this.scrollParent[0].scrollTop=e=this.scrollParent[0].scrollTop+d.scrollSpeed:a.pageY-this.overflowOffset.top<d.scrollSensitivity&&(this.scrollParent[0].scrollTop=e=this.scrollParent[0].scrollTop-d.scrollSpeed),
this.overflowOffset.left+this.scrollParent[0].offsetWidth-a.pageX<d.scrollSensitivity?this.scrollParent[0].scrollLeft=e=this.scrollParent[0].scrollLeft+d.scrollSpeed:a.pageX-this.overflowOffset.left<d.scrollSensitivity&&(this.scrollParent[0].scrollLeft=e=this.scrollParent[0].scrollLeft-d.scrollSpeed)):(a.pageY-this.document.scrollTop()<d.scrollSensitivity?e=this.document.scrollTop(this.document.scrollTop()-d.scrollSpeed):this.window.height()-(a.pageY-this.document.scrollTop())<d.scrollSensitivity&&
(e=this.document.scrollTop(this.document.scrollTop()+d.scrollSpeed)),a.pageX-this.document.scrollLeft()<d.scrollSensitivity?e=this.document.scrollLeft(this.document.scrollLeft()-d.scrollSpeed):this.window.width()-(a.pageX-this.document.scrollLeft())<d.scrollSensitivity&&(e=this.document.scrollLeft(this.document.scrollLeft()+d.scrollSpeed))),!1!==e&&b.ui.ddmanager&&!d.dropBehaviour&&b.ui.ddmanager.prepareOffsets(this,a));this.positionAbs=this._convertPositionTo("absolute");this.options.axis&&"y"===
this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(d=this.items.length-1;0<=d;d--){e=this.items[d];var f=e.item[0];if((c=this._intersectsWithPointer(e))&&e.instance===this.currentContainer&&f!==this.currentItem[0]&&this.placeholder[1===c?"next":"prev"]()[0]!==f&&!b.contains(this.placeholder[0],f)&&("semi-dynamic"===this.options.type?!b.contains(this.element[0],f):1)){this.direction=
1===c?"down":"up";if("pointer"===this.options.tolerance||this._intersectsWithSides(e))this._rearrange(a,e);else break;this._trigger("change",a,this._uiHash());break}}this._contactContainers(a);b.ui.ddmanager&&b.ui.ddmanager.drag(this,a);this._trigger("sort",a,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(a,c){if(a){b.ui.ddmanager&&!this.options.dropBehaviour&&b.ui.ddmanager.drop(this,a);if(this.options.revert){var d=this;c=this.placeholder.offset();var e=this.options.axis,
f={};e&&"x"!==e||(f.left=c.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft));e&&"y"!==e||(f.top=c.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop));this.reverting=!0;b(this.helper).animate(f,parseInt(this.options.revert,10)||500,function(){d._clear(a)})}else this._clear(a,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new b.Event("mouseup",
{target:null}));"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var a=this.containers.length-1;0<=a;a--)this.containers[a]._trigger("deactivate",null,this._uiHash(this)),this.containers[a].containerCache.over&&(this.containers[a]._trigger("out",null,this._uiHash(this)),this.containers[a].containerCache.over=0)}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),
"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),b.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?b(this.domPosition.prev).after(this.currentItem):b(this.domPosition.parent).prepend(this.currentItem));return this},serialize:function(a){var c=this._getItemsAsjQuery(a&&a.connected),d=[];a=a||{};b(c).each(function(){var c=(b(a.item||this).attr(a.attribute||"id")||"").match(a.expression||/(.+)[\-=_](.+)/);c&&d.push((a.key||
c[1]+"[]")+"="+(a.key&&a.expression?c[1]:c[2]))});!d.length&&a.key&&d.push(a.key+"=");return d.join("&")},toArray:function(a){var c=this._getItemsAsjQuery(a&&a.connected),d=[];a=a||{};c.each(function(){d.push(b(a.item||this).attr(a.attribute||"id")||"")});return d},_intersectsWith:function(a){var b=this.positionAbs.left,d=b+this.helperProportions.width,e=this.positionAbs.top,f=e+this.helperProportions.height,h=a.left,g=h+a.width,k=a.top,m=k+a.height,l=this.offset.click.top,n=this.offset.click.left;
l="x"===this.options.axis||e+l>k&&e+l<m;n="y"===this.options.axis||b+n>h&&b+n<g;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?l&&n:h<b+this.helperProportions.width/2&&d-this.helperProportions.width/2<g&&k<e+this.helperProportions.height/2&&f-this.helperProportions.height/2<m},_intersectsWithPointer:function(a){var b="x"===this.options.axis||
this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height);a="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width);if(!b||!a)return!1;b=this._getDragVerticalDirection();a=this._getDragHorizontalDirection();return this.floating?"right"===a||"down"===b?2:1:b&&("down"===b?2:1)},_intersectsWithSides:function(a){var b=this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height);a=this._isOverAxis(this.positionAbs.left+
this.offset.click.left,a.left+a.width/2,a.width);var d=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return this.floating&&e?"right"===e&&a||"left"===e&&!a:d&&("down"===d&&b||"up"===d&&!b)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(0<a?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(0<a?"right":"left")},refresh:function(a){this._refreshItems(a);
this._setHandleClassName();this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(a){function c(){f.push(this)}var d,e,f=[],h=[],g=this._connectWith();if(g&&a)for(a=g.length-1;0<=a;a--){var k=b(g[a],this.document[0]);for(d=k.length-1;0<=d;d--)(e=b.data(k[d],this.widgetFullName))&&e!==this&&!e.options.disabled&&h.push([b.isFunction(e.options.items)?e.options.items.call(e.element):
b(e.options.items,e.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),e])}h.push([b.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):b(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(a=h.length-1;0<=a;a--)h[a][0].each(c);return b(f)},_removeCurrentsFromItems:function(){var a=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=b.grep(this.items,
function(b){for(var c=0;c<a.length;c++)if(a[c]===b.item[0])return!1;return!0})},_refreshItems:function(a){this.items=[];this.containers=[this];var c,d,e,f,h=this.items,g=[[b.isFunction(this.options.items)?this.options.items.call(this.element[0],a,{item:this.currentItem}):b(this.options.items,this.element),this]];if((f=this._connectWith())&&this.ready)for(c=f.length-1;0<=c;c--){var k=b(f[c],this.document[0]);for(d=k.length-1;0<=d;d--)(e=b.data(k[d],this.widgetFullName))&&e!==this&&!e.options.disabled&&
(g.push([b.isFunction(e.options.items)?e.options.items.call(e.element[0],a,{item:this.currentItem}):b(e.options.items,e.element),e]),this.containers.push(e))}for(c=g.length-1;0<=c;c--)for(a=g[c][1],k=g[c][0],d=0,f=k.length;d<f;d++)e=b(k[d]),e.data(this.widgetName+"-item",a),h.push({item:e,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(a){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1;this.offsetParent&&this.helper&&(this.offset.parent=
this._getParentOffset());var c;for(c=this.items.length-1;0<=c;c--){var d=this.items[c];if(d.instance===this.currentContainer||!this.currentContainer||d.item[0]===this.currentItem[0]){var e=this.options.toleranceElement?b(this.options.toleranceElement,d.item):d.item;a||(d.width=e.outerWidth(),d.height=e.outerHeight());e=e.offset();d.left=e.left;d.top=e.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=this.containers.length-
1;0<=c;c--)e=this.containers[c].element.offset(),this.containers[c].containerCache.left=e.left,this.containers[c].containerCache.top=e.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(a){a=a||this;var c=a.options;if(!c.placeholder||c.placeholder.constructor===String){var d=c.placeholder;c.placeholder={element:function(){var c=a.currentItem[0].nodeName.toLowerCase(),
f=b("<"+c+">",a.document[0]);a._addClass(f,"ui-sortable-placeholder",d||a.currentItem[0].className)._removeClass(f,"ui-sortable-helper");"tbody"===c?a._createTrPlaceholder(a.currentItem.find("tr").eq(0),b("<tr>",a.document[0]).appendTo(f)):"tr"===c?a._createTrPlaceholder(a.currentItem,f):"img"===c&&f.attr("src",a.currentItem.attr("src"));d||f.css("visibility","hidden");return f},update:function(b,f){if(!d||c.forcePlaceholderSize)f.height()||f.height(a.currentItem.innerHeight()-parseInt(a.currentItem.css("paddingTop")||
0,10)-parseInt(a.currentItem.css("paddingBottom")||0,10)),f.width()||f.width(a.currentItem.innerWidth()-parseInt(a.currentItem.css("paddingLeft")||0,10)-parseInt(a.currentItem.css("paddingRight")||0,10))}}}a.placeholder=b(c.placeholder.element.call(a.element,a.currentItem));a.currentItem.after(a.placeholder);c.placeholder.update(a,a.placeholder)},_createTrPlaceholder:function(a,c){var d=this;a.children().each(function(){b("<td>&#160;</td>",d.document[0]).attr("colspan",b(this).attr("colspan")||1).appendTo(c)})},
_contactContainers:function(a){var c,d,e,f=e=null;for(c=this.containers.length-1;0<=c;c--)b.contains(this.currentItem[0],this.containers[c].element[0])||(this._intersectsWith(this.containers[c].containerCache)?e&&b.contains(this.containers[c].element[0],e.element[0])||(e=this.containers[c],f=c):this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",a,this._uiHash(this)),this.containers[c].containerCache.over=0));if(e)if(1===this.containers.length)this.containers[f].containerCache.over||
(this.containers[f]._trigger("over",a,this._uiHash(this)),this.containers[f].containerCache.over=1);else{c=1E4;var h=null;e=(d=e.floating||this._isFloating(this.currentItem))?"left":"top";var g=d?"width":"height";var k=d?"pageX":"pageY";for(d=this.items.length-1;0<=d;d--)if(b.contains(this.containers[f].element[0],this.items[d].item[0])&&this.items[d].item[0]!==this.currentItem[0]){var m=this.items[d].item.offset()[e];var l=!1;a[k]-m>this.items[d][g]/2&&(l=!0);Math.abs(a[k]-m)<c&&(c=Math.abs(a[k]-
m),h=this.items[d],this.direction=l?"up":"down")}if(h||this.options.dropOnEmpty)this.currentContainer===this.containers[f]?this.currentContainer.containerCache.over||(this.containers[f]._trigger("over",a,this._uiHash()),this.currentContainer.containerCache.over=1):(h?this._rearrange(a,h,null,!0):this._rearrange(a,null,this.containers[f].element,!0),this._trigger("change",a,this._uiHash()),this.containers[f]._trigger("change",a,this._uiHash(this)),this.currentContainer=this.containers[f],this.options.placeholder.update(this.currentContainer,
this.placeholder),this.containers[f]._trigger("over",a,this._uiHash(this)),this.containers[f].containerCache.over=1)}},_createHelper:function(a){var c=this.options;a=b.isFunction(c.helper)?b(c.helper.apply(this.element[0],[a,this.currentItem])):"clone"===c.helper?this.currentItem.clone():this.currentItem;a.parents("body").length||b("parent"!==c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(a[0]);a[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,
height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")});a[0].style.width&&!c.forceHelperSize||a.width(this.currentItem.width());a[0].style.height&&!c.forceHelperSize||a.height(this.currentItem.height());return a},_adjustOffsetFromHelper:function(a){"string"===typeof a&&(a=a.split(" "));b.isArray(a)&&(a={left:+a[0],top:+a[1]||0});"left"in a&&(this.offset.click.left=a.left+this.margins.left);"right"in a&&(this.offset.click.left=
this.helperProportions.width-a.right+this.margins.left);"top"in a&&(this.offset.click.top=a.top+this.margins.top);"bottom"in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&b.contains(this.scrollParent[0],this.offsetParent[0])&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());
if(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&b.ui.ie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-
(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;"parent"===a.containment&&(a.containment=this.helper[0].parentNode);if("document"===
a.containment||"window"===a.containment)this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===a.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===a.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)){var c=
b(a.containment)[0];a=b(a.containment).offset();var d="hidden"!==b(c).css("overflow");this.containment=[a.left+(parseInt(b(c).css("borderLeftWidth"),10)||0)+(parseInt(b(c).css("paddingLeft"),10)||0)-this.margins.left,a.top+(parseInt(b(c).css("borderTopWidth"),10)||0)+(parseInt(b(c).css("paddingTop"),10)||0)-this.margins.top,a.left+(d?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(b(c).css("borderLeftWidth"),10)||0)-(parseInt(b(c).css("paddingRight"),10)||0)-this.helperProportions.width-
this.margins.left,a.top+(d?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(b(c).css("borderTopWidth"),10)||0)-(parseInt(b(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(a,c){c||(c=this.position);a="absolute"===a?1:-1;var d="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&b.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(d[0].tagName);
return{top:c.top+this.offset.relative.top*a+this.offset.parent.top*a-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop())*a,left:c.left+this.offset.relative.left*a+this.offset.parent.left*a-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())*a}},_generatePosition:function(a){var c=this.options;var d=a.pageX;var e=a.pageY;var f="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&b.contains(this.scrollParent[0],this.offsetParent[0])?
this.scrollParent:this.offsetParent,h=/(html|body)/i.test(f[0].tagName);"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());this.originalPosition&&(this.containment&&(a.pageX-this.offset.click.left<this.containment[0]&&(d=this.containment[0]+this.offset.click.left),a.pageY-this.offset.click.top<this.containment[1]&&(e=this.containment[1]+this.offset.click.top),a.pageX-this.offset.click.left>
this.containment[2]&&(d=this.containment[2]+this.offset.click.left),a.pageY-this.offset.click.top>this.containment[3]&&(e=this.containment[3]+this.offset.click.top)),c.grid&&(e=this.originalPageY+Math.round((e-this.originalPageY)/c.grid[1])*c.grid[1],e=this.containment?e-this.offset.click.top>=this.containment[1]&&e-this.offset.click.top<=this.containment[3]?e:e-this.offset.click.top>=this.containment[1]?e-c.grid[1]:e+c.grid[1]:e,d=this.originalPageX+Math.round((d-this.originalPageX)/c.grid[0])*c.grid[0],
d=this.containment?d-this.offset.click.left>=this.containment[0]&&d-this.offset.click.left<=this.containment[2]?d:d-this.offset.click.left>=this.containment[0]?d-c.grid[0]:d+c.grid[0]:d));return{top:e-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():h?0:f.scrollTop()),left:d-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():h?0:f.scrollLeft())}},
_rearrange:function(a,b,d,e){d?d[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?b.item[0]:b.item[0].nextSibling);var c=this.counter=this.counter?++this.counter:1;this._delay(function(){c===this.counter&&this.refreshPositions(!e)})},_clear:function(a,b){function c(a,b,c){return function(d){c._trigger(a,d,b._uiHash(b))}}this.reverting=!1;var e,f=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);
this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(e in this._storedCSS)if("auto"===this._storedCSS[e]||"static"===this._storedCSS[e])this._storedCSS[e]="";this.currentItem.css(this._storedCSS);this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!b&&f.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===
this.currentItem.parent()[0]||b||f.push(function(a){this._trigger("update",a,this._uiHash())});this===this.currentContainer||b||(f.push(function(a){this._trigger("remove",a,this._uiHash())}),f.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),f.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)));for(e=this.containers.length-1;0<=e;e--)b||f.push(c("deactivate",this,this.containers[e])),
this.containers[e].containerCache.over&&(f.push(c("out",this,this.containers[e])),this.containers[e].containerCache.over=0);this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove());this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex);this.dragging=!1;b||this._trigger("beforeStop",a,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null);if(!b){for(e=0;e<f.length;e++)f[e].call(this,a);this._trigger("stop",a,this._uiHash())}this.fromOutside=!1;return!this.cancelHelperRemoval},_trigger:function(){!1===b.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(a){var c=a||this;return{helper:c.helper,placeholder:c.placeholder||b([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,
item:c.currentItem,sender:a?a.element:null}}})});
(function(b,a){b.web2py!==a&&b.error("web2py.js has already been loaded!");var c="undefined"!==typeof FormData;String.prototype.reverse=function(){return this.split("").reverse().join("")};var d;b.web2py=d={isUndefined:function(a){return void 0===a},popup:function(a){a=window.open(a,"name","height=400,width=600");window.focus&&a.focus();return!1},collapse:function(a){b("#"+a).slideToggle()},fade:function(a,c){0<c?b("#"+a).hide().fadeIn("slow"):b("#"+a).show().fadeOut("slow")},ajax:function(a,c,h,
g){g="undefined"!==typeof g?g:{};var e="";if("string"==typeof c)(c=b(c).serialize())&&(e=c);else{var f=[];if(null!==c&&!d.isUndefined(c))for(var l=0;l<c.length;l++){var n=b("[name="+c[l]+"]").serialize();n&&f.push(n)}0<f.length&&(e=f.join("&"))}c=[function(a){h&&(":eval"==h?eval(a):"string"==typeof h?b("#"+h).html(a):h(a))}];b.isArray(g.done)?c=b.merge(c,g.done):c.push(g.done);a={type:"POST",url:a,data:e,success:c};delete g.done;for(var q in g)a[q]=g[q];b.ajax(a)},ajax_fields:function(a){b('button:not([class^="btn"])',
a).addClass("btn");b('form input[type="submit"]:not([class^="btn"]), form input[type="button"]:not([class^="btn"])',a).addClass("btn");b("input[type=password][data-w2p_entropy]",a).each(function(){d.validate_entropy(b(this))});b("ul.w2p_list",a).each(function(){function a(a,d){var e=b(a).find("li:first").clone(!0);e.find(":text").val("");c(a);b(d.target).parent().is(":visible")?e.insertAfter(b(d.target).parent()):e.appendTo(a);e.find(":text").focus();return!1}function c(a){b(a).find("li").each(function(){var a=
b.trim(b(this.firstChild).val());""===a?b(this).remove():b(this.firstChild).val(a)})}var d=this;b(d).find(":text").after('<a href="#">+</a>&nbsp;<a href="#">-</a>').keypress(function(b){return 13==b.which?a(d,b):!0}).next().click(function(b){a(d,b);b.preventDefault()}).next().click(function(a){1<b(d).children().length&&b(a.target).parent().remove();a.preventDefault()})})},ajax_init:function(a){b(".w2p_hidden",a).hide();d.manage_errors(a);d.ajax_fields(a);d.show_if_handler(a);d.component_handler(a)},
manage_errors:function(a){b("div.error",a).hide().fadeIn("slow")},after_ajax:function(a){var b=a.getResponseHeader("web2py-component-command");a=a.getResponseHeader("web2py-component-flash");null!==b&&eval(decodeURIComponent(b));a&&d.flash(decodeURIComponent(a))},event_handlers:function(){var a=b(document);a.on("click",".w2p_flash",function(a){a.preventDefault();a=b(this);"0px"==a.css("top")?a.slideUp("slow"):a.fadeOut()});a.on("keyup","input.integer",function(){var a=this.value.reverse().replace(/[^0-9\-]|\-(?=.)/g,
"").reverse();this.value!=a&&(this.value=a)});a.on("keyup","input.double, input.decimal",function(){var a=this.value.reverse().replace(/[^0-9\-\.,]|[\-](?=.)|[\.,](?=[0-9]*[\.,])/g,"").reverse();this.value!=a&&(this.value=a)});a.on("click",'input[type="checkbox"].delete',function(){this.checked&&!d.confirm(i18n.delete_confirmation)&&(this.checked=!1)});b(a).on("submit","form",function(a){var c=b(this).find(d.formInputClickSelector);c.each(function(){d.disableElement(b(this))});setTimeout(function(){c.each(function(){d.enableElement(b(this))})},
5E3)});a.ajaxSuccess(function(a,b){a=b.getResponseHeader("web2py-redirect-location");null!==a&&(window.location=a);null===b.getResponseHeader("web2py-component-content")&&d.after_ajax(b)});a.ajaxError(function(a,b,c,e){switch(b.status){case 500:d.flash(i18n.ajax_500)}})},trap_form:function(a,f){b("#"+f+" form").each(function(){var e=b(this);if(!e.hasClass("no_trap")){var g=b(this).attr("data-w2p_target");d.isUndefined(g)||!1===g?e.attr("data-w2p_target",f):f=g;var k=e.attr("action");if(""===k||"#"===
k||d.isUndefined(k))k=a;e.submit(function(a){d.disableElement(e.find(d.formInputClickSelector));d.hide_flash();var b=c?new FormData(e[0]):e.serialize();d.ajax_page("post",k,b,f,e);a.preventDefault()});e.on("click",d.formInputClickSelector,function(a){a.preventDefault();a=b(this).attr("name");d.isUndefined(a)||b('<input type="hidden" />').attr("name",a).attr("value",b(this).val()).appendTo(e);e.trigger("submit")})}})},ajax_page:function(a,c,h,g,k){d.isUndefined(k)&&(k=b(document));if(d.isUndefined(g)||
""===g)g="w2p_none";var e="[object FormData]"===Object.prototype.toString.call(h),f=e?!1:"application/x-www-form-urlencoded; charset=UTF-8";d.fire(k,"ajax:before",null,g)&&b.ajax({type:a,url:c,data:h,processData:!e,contentType:f,beforeSend:function(a,b){a.setRequestHeader("web2py-component-location",document.location);a.setRequestHeader("web2py-component-element",g);d.fire(k,"w2p:componentBegin",[a,b],g);return d.fire(k,"ajax:beforeSend",[a,b],g)},success:function(a,b,c){d.fire(k,"ajax:success",[a,
b,c],g)},error:function(a,b,c){d.fire(k,"ajax:error",[a,b,c],g)},complete:function(a,b){d.fire(k,"ajax:complete",[a,b],g);d.updatePage(a,g);d.trap_form(c,g);d.ajax_init("#"+g);d.after_ajax(a);d.fire(k,"w2p:componentComplete",[a,b],g)}})},component:function(a,c,h,g,k){b(function(){var e=b("#"+c),f=e.get(0),n='jQuery("#'+c+'").get(0).reload();';f.reload=function(){f.reload_check()&&d.ajax_page("get",a,null,c,k)};f.reload_check=function(){if(e.hasClass("w2p_component_stop"))return clearInterval(this.timing),
!1;if(Infinity==this.reload_counter)return!0;if(!isNaN(this.reload_counter))if(--this.reload_counter,0>this.reload_counter)this.run_once||clearInterval(this.timing);else return!0;return!1};isNaN(h)?(f.reload_counter=Infinity,d.ajax_page("get",a,null,c,k)):(f.timeout=h,f.reload_counter=g,1<g?(d.ajax_page("get",a,null,c,k),f.run_once=!1,f.timing=setInterval(n,h),--f.reload_counter):1==g&&(f.run_once=!0,f.setTimeout=setTimeout,f.timing=setTimeout(n,h)))})},updatePage:function(a,c){c=b("#"+c);var d=b.parseHTML(a.responseText,
document,!0),e=b(d).filter("title").add(b(d).find("title")),f=e.last().text();f&&(e.remove(),document.title=b.trim(f));e=a.getResponseHeader("web2py-component-content");"prepend"==e?c.prepend(a.responseText):"append"==e?c.append(a.responseText):"hide"!=e&&c.html(d)},calc_entropy:function(a){for(var b="abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789 !@#$%^&*() ~`-_=+[]{}|;:'\",.<>?/ 0123456789abcdefghijklmnopqrstuvwxyz".split(" "),c=0,d={},e={},m=null,l=a.split(""),n=0;n<l.length;n++){for(var q=
l[n],p=5,u=0;u<b.length;u++)if(-1!=b[u].indexOf(q)){p=u;break}p in e?q in d||(c+=1,d[q]=1):(e[p]=1,c+=b[p].length);p!=m&&(c+=1,m=p)}return Math.round(a.length*Math.log(c)/.6931471805599453*100)/100},validate_entropy:function(a,b){d.isUndefined(a.data("w2p_entropy"))||(b=a.data("w2p_entropy"));var c=function(){var c=(d.calc_entropy(a.val())||0)/b;if(.5>=c){var e=1;var f=2*c}else e=1-2*(Math.max(c,0)-.5),f=1;e="#"+Math.round(15*e).toString(16)+Math.round(15*f).toString(16)+(0).toString(16);a.css("background-color",
e);(e=a.data("entropy_callback"))&&e(c)};a.hasClass("entropy_check")||a.on("keyup",c).on("keydown",c).addClass("entropy_check")},web2py_websocket:function(a,b,c,d){return"WebSocket"in window?(a=new WebSocket(a),a.onopen=c?c:function(){},a.onmessage=b,a.onclose=d?d:function(){},!0):!1},formInputClickSelector:"input[type=submit], input[type=image], button[type=submit], button:not([type])",disableSelector:"input, button, textarea, select",enableSelector:"input:disabled, button:disabled, textarea:disabled, select:disabled",
fire:function(a,c,d,g){c=b.Event(c,{containerTarget:b("#"+g)[0]});a.trigger(c,d);return!1!==c.result},stopEverything:function(a){b(a.target).trigger("w2p:everythingStopped");a.stopImmediatePropagation();return!1},confirm:function(a){return confirm(a)},disableElement:function(a){if(!d.isUndefined(a.data("w2p_disable")))return!1;a.addClass("disabled");var b=a.is("input")?"val":"html";d.isUndefined(a.data("w2p_enable_with"))&&a.data("w2p_enable_with",a[b]());("default"==a.data("w2p_disable_with")||d.isUndefined(a.data("w2p_disable_with")))&&
a.data("w2p_disable_with",i18n.disable_with_message);a[b](a.data("w2p_disable_with"));a.bind("click.w2pDisable",function(a){return d.stopEverything(a)})},enableElement:function(a){var b=a.is("input")?"val":"html";d.isUndefined(a.data("w2p_enable_with"))||(a[b](a.data("w2p_enable_with")),a.removeData("w2p_enable_with"));a.removeClass("disabled");a.unbind("click.w2pDisable")},simple_component:function(a,b,c){d.component(a,b,0,1,c)},flash:function(a,c){var e=b(".w2p_flash");d.hide_flash();e.text(a).addClass(c);
e.html()&&e.append('<span id="closeflash"> &times; </span>').fadeIn()},hide_flash:function(){b(".w2p_flash").fadeOut(0).html("")},show_if_handler:function(a){var c={},d=function(){var d=b(this),e=d.attr("id");d.attr("value",d.val());for(var f=0;f<c[e].length;f++){var g=b("#"+c[e][f],a),h=b("#"+c[e][f]+"__row",a);d.is(g.attr("data-show-if"))?h.fadeIn():h.hide()}};b("[data-show-trigger]",a).each(function(){var a=b(this).attr("data-show-trigger");b("#"+a).length&&(c[a]||(c[a]=[]),c[a].push(b(this).attr("id")))});
for(var e in c)b("#"+e,a).change(d).keyup(d),d.call(b("#"+e,a))},component_handler:function(a){b("div[data-w2p_remote]",a).each(function(){var a=b(this);var c=a.data("w2p_remote");var e=a.data("w2p_times");var k=a.data("w2p_timeout");a=a.attr("id");d.component(c,a,k,e,b(this))})},a_handler:function(a,b){b.preventDefault();var c=a.data("w2p_method"),e=a.attr("href"),f=a.data("w2p_target"),m=a.data("w2p_confirm"),l=a.data("w2p_pre_call");d.isUndefined(l)||eval(l);if(m&&("default"==m&&(m=d.isUndefined(w2p_ajax_confirm_message)?
"Are you sure you want to delete this object?":w2p_ajax_confirm_message),!d.confirm(m))){d.stopEverything(b);return}d.isUndefined(f)?"GET"==c?d.ajax_page("get",e,[],"",a):"POST"==c&&d.ajax_page("post",e,[],"",a):"GET"==c?d.ajax_page("get",e,[],f,a):"POST"==c&&d.ajax_page("post",e,[],f,a)},a_handlers:function(){var a=b(document);a.on("click","a[data-w2p_method]",function(a){d.a_handler(b(this),a)});a.on("ajax:success","a[data-w2p_method][data-w2p_remove]",function(){var a=b(this),c=a.data("w2p_remove");
d.isUndefined(c)||(c=a.closest(c),c.length||(c=b(c)),c.remove())});a.on("ajax:beforeSend","a[data-w2p_method][data-w2p_disable_with]",function(){d.disableElement(b(this))});a.on("ajax:complete","a[data-w2p_method][data-w2p_disable_with]",function(){d.enableElement(b(this))})},disableFormElements:function(a){a.find(d.disableSelector).each(function(){var a=b(this),c=a.is("button")?"html":"val",e=a.data("w2p_disable_with"),k=a.data("w2p_disable");if(!d.isUndefined(k))return!1;a.is(":file")||(d.isUndefined(e)&&
a.data("w2p_disable_with",a[c]()),d.isUndefined(a.data("w2p_enable_with"))&&a.data("w2p_enable_with",a[c]()),a[c](a.data("w2p_disable_with")));a.prop("disabled",!0)})},enableFormElements:function(a){a.find(d.enableSelector).each(function(){var a=b(this),c=a.is("button")?"html":"val";a.data("w2p_enable_with")&&(a[c](a.data("w2p_enable_with")),a.removeData("w2p_enable_with"));a.prop("disabled",!1)})},form_handlers:function(){var a=b(document);a.on("ajax:beforeSend","form[data-w2p_target]",function(){d.disableFormElements(b(this))});
a.on("ajax:complete","form[data-w2p_target]",function(){d.enableFormElements(b(this))})},invalidate:function(a){b("div[data-w2p_remote]",a).each(function(){var a=b("#"+b(this).attr("id")).get(0);d.isUndefined(a.timing)||clearInterval(a.timing)});b.web2py.component_handler(a)},main_hook:function(){var a=b(".w2p_flash");a.hide();a.html()&&d.flash(a.html());d.ajax_init(document);d.event_handlers();d.a_handlers();d.form_handlers()}};b(function(){d.main_hook()})})(jQuery);ajax=jQuery.web2py.ajax;
web2py_component=jQuery.web2py.component;web2py_websocket=jQuery.web2py.web2py_websocket;web2py_ajax_page=jQuery.web2py.ajax_page;web2py_validate_entropy=jQuery.web2py.validate_entropy;web2py_ajax_fields=jQuery.web2py.ajax_fields;web2py_trap_form=jQuery.web2py.trap_form;popup=jQuery.web2py.popup;collapse=jQuery.web2py.collapse;fade=jQuery.web2py.fade;
